{"version":3,"sources":["app.js","blur-image.js","environment.js","main.js","components/top-bar.js","components/user-app-router.js","config/app-settings.js","config/auth-config.js","services/db-service.js","services/http-service.js","services/log.js","services/route-loader.js","services/session.js","lib/form/semantic-form-validation-renderer.js","pages/admin/admin-panel.js","pages/admin/admin-reports.js","pages/admin/admin-router.js","pages/admin/planning.js","pages/admin/user-timesheet.js","pages/admin/users-timesheets.js","pages/timesheets/monthly-timesheet.js","pages/timesheets/planning-router.js","pages/timesheets/planning.js","pages/timesheets/timesheet-entry.js","pages/timesheets/timesheets-router.js","pages/timesheets/timesheets.js","pages/user/logged-redirect.js","pages/user/login.js","pages/user/password.js","pages/user/user-router.js","resources/confirmation/confirmation.js","resources/confirmation/delete-button.js","resources/confirmation/ui-confirmation.js","resources/dropdown/dropdown.js","resources/flash/animateonchange.js","resources/flash/flash-error-message.js","resources/flash/flash-message.js","resources/flash/flash-success-message.js","resources/flash/flash.js","resources/formats/array-join.js","resources/formats/date-format.js","resources/formats/email.js","resources/formats/limit-to-value.js","resources/formats/month-format.js","resources/formats/remote-url.js","resources/formats/tel.js","resources/formats/truncate.js","resources/pagination/pagination.js","resources/pagination/paginator.js"],"names":["App","i18n","fetchConfig","authService","httpClient","aggregator","session","ea","activate","configure","config","useStandardConfiguration","withBaseUrl","baseUrl","withDefaults","credentials","headers","withInterceptor","request","response","responseError","console","log","publish","tr","statusText","Error","append","localStorage","getItem","configureRouter","router","title","addPipelineStep","userApp","route","name","moduleId","nav","auth","loggedIn","map","authRoute","redirect","BlurImageCustomAttribute","Element","element","valueChanged","newImage","complete","drawBlur","onload","mul_table","shg_table","BLUR_RADIUS","stackBlurCanvasRGBA","canvas","top_x","top_y","width","height","radius","isNaN","context","getContext","imageData","getImageData","e","pixels","data","x","y","i","p","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pr","pg","pb","pa","rbs","div","w4","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","next","stackEnd","stackIn","stackOut","mul_sum","shg_sum","r","g","b","a","putImageData","image","w","h","canvasContext","drawImage","debug","testing","addAppender","setLevel","logLevel","aurelia","use","standardConfiguration","developmentLogging","plugin","instance","i18next","options","load","lowerCaseLng","cleanCode","setup","lngs","fallbackLng","default_locale","ns","defaultNs","baseConfig","configureContainer","container","start","then","setRoot","http","registerInstance","registerHandler","get","TopBar","db","dialogService","logout","hasUnsyncedUpdate","open","viewModel","model","result","wasCancelled","clearData","removeUserDBs","invalidate","attached","$","dropdown","navigateToPlanning","navigate","switchLocale","locale","UserAppRouter","isStarted","timesheets","settings","planning","adminPlanning","user","routes","configureFakeRouter","announcements","organizations","configureCommonRouter","configureFORouter","configureMillerRouter","userFilters","notifications","configureFFORouter","configurePublicRouter","rootUrl","envUrlPrefix","country","view_notifications_timeout","calendar_text","days","months","monthsShort","today","now","am","pm","loginUrl","tokenName","loginRedirect","DBService","dbs","Map","syncHandlers","lastUpdates","lastSyncs","userDBs","getDB","dbName","has","setupDB","set","me","skip_setup","handler","sync","getSyncOptions","on","change","Date","direction","err","handleSyncError","live","retry","ajax","status","cancel","delete","destroy","forEach","dbPrefixes","getUser","listUsers","promises","fetch","json","filteredUsers","users","rows","id","match","localUser","doc","_id","roles","push","_rev","put","catch","Promise","all","filteredeUsers","allDocs","include_docs","list","limit","descending","firstRequestOptions","Object","assign","secondRequestOptions","endkey","startkey","results","endResults","error","view","viewName","startKey","endKey","group","query","start_key","end_key","save","create","post","hasUnsynced","lastUpdate","HTTPService","FlashErrorMessage","authHeader","fakeAuthService","getAuthHeaderValue","url","getLogger","RouteLoader","cache","invalidateCache","clear","parentRoute","parentId","bypassCache","resolve","Array","isArray","value","loader","entities","Session","loadFromStorage","getLocale","setLocale","started","setBaseUrl","loadUserFromBackend","JSON","parse","persistToStorage","setItem","stringify","setUser","userInfo","atob","split","username","password","skipSetup","undefined","preferred_locale","history","fragment","replace","getToken","isGranted","role","includes","SemanticFormValidationRenderer","boundaryElement","render","instruction","unrender","elements","remove","add","target","valid","errors","field","querySelector","closest","classList","message","document","createElement","textContent","appendChild","messages","querySelectorAll","length","ELEMENT","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","parentElement","prototype","AdminPanel","tab","params","month","AdminReports","taskQueue","allocations","allocationUserReports","allocationReports","showMonthAggregate","checkbox","onChange","hasClass","loadReports","subscribe","getNextMonth","monthArr","parseInt","retrieveUsers","retrieveAllocations","retrieveAllocationReports","queueMicroTask","generateUsersExportLinks","aggregateReports","allocation","entries","entry","key","allocationName","ratio","parseFloat","mul","duration","salary","groupReportsByAllocation","reports","totals","grouped","reportIdx","report","current","from","values","allReports","allocationUserReportObjects","generateExportLink","csvContent","fileName","lnk","getElementById","setAttribute","encodeURIComponent","AdminRouter","navigateToRoute","Planning","find","calendar","type","inline","text","date","timesheetId","format","UserTimesheet","of","bindingEngine","controller","ensure","required","withMessage","timesheet","allocationSelected","userName","dataset","entryid","selectedEntry","calculateRatios","saveTimesheet","allocationAdded","each","au","totalHours","toJSON","validate","openEntry","UsersTimesheets","purposes","unallocatedOnly","retrieveData","retrieveTimesheets","retrievePurposes","purpose","MonthlyTimesheet","interprets","listPurposes","listInterprets","getTimesheet","interpret","entity","PlanningRouter","TimesheetEntry","routeConfig","navigationInstruction","entryId","getTimesheetEntry","redirectTo","queryParams","hours","minutes","interpret_hours","interpret_minutes","setDate","setupValidation","formatInput","customRule","obj","isMonthUnChanged","satisfiesRule","when","getMonth","getCalendarDate","doCreate","event","interpret_duration","slice","reverse","item","index","object","splice","saveAction","TimesheetsRouter","Timesheets","lastTimesheet","getLastTimesheet","accordion","exclusive","saveEntry","edit","$event","editing","creating","LoggedRedirect","Login","login","loginError","show","btoa","Password","form","current_password","plain_password","first","second","rules","newrules","minimum","equality","addClass","method","body","removeClass","reject","UserRouter","Confirmation","dialogController","DeleteButton","rest","do","stopPropagation","action","BaseViewModel","UIConfirmationAttribute","alert","modal","onApprove","confirmEvent","CustomEvent","detail","bubbles","dispatchEvent","activeChanged","newValue","bind","$arg","approveCallback","DropDownCustomElement","allowAdd","$choice","parentIdChanged","newEntry","oldEntry","restoreDefaults","selectedEntryChanged","isSelectedEntryNew","selected","setEntryName","selectAction","isNew","selectedEntryName","getPlaceHolder","multiple","addAction","AnimateOnChangeCustomAttribute","animator","initialValueSet","FlashMessage","FlashSuccessMessage","Flash","eventAggregator","cssAnimator","messageElement","subscriber","flashType","window","scrollTo","detached","dispose","JoinValueConverter","toView","join","DateFormatValueConverter","EmailValueConverter","html","mail","LimitToValueConverter","array","count","MonthFormatValueConverter","RemoteUrlValueConverter","TelValueConverter","tel","TruncateValueConverter","substring","Pagination","currentPage","itemsPerPage","totalCount","items","setNumberPages","setVisiblePages","numberPages","Math","ceil","NBR_START","NBR_END","NBR_PAGES","NBR_DISABLED","NBR_VISIBLE","visiblePages","startPages","endPages","apply","v","visibleRangeStart","max","visibleRangeEnd","nbrVisiblePages","firstDisabledPages","lastDisabledPages","Paginator","paginate","page","pagination","loadMore"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { HttpClient } from 'aurelia-fetch-client';\nimport { inject } from 'aurelia-framework';\nimport {Container} from 'aurelia-dependency-injection';\nimport {I18N} from 'aurelia-i18n';\nimport {AuthorizeStep, AuthService, FetchConfig} from 'aurelia-auth';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { FlashErrorMessage } from './resources/flash/flash-error-message';\nimport settings from './config/app-settings';\nimport { Session} from './services/session';\n\n@inject(I18N, FetchConfig, AuthService, HttpClient, EventAggregator, Session)\nexport class App {\n\n    constructor(i18n, fetchConfig, authService, httpClient, aggregator, session) {\n    \n        this.i18n = i18n;\n        this.fetchConfig = fetchConfig;\n        this.authService = authService;\n        this.httpClient = httpClient;\n        this.ea = aggregator;\n        this.session = session;\n\n    }\n\n    activate() {\n    \n        let ea = this.ea;\n        let i18n = this.i18n;\n\n        this.httpClient.configure(config => {\n        config\n            .useStandardConfiguration()\n            .withBaseUrl(settings.baseUrl)\n            .withDefaults({\n            credentials: 'same-origin',\n            headers: {\n                'Accept': 'application/json',\n                'X-Requested-With': 'Fetch'\n            }\n            })\n            .withInterceptor({\n                request(request) {\n                    return request;\n                },\n                response(response) {\n                    return response;\n                },\n                responseError(response) {\n                    console.log(response);\n                    ea.publish(new FlashErrorMessage(i18n.tr(response.statusText)));\n                    return new Error(response.statusText);\n                }\n            })\n            .withInterceptor({\n                request(request) {\n                    request.headers.append('Authorization', 'Basic ' + localStorage.getItem('aurelia_token'));\n                    return request;\n                }\n            })\n            ;\n        });\n    }\n\n\n    configureRouter(config, router) {\n        config.title = 'Timeflies';\n\n        config.addPipelineStep('authorize', AuthorizeStep);\n        let userApp = {\n            route: ['app'], \n            name: 'home', \n            moduleId: 'components/user-app-router', \n            nav: false, \n            title: 'Home',\n            auth: true  \n        };\n\n        let loggedIn = {\n            route: ['loggedIn'], \n            name: 'Logged', \n            moduleId: 'pages/user/logged-redirect', \n            nav: false, \n            title: 'Logged',\n            auth: true  \n        };\n\n        config.map([\n            { route: ['login'], name: 'login', moduleId: 'pages/user/login', nav: false, title: 'Login', authRoute: true },\n            { route: '', redirect: 'loggedIn' },\n            ...userApp,\n            ...loggedIn\n        ]);\n\n        this.router = router;\n    }\n}\n","import {inject} from 'aurelia-framework';\n\n@inject(Element)\nexport class BlurImageCustomAttribute {\n  constructor(element) {\n    this.element = element;\n  }\n\n  valueChanged(newImage) {\n    if (newImage.complete) {\n      drawBlur(this.element, newImage);\n    } else {\n      newImage.onload = () => drawBlur(this.element, newImage);\n    }\n  }\n}\n\n/* eslint-disable */\n\n/*\nThis Snippet is using a modified Stack Blur js lib for blurring the header images.\n*/\n\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:     0.5\nAuthor:\t\tMario Klingemann\nContact: \tmario@quasimondo.com\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\nTwitter:\t@quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar mul_table = [\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\n\n\nvar shg_table = [\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\n\nvar BLUR_RADIUS = 40;\n\nfunction stackBlurCanvasRGBA( canvas, top_x, top_y, width, height, radius )\n{\n\tif ( isNaN(radius) || radius < 1 ) return;\n\tradius |= 0;\n\n\tvar context = canvas.getContext(\"2d\");\n\tvar imageData;\n\n\ttry {\n\t  imageData = context.getImageData( top_x, top_y, width, height );\n\t} catch(e) {\n\t  throw new Error(\"unable to access image data: \" + e);\n\t}\n\n\tvar pixels = imageData.data;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum,\n\tpr, pg, pb, pa, rbs;\n\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1  = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1  = radius + 1;\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\n\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor ( i = 1; i < div; i++ )\n\t{\n\t\tstack = stack.next = new BlurStack();\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\n\tyw = yi = 0;\n\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\n\tfor ( y = 0; y < height; y++ )\n\t{\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\n\t\tstack = stackStart;\n\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tfor( i = 1; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\n\t\t\tstack = stack.next;\n\t\t}\n\n\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( x = 0; x < width; x++ )\n\t\t{\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa != 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\n\t\t\t}\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\n\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\n\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\t\t\ta_sum += a_in_sum;\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\n\tfor ( x = 0; x < width; x++ )\n\t{\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\n\t\tstack = stackStart;\n\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\typ = width;\n\n\t\tfor( i = 1; i <= radius; i++ )\n\t\t{\n\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\n\t\t\tstack = stack.next;\n\n\t\t\tif( i < heightMinus1 )\n\t\t\t{\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( y = 0; y < height; y++ )\n\t\t{\n\t\t\tp = yi << 2;\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa > 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\n\t\t\t}\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\n\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += width;\n\t\t}\n\t}\n\n\tcontext.putImageData( imageData, top_x, top_y );\n\n}\n\nfunction BlurStack()\n{\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n}\n\nfunction drawBlur(canvas, image) {\n  var w = canvas.width;\n  var h = canvas.height;\n  var canvasContext = canvas.getContext('2d');\n  canvasContext.drawImage(image, 0, 0, w, h);\n  stackBlurCanvasRGBA(canvas, 0, 0, w, h, BLUR_RADIUS);\n};\n","export default {\n  debug: true,\n  testing: true\n};\n","import { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { I18N } from 'aurelia-i18n';\nimport semanticui from 'semantic';\nimport semanticuicalendar from 'semantic-calendar/calendar';\nimport { FlashErrorMessage } from 'resources/flash/flash-error-message';\nimport { SemanticFormValidationRenderer } from 'lib/form/semantic-form-validation-renderer';\nimport config from './config/auth-config';\nimport settings from './config/app-settings';\nimport PouchDB from 'pouchdb';\n\nimport {LogManager} from 'aurelia-framework';\nimport {ConsoleAppender} from 'aurelia-logging-console';\n\nLogManager.addAppender(new ConsoleAppender());\nLogManager.setLevel(LogManager.logLevel.debug);\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging()\n\n  //Uncomment the line below to enable animation.\n  //aurelia.use.plugin('aurelia-animator-css');\n  //if the css animator is enabled, add swap-order=\"after\" to all router-view elements\n\n  //Anyone wanting to use HTMLImports to load views, will need to install the following plugin.\n  //aurelia.use.plugin('aurelia-html-import-template-loader')\n\n    .plugin(\"aurelia-dialog\")\n    .plugin('aurelia-i18n', (instance) => {\n        \n        //instance.i18next.use(Backend);\n\n        //below settings needed to support en-US locales (with - in name)\n        instance.i18next.options.load = 'currentOnly';\n        instance.i18next.options.lowerCaseLng = false;\n        instance.i18next.options.cleanCode = false;\n\n        return instance.setup({\n            //backend: {                                  \n            //    loadPath: settings.baseUrl + '/{{lng}}/api/translations/{{ns}}.json',\n            //},\n            lngs: ['en-US', 'km-KH'],\n            fallbackLng : settings.default_locale,\n            debug: false,//settings.debug,\n            //ns: ['translation', 'announcement', 'organization', 'user'],\n            ns: ['translation'],\n            defaultNs: 'translation'\n        });\n    })\n    //.plugin('aurelia-validatejs')\n    .plugin('aurelia-validation')\n    .plugin('aurelia-auth', (baseConfig) => {\n        baseConfig.baseUrl = settings.baseUrl;\n        baseConfig.configure(config);\n    });\n    ;\n\n    configureContainer(aurelia.container);\n\n    aurelia.start().then(() => {\n        aurelia.setRoot()\n    });\n}\n\n\nfunction configureContainer(container) {\n    let http = new HttpClient();\n    \n    container.registerInstance(HttpClient, http);\n    //container.registerInstance(HttpClient, httpMock);\n\n    container.registerHandler(\n        'semantic-form',\n        container => container.get(SemanticFormValidationRenderer));  \n}\n","import { inject } from 'aurelia-framework';\nimport { Session } from '../services/session';\nimport { I18N } from 'aurelia-i18n';\nimport { DBService } from '../services/db-service';\nimport {DialogService} from \"aurelia-dialog\";\nimport {Confirmation} from \"../resources/confirmation/confirmation\";\nimport settings from '../config/app-settings';\nimport { Router } from 'aurelia-router';\n\n@inject(Session, I18N, DBService, DialogService, Router)\nexport class TopBar {\n\n    title = 'Timeflies';\n\n    constructor(session, i18n, db, dialogService, router) {    \n        this.session = session;   \n        this.i18n = i18n;\n        this.db = db;\n        this.dialogService = dialogService;\n        this.router = router;\n        this.title = this.i18n.tr('site_title');\n    }\n\n    logout() {\n        if (this.db.hasUnsyncedUpdate()) {\n            this.dialogService.open({\n                viewModel: Confirmation,\n                model: this.i18n.tr('unsync-warning')\n            }).then(result => {\n                if (result.wasCancelled) return;\n                this.clearData();\n            });\n            return;\n        }\n        \n        this.clearData();\n    }\n\n    clearData() {\n        this.db.removeUserDBs();\n        this.session.invalidate();\n    }\n\n    attached() {\n        $('.language-switch').dropdown();\n    }\n\n    navigateToPlanning() {\n        this.navigate('app/timesheets/planning');\n    }\n\n    switchLocale(locale) {\n        this.session.switchLocale(locale);\n    }\n}\n","import { inject } from 'aurelia-framework';\nimport { Session } from '../services/session';\nimport { I18N } from 'aurelia-i18n';\nimport settings from '../config/app-settings';\n\n@inject(Session, I18N)\n/**\n * Router for the App once the user is logged in\n */\nexport class UserAppRouter {\n\n    constructor(session, i18n) {    \n        this.session = session;\n        this.i18n = i18n;\n\n        if (!this.session.isStarted()) {\n            this.session.start();\n        }\n\n    }\n\n    configureRouter(config, router) {\n\n        let timesheets =\n            { \n            route: ['timesheets'], \n            name: 'timesheets', \n            moduleId: 'pages/timesheets/timesheets-router', \n            nav: true, \n            title: 'nav.timesheets', \n            settings: { 'icon': 'feed' } ,\n            auth: true\n            };\n\n        let planning =\n            { \n            route: ['planning'], \n            name: 'planning', \n            moduleId: 'pages/timesheets/planning-router', \n            nav: true, \n            title: 'nav.planning', \n            settings: { 'icon': 'calendar' } ,\n            auth: true\n            };\n\n        let adminPlanning =\n            { \n            route: ['admin'], \n            name: 'admin-planning', \n            moduleId: 'pages/admin/admin-router', \n            nav: true, \n            title: 'nav.planning', \n            settings: { 'icon': 'percent' } ,\n            auth: true\n            };\n\n        let user =\n            { \n            route: ['user'], \n            name: 'user', \n            moduleId: 'pages/user/user-router', \n            nav: false, \n            title: 'nav.user', \n            settings: { 'icon': 'users' } ,\n            auth: true\n            };\n\n        let routes = [\n            ...timesheets,\n            ...planning,\n            ...adminPlanning,\n            ...user\n        ];\n\n        config.map(routes);\n\n        this.router = router;\n\n    }\n\n\n    configureFakeRouter(config, router) {\n\n        let announcements =\n            { \n            route: ['announcements'], \n            name: 'announcements', \n            moduleId: 'pages/announcements/announcements-router', \n            nav: true, \n            title: 'nav.announcements', \n            settings: { 'icon': 'feed' } ,\n            auth: true\n            };\n\n        let organizations =\n            { \n            route: ['organizations'], \n            name: 'organizations', \n            moduleId: 'pages/organizations/organizations-router', \n            nav: false, \n            title: 'nav.organizations', \n            settings: { 'icon': 'users' } ,\n            auth: true\n            };\n\n        return [\n            ...announcements,\n            ...organizations\n        ];\n\n    }\n\n    configureCommonRouter(config, router) {\n\n        let announcements =\n            { \n            route: ['announcements'], \n            name: 'announcements', \n            moduleId: 'pages/announcements/announcements-router', \n            nav: true, \n            title: 'nav.announcements', \n            settings: { 'icon': 'feed' } ,\n            auth: true\n            };\n\n        let organizations =\n            { \n            route: ['organizations'], \n            name: 'organizations', \n            moduleId: 'pages/organizations/organizations-router', \n            nav: false, \n            title: 'nav.organizations', \n            settings: { 'icon': 'users' } ,\n            auth: true\n            };\n\n        let user =\n            { \n            route: ['user'], \n            name: 'user', \n            moduleId: 'pages/user/user-router', \n            nav: false, \n            title: 'nav.user', \n            settings: { 'icon': 'users' } ,\n            auth: true\n            };\n\n        return [\n            ...announcements,\n            ...organizations,\n            ...user\n        ];\n\n    }\n\n    configureFORouter(config, router) {\n\n        return this.configureCommonRouter(config, router);\n        \n    }\n\n    configureMillerRouter(config, router) {\n\n        let routes = this.configureCommonRouter( config, router);\n\n         let userFilters =\n            { \n            route: ['user-filters'], \n            name: 'userFilters', \n            moduleId: 'pages/user-filters/filters-router', \n            nav: true, \n            title: 'nav.filters', \n            settings: { 'icon': 'filter'} ,\n            auth: true\n            };\n\n        let notifications =\n            { \n            route: ['notifications'], \n            name: 'notifications', \n            moduleId: 'pages/notifications/notifications-router', \n            nav: true, \n            title: 'nav.notifications', \n            settings: { 'icon': 'mail outline' } ,\n            auth: true\n            };\n\n        return [\n            ...routes,\n            userFilters,\n            ...notifications\n        ];\n\n    }\n\n    configureFFORouter(config, router) {\n\n        return this.configureFORouter( config, router);\n\n    }\n\n    configurePublicRouter(config, router) {\n\n        return this.configureFORouter( config, router);\n\n    }\n\n}","var settings = {\n    rootUrl: '',\n    envUrlPrefix: '',\n    baseUrl: '',\n    default_locale: 'km-KH',\n    debug: false,\n    country: 1,\n    view_notifications_timeout: 5000,\n\n    calendar_text: {\n        days: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n        months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        today: 'Today',\n        now: 'Now',\n        am: 'AM',\n        pm: 'PM'\n    }\n}\n\nsettings.rootUrl = 'http://timesheet.local';\nsettings.envUrlPrefix = '/app_dev.php';\nsettings.baseUrl = settings.rootUrl + settings.envUrlPrefix;\nsettings.debug = true;\n\nexport default settings;","var config = {\n\n    loginUrl: 'https://proacti.cloudant.com/_session',\n\n    tokenName: 'token',\n\n    loginRedirect: '#/loggedIn',\n\n}\n\nexport default config;","import { inject, singleton } from 'aurelia-framework';\nimport { Session} from './session';\nimport PouchDB from 'pouchdb';\nimport moment from 'moment';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { log } from './log';\n\n@inject(Session, HttpClient, EventAggregator)\n@singleton()\nexport class DBService {\n\n    //dbs currently connected and their sync handlers\n    dbs = new Map();\n    syncHandlers = new Map();\n    \n    //moments when dbs get updated and synced to remote\n    lastUpdates = new Map();\n    lastSyncs = new Map();\n\n    //db prefixes for user-specific databases\n    userDBs = [\n        'timesheet'\n    ];\n\n    constructor(session, http, ea) {\n        this.session = session;\n        this.http = http;\n        this.ea = ea;\n    }\n\n    getDB(dbName) {\n\n        if (!this.dbs.has(dbName)) {\n            let db = this.setupDB(dbName);\n            this.dbs.set(dbName, db);\n        }\n        return this.dbs.get(dbName);\n\n    } \n\n    setupDB(dbName) {\n\n        let me = this;\n\n        let db = new PouchDB(dbName,{skip_setup: true});\n        \n        let handler = db.sync(\n            'https://proacti.cloudant.com/' + dbName, \n            me.getSyncOptions()\n        ).on('change', function (change) {\n            me.lastSyncs.set(dbName, Date.now());\n\n            //notify the application that data may have changed\n            if (change.direction === 'pull') {\n                me.ea.publish('dbsync', {dbName: dbName});\n            }\n\n        }).on('error', function (err) {\n            console.log(err);\n            me.handleSyncError(db, err);\n        });\n\n        this.syncHandlers.set(dbName, handler);\n\n        return db;\n\n    }\n\n    getSyncOptions() {\n        return {\n            live: true,\n            retry: true,\n            \n            ajax: {\n                \"withCredentials\": false,\n                \"headers\": {\n                    \"Authorization\": \"Basic \" + localStorage.getItem('aurelia_token')\n                }\n            }\n        };\n    }\n\n    handleSyncError(db, err) {\n        //destroy local database if permission has been revoked or remote database has been deleted\n        if (err.status === 403 || err.status === 404) {\n\n            this.syncHandlers.get(db.name).cancel();    \n            this.syncHandlers.delete(db.name);\n            db.destroy();\n            this.dbs.delete(db.name);\n\n        } else if (err.status === 401) {\n            //unauthorized, user has been revoked or password changed. Remove local storage\n            this.session.invalidate();\n        }\n    }\n\n    //removes all databases that are specific to the current user\n    removeUserDBs() {\n        let me = this;\n        //stop replication on all databases\n        this.userDBs.forEach(function (dbPrefixes) {\n            let dbName = dbPrefixes + '-' + me.session.getUser().name;\n\n            if (!me.dbs.has(dbName)) {\n                return;\n            }\n\n            me.syncHandlers.get(dbName).cancel();\n            me.syncHandlers.delete(dbName);\n            me.dbs.get(dbName).destroy();\n            me.dbs.delete(dbName);\n            \n        });\n\n        //remove staff db\n        if (this.dbs.has('staff')) {\n            this.dbs.get('staff').destroy();\n            this.dbs.delete('staff');\n        }\n    }\n\n    listUsers() {\n\n        //we cannot replicate the _users database even with admin access to it\n        //so we copy it partially if we can retrieve it\n\n        if (!this.dbs.has('staff')) {\n            let db = new PouchDB('staff', {skip_setup: true});\n            this.dbs.set('staff', db);\n        } \n\n        let db = this.dbs.get('staff');\n\n        let promises = [];\n\n        //we can't access design documents on _users database so we retrieve all docs        \n        return this.http.fetch('https://proacti.cloudant.com/_users/_all_docs?include_docs=true')\n        .then(response => response.json())\n        .then(users => {\n            let filteredUsers = [];\n            users.rows.forEach( (user) => {\n\n                //all_docs returns everything including design documents.\n                //filter for users only\n                if (user.id.match(/^org\\.couchdb\\.user/)) {\n\n                    let localUser = {\n                        id: user.doc._id,\n                        doc: {\n                            _id: user.doc._id,\n                            name: user.doc.name,\n                            roles: user.doc.roles\n                        }\n                    }\n                    filteredUsers.push(localUser);\n\n                    promises.push(\n                        db.get(localUser.id).then( (doc) => {\n                            //replace existing doc if it exists or create it if not\n                            if (doc) {\n                                localUser.doc._rev = doc._rev;\n                            }\n                            db.put(localUser.doc);\n                        }).catch( (err) => {\n                            if (err.status === 404) {\n                                db.put(localUser.doc);\n                            }\n                        })\n                    );\n                }\n            });\n\n            //return the filtered users array only when all promises are resolved\n            return Promise.all(promises).then( () => filteredeUsers );\n        })\n        .catch( err => {\n            //if we cannot connect to remote, retrieve local staff database\n            return db.allDocs({include_docs: true}).then( (result) => result.rows);\n        })\n\n    }\n\n    list(dbName, limit = false, descending = false) {\n\n        let options = {\n            include_docs: true\n        }\n        if (limit) {\n            options.limit = limit;\n        }\n        if (descending) {\n            options.descending = descending;\n        }\n\n        //To exclude design docs when listing documents, we need 2 separate requests\n        //https://issues.apache.org/jira/browse/COUCHDB-2227\n\n        //if descending, get the last docs first. Otherwise start with alpha order\n        let firstRequestOptions = Object.assign({}, options);\n        let secondRequestOptions = Object.assign({}, options);\n\n        if (descending) {\n            firstRequestOptions.endkey = '_design\\uffff';\n            secondRequestOptions.startkey = '_design';\n        } else {\n            firstRequestOptions.endkey = '_design';\n            secondRequestOptions.startkey = '_design\\uffff';\n        }\n\n        let me = this;\n        \n        return this.getDB(dbName).allDocs(firstRequestOptions)\n        .then(function (results) {\n        \n            return me.getDB(dbName).allDocs(secondRequestOptions)\n            .then(function (endResults) {\n        \n                return [\n                    ...results.rows,\n                    ...endResults.rows\n                ];\n        \n            }).catch(function (err) {\n                log.error(err);\n            });\n            \n        }).catch(function (err) {\n            log.error(err);\n        });\n    }\n\n    get(dbName, id) {\n\n        return this.getDB(dbName).get(id, {})\n        .then(function (result) {\n            return result;\n        }).catch(function (err) {\n            log.error(err);\n        });\n    }\n\n    view(dbName, viewName, startKey = '', endKey = '', group = false) {\n\n        return this.getDB(dbName).query(\n            viewName,\n            {\n                start_key: startKey,\n                end_key: endKey,\n                group: group\n            }\n        )\n        .then(function (response) {\n            return response.rows;\n        })\n        .catch(function (err) {\n            log.error(err);\n        });\n\n    }\n\n    save(dbName, doc) {\n\n        this.lastUpdates.set(dbName, Date.now());\n\n        return this.getDB(dbName).put(doc)\n        .then(function (response) {\n            return response;\n        })\n        .catch(function (err) {\n            log.error(err);\n        });\n\n    }\n\n    create(dbName, doc) {\n\n        this.lastUpdates.set(dbName, Date.now());\n\n        return this.getDB(dbName).post(doc)\n        .then(function (response) {\n            return response;\n        })\n        .catch(function (err) {\n            log.error(err);\n        });\n\n    }\n\n    hasUnsyncedUpdate() {\n\n        let hasUnsynced = false;\n        let me = this;\n\n        this.lastUpdates.forEach(function (lastUpdate, dbName) {\n\n            if (\n                !me.lastSyncs.has(dbName) ||\n                me.lastUpdates.get(dbName) > me.lastSyncs.get(dbName)\n            ) {\n                hasUnsynced = true;\n            }\n\n        });\n\n        return hasUnsynced;  \n    }\n}","import { inject, singleton } from 'aurelia-framework';\nimport { Session} from './session';\nimport PouchDB from 'pouchdb';\nimport moment from 'moment';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport settings from '../config/app-settings';\n\n@inject(Session, HttpClient, EventAggregator)\n@singleton()\nexport class HTTPService {\n\n    constructor(session, http, ea) {\n        this.session = session;\n        this.http = http;\n        this.ea = ea;\n\n        this.configure();\n    }\n\n    configure() {\n        this.http.configure(config => {\n        config\n            .useStandardConfiguration()\n            .withBaseUrl(settings.baseUrl)\n            .withDefaults({\n            credentials: 'same-origin',\n            headers: {\n                'Accept': 'application/json',\n                'X-Requested-With': 'Fetch'\n            }\n            })\n            .withInterceptor({\n                request(request) {\n                    return request;\n                },\n                response(response) {\n                    return response;\n                },\n                responseError(response) {\n                    console.log(response);\n                    ea.publish(new FlashErrorMessage(i18n.tr(response.statusText)));\n                    return new Error(response.statusText);\n                }\n            })\n            .withInterceptor({\n                request(request) {\n                    let authHeader = fakeAuthService.getAuthHeaderValue(request.url);\n                    request.headers.append('Authorization', authHeader);\n                    return request;\n                }\n            })\n            ;\n        });\n    }\n\n    fetch(url) {\n         return this.http.fetch(url)\n        .then(response => response.json())\n        .then(users => {\n            return users;\n        })\n    }\n\n}","import {LogManager} from \"aurelia-framework\";\nexport var log = LogManager.getLogger('timesheet');","import { inject, singleton } from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\n\n@inject(HttpClient)\n@singleton()\nexport class RouteLoader {\n\n    cache = new Map();\n\n    constructor(httpClient) {\n        this.http = httpClient;\n    }\n\n    invalidateCache() {\n        this.cache.clear();\n    }\n\n    load(route, parentRoute, parentId, bypassCache) {\n\n        if (! route) {\n            return new Promise((resolve) => {});\n        }\n\n        if (parentRoute && ! parentId) {\n            return new Promise((resolve) => {});\n        }\n\n        if (parentId) {\n            if (Array.isArray(parentId)) {\n                route = route + '?';\n                parentId.forEach(function (value) {\n                    route += parentRoute + '[]=' + value + '&';\n                });\n            } else {\n                route = parentRoute + '/' + parentId + '/' + route;\n            }\n        }\n\n        let loader = this;\n\n        if (!bypassCache && this.cache.has(route)) {\n            return new Promise((resolve) => {\n                resolve(loader.cache.get(route));\n            });\n        }\n\n        return this.http.fetch(route)\n        .then(response => response.json())\n        .then(entities => {\n            loader.cache.set(route, entities);\n            return entities;\n        })\n    }\n\n}","import { inject, singleton } from 'aurelia-framework';\nimport { RouteLoader } from './route-loader';\nimport { Router } from 'aurelia-router';\nimport { AuthService } from 'aurelia-auth';\nimport {I18N} from 'aurelia-i18n';\nimport settings from '../config/app-settings';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport PouchDB from 'pouchdb';\n\n@singleton()\n@inject(RouteLoader, Router, AuthService, I18N, HttpClient)\nexport class Session {\n\n    constructor(loader, router, auth, i18n, http) {\n        this.loader = loader;\n        this.router = router;\n        this.auth = auth;\n        this.i18n = i18n;\n        this.http = http;\n\n        this.loadFromStorage();\n        this.locale = this.getLocale();\n        this.i18n\n            .setLocale(this.locale);\n\n        this.started = false;\n\n        this.setBaseUrl();\n    }\n\n    start() {\n        let me = this;\n        console.log(\"START\");\n        return this.loadUserFromBackend().then( () => {\n            console.log(\"STARTED\");\n            me.started = true;\n        console.log(\"started\");\n        }).catch (function (err) {\n            console.log(err);\n        });\n    }\n\n    setBaseUrl() {\n        settings.baseUrl = \n            settings.rootUrl + \n            settings.envUrlPrefix +\n            '/' + \n            this.locale + \n            '/' + \n            'api/'\n        ;    \n    }\n\n    isStarted() {\n        return this.started;\n    }\n\n    loadFromStorage() {\n        if (localStorage.getItem('session') !== null) {\n            let session = JSON.parse(localStorage.getItem('session'));\n            this.user = session.user;\n            this.locale = session.locale;\n        }\n    }\n\n    persistToStorage() {\n        let session = {\n            'user': this.user,\n            'locale': this.locale\n        };\n\n        localStorage.setItem('session', JSON.stringify(session));\n    }\n\n    setUser(user) {\n        this.user = user;\n        this.persistToStorage();\n    }\n\n    getUser() {\n        return this.user;\n    }\n    \n    loadUserFromBackend() {\n\n        if (localStorage.getItem('aurelia_token') === null) {\n            return new Promise((resolve) => {});\n        }\n\n       let userInfo = atob(localStorage.getItem('aurelia_token')).split(':');\n       let username = userInfo[0];\n       let password = userInfo[1];\n\n        let db = new PouchDB(\n            'https://proacti.cloudant.com/_users',\n            { \n                skipSetup: true,\n                auth: {\n                    \"username\": username,\n                    \"password\": password\n                },\n                ajax: {\n                    \"withCredentials\": false\n                }\n            }\n        );\n\n        let me = this;\n\n        let user = db.get(\n            'org.couchdb.user:' + username,\n            {\n                include_docs: true\n            }\n        ).then(function (result) {\n            me.user = result;\n            me.persistToStorage();\n        }).catch(function (err) {\n            console.log(err);\n        });\n       \n        return new Promise.resolve(true);        \n    }\n\n    invalidate() {\n        this.user = null;\n        localStorage.setItem('session', '{}');            \n        this.auth.logout('#/login');\n    }\n\n    getLocale() {\n\n        if (this.locale !== undefined) {\n            return this.locale;\n        }\n\n        if (this.user !== undefined && this.user.preferred_locale !== undefined) {\n            return this.user.preferred_locale;\n        }\n        \n        return settings.default_locale;\n    }\n\n    switchLocale(locale) {\n        this.locale = locale;\n        this.setBaseUrl();\n        this.i18n.setLocale(this.locale);\n        this.http.configure(config => {\n            config\n                .withBaseUrl(settings.baseUrl)\n        });\n        this.persistToStorage();\n        \n        this.loader.invalidateCache();\n\n        this.router.navigate(this.router.history.fragment, {replace:true});\n    }\n\n    getToken() {\n        return localStorage.getItem('aurelia_token');\n    }\n\n    isGranted(role) {\n        if (this.user === undefined) {\n            return false;\n        }\n        return this.user.roles.includes(role);\n    }\n}","import {inject} from 'aurelia-dependency-injection';\nimport {ValidationRenderer, RenderInstruction, ValidateResult} from 'aurelia-validation';\n\n@inject(Element)\nexport class SemanticFormValidationRenderer {\n    constructor(boundaryElement) {\n        this.boundaryElement = boundaryElement;\n    }\n\n    render(instruction) {\n        for (let { result, elements } of instruction.unrender) {\n            for (let element of elements) {\n                this.remove(element, result);\n            }\n        }\n\n        for (let { result, elements } of instruction.render) {\n            for (let element of elements) {\n                this.add(element, result);\n            }\n        }\n\n    }\n\n    add(target, result) {\n    \n        if (result.valid) {\n            return;\n        }\n\n        // tag the element so we know we rendered into it.\n        target.errors = (target.errors || new Map());\n        target.errors.set(result);\n\n        // add the error class to the semantic field\n        const field = target.querySelector('.field') || target.closest('.field');\n        field.classList.add('error');\n\n        // add help-block\n        const message = document.createElement('div');\n        message.classList.add('ui');\n        message.classList.add('error');\n        message.classList.add('message');\n        message.classList.add('visible');\n        message.classList.add('validation-error');\n        message.textContent = result.message;\n        message.error = result;\n        field.appendChild(message);\n    }\n\n    remove(target, result) {\n\n        if (result.valid) {\n            return;\n        }\n\n        target.errors.delete(result);\n\n        // remove the has-error class on the bootstrap form-group div\n        const field = target.querySelector('.field') || target.closest('.field');\n        field.classList.remove('error');\n\n        // remove all messages related to the error.\n        let messages = field.querySelectorAll('.validation-error');\n        let i = messages.length;\n        while(i--) {\n            let message = messages[i];\n            if (message.error !== result) {\n                continue;\n            }\n            message.result = null;\n            message.remove();\n        }\n    }\n}\n\n// Polyfill for Element.closest and Element.matches\n// https://github.com/jonathantneal/closest/\n(function (ELEMENT) {\n\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n\n\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\tvar element = this;\n\n\t\twhile (element) {\n\t\t\tif (element.matches(selector)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn element;\n\t};\n}(Element.prototype));","import { inject } from 'aurelia-framework';\nexport class AdminPanel {\n\n    attached() {\n        $('.admin.panel.menu .item').tab();\n    }\n\n    activate(params) {        \n        this.month = params.month;\n    }\n\n}","import { inject, bindable, TaskQueue } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { AdminRouter } from './admin-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\nimport Decimal from 'decimal';\n\n@inject(Session, DBService, I18N, EventAggregator, TaskQueue, AdminRouter)\nexport class AdminReports {\n\n    @bindable month;\n    users = new Map();\n    allocations = new Map();\n    allocationUserReports = new Map();\n    allocationReports = [];    \n    showMonthAggregate = false;\n\n    constructor(session,db, i18n, ea, taskQueue, router) {\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.ea = ea;\n        this.router = router;\n        this.taskQueue = taskQueue;\n    }\n\n    attached() {\n        let me = this;\n        $('#showMonthAggregate').checkbox({\n            onChange: function() {\n                me.showMonthAggregate = $('#showMonthAggregate').hasClass('checked');\n            }\n        });\n\n        this.loadReports();\n\n        this.ea.subscribe('dbsync', response => {\n            if (response.dbName.match(/^timesheet\\-/)) {\n                me.loadReports();\n            }\n        });\n    }\n\n    getNextMonth() {\n\n        let monthArr = this.month.split('-');\n        if (parseInt(monthArr[1]) === 12) {\n            return (parseInt(monthArr[0]) + 1 ) + '-01';\n        }\n\n        let next = parseInt(monthArr[1]) + 1;\n\n        return monthArr[0] + '-' + (next<10?'0':'') + next;\n\n    }\n\n    loadReports() {\n        this.retrieveUsers().then( () => {\n            this.retrieveAllocations().then( () => {\n                this.retrieveAllocationReports().then( () => {\n                    this.taskQueue.queueMicroTask(() => {\n                        this.generateUsersExportLinks();                                        \n                        this.aggregateReports();\n                    });\n                })\n            })\n        });\n    }\n\n    retrieveUsers() {\n        let me = this;\n\n        return this.db.listUsers().then( response => {\n            response.forEach( (user) => {\n                me.users.set(user.doc.name, user);\n            });\n            return new Promise((resolve) => { resolve(); });\n        }); \n\n    }\n\n    retrieveAllocations() {\n        let me = this;\n        return this.db.list('allocation').then( response => {\n\n            if (response) {\n\n                response.forEach(function (allocation) {\n                    me.allocations.set(allocation.id, allocation.doc.name);\n                })               \n            \n            }\n\n            return new Promise((resolve) => { resolve(); });\n        });\n    }\n\n    retrieveAllocationReports() {\n        \n        let me = this;\n\n        let promises = [];\n        this.users.forEach(function (user) {\n\n            promises.push(\n                me.db.view(\n                    'timesheet-' + user.doc.name, \n                    'allocations/stats',\n                    me.month,\n                    me.getNextMonth(),\n                    false\n                ).then( entries => {\n                    if (entries) {\n                        let allocationUserReports = [];\n                        entries.forEach( (entry) => {\n                            let allocation = entry.key.split(':')[1];\n                            allocationUserReports.push({\n                                allocation: allocation,\n                                allocationName: me.allocations.get(allocation),\n                                ratio: new Decimal(parseFloat(entry.value[0])).mul(100),\n                                duration: new Decimal(entry.value[1]),\n                                salary: new Decimal(entry.value[2]).mul(parseFloat(entry.value[0]))\n                            });\n                        });\n                        me.allocationUserReports.set(\n                            user.doc.name,\n                            me.groupReportsByAllocation(allocationUserReports)\n                        );                        \n                    }\n                }) \n            );\n        }); \n\n        return Promise.all(promises);\n    }\n\n    groupReportsByAllocation(reports) {\n\n        let totals = {\n            ratio: new Decimal(0),\n            duration: new Decimal(0),\n            salary: new Decimal(0)\n        }\n\n        let grouped = new Map();\n        for (let reportIdx in reports) {\n\n            let report = reports[reportIdx];\n            \n            if (!grouped.has(report.allocation)) {\n                grouped.set(report.allocation, report);\n                totals.ratio = totals.ratio.add(report.ratio);\n                totals.duration = totals.duration.add(report.duration);\n                totals.salary = totals.salary.add(report.salary);\n                continue;\n            }\n\n            let current = grouped.get(report.allocation);\n\n            current.ratio = current.ratio.add(report.ratio);\n            current.duration = current.duration.add(report.duration);\n            current.salary = current.salary.add(report.salary);\n\n            totals.ratio = totals.ratio.add(report.ratio);\n            totals.duration = totals.duration.add(report.duration);\n            totals.salary = totals.salary.add(report.salary);\n\n        }\n\n        return {\n            entries: Array.from(grouped.values()),\n            totals: totals\n        };\n    }\n\n    aggregateReports() {\n\n        let allReports = [];\n        \n        for ( let allocationUserReportObjects of this.allocationUserReports.values() ) {\n            allReports = [\n                ...allReports,\n                ...allocationUserReportObjects.entries\n            ];\n        }\n\n        this.allocationReports = this.groupReportsByAllocation(allReports);\n\n        this.generateExportLink();\n\n    }\n\n    generateUsersExportLinks() {\n\n        let me = this;\n        this.users.forEach( (user) => {\n            if (me.allocationUserReports.has(user.doc.name)) {\n                me.generateExportLink(user.doc.name);\n            }\n        });\n    }\n\n    generateExportLink(user = null) {\n\n        let me = this;\n        let csvContent = this.month + '\\n' +\n            this.i18n.tr('allocation') + ';' +\n            this.i18n.tr('ratio') + ';' +\n            this.i18n.tr('duration') + ';' +\n            this.i18n.tr('salary') + \n            '\\n'\n        ;\n\n        let reports = this.allocationReports;\n        let fileName = me.month + '.csv';\n        let lnk = document.getElementById('csv-export-link');\n        if (user !== null) {\n            reports = this.allocationUserReports.get(user);\n            fileName = user + \"-\" + me.month + '.csv';\n            lnk = document.getElementById(user + '-csv-export-link');\n        }\n\n        for (let reportIdx in reports.entries) {\n            let report = reports.entries[reportIdx];\n            csvContent += \n                report.allocationName + ';' + \n                report.ratio + ';' + \n                report.duration + ';' + \n                report.salary + \n                '\\n'\n            ;\n        };\n\n        csvContent += \n            ';' + \n            reports.totals.ratio + ';' + \n            reports.totals.duration + ';' + \n            reports.totals.salary +\n            '\\n'\n        ;\n        \n        lnk.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(csvContent));\n        lnk.setAttribute('download', fileName);\n    }\n}","import { inject } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { Router } from 'aurelia-router';\n\n@inject(Router)\nexport class AdminRouter {\n\n    constructor(router) {\n        this.router = router;\n    }\n\n    configureRouter(config) {\n\n        config.map([\n            { \n                route: ['/', 'planning'],\n                name: 'planning',\n                moduleId: './planning',\n                nav: false,\n                title: 'Planning',\n                auth: true\n            },\n            { \n                route: ':month',\n                name: 'panel',\n                moduleId: './admin-panel',\n                nav: false,\n                title: 'Timesheet',\n                auth: true\n            }\n        ]);\n        \n    }\n\n    navigateToRoute(route, params) {\n       this.router.navigate(route);\n    }\n\n}","\nimport { inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { AdminRouter } from './admin-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\n\n@inject(Element, Session, DBService, I18N, AdminRouter)\nexport class Planning {\n\n    constructor(element, session, db, i18n, router) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.router = router;\n    }\n\n    attached() {\n        let me = this;\n        $(this.element).find('.ui.calendar').calendar({\n            type: 'month',\n            inline: true,\n            text: settings.calendar_text,\n            onChange: function(date, text) {\n                let timesheetId = moment(date).format('YYYY-MM');\n                me.router.navigateToRoute('admin/' + timesheetId);\n            }\n        });\n    }\n}","\nimport { BindingEngine, inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { AdminRouter } from './admin-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\nimport {ValidationRules, ValidationController} from 'aurelia-validation';\nimport Decimal from 'decimal';\n\n@inject(Element, Session, DBService, I18N, EventAggregator, BindingEngine, NewInstance.of(ValidationController), AdminRouter)\nexport class UserTimesheet {\n\n    @bindable timesheet = {};\n    @bindable userName;\n    @bindable purposes = new Map();\n    @bindable unallocatedOnly;\n    salary;\n\n    constructor(element, session,db, i18n, ea, bindingEngine, controller, router) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.ea = ea;\n        this.bindingEngine = bindingEngine;\n        this.controller = controller;\n        this.router = router;\n    }\n\n    attached() {\n\n        ValidationRules\n            .ensure('salary').required()\n            .matches(/^[\\d]+[\\.|]?[\\d]*$/).withMessage(this.i18n.tr('error_number'))\n            .on(this.timesheet);\n\n    }\n\n    allocationSelected(dropdown) {\n        let userName = dropdown.element.dataset.username;\n\n        //manually update the entry as binding doesn't seem to work on the internal data array        \n        this.timesheet.entries.forEach( (entry) => {\n            if (entry.id === dropdown.element.dataset.entryid) {\n                entry.allocation = dropdown.selectedEntry;\n            }\n        });\n\n        this.calculateRatios();\n\n        this.saveTimesheet();\n    }\n\n    allocationAdded(dropdown) {\n        //add the newly added entry to all dropdowns on the page\n        $('.user.timesheet dropdown').each( function() {\n            this.au.controller.viewModel.entries = dropdown.entries;\n        })\n    }\n\n    calculateRatios() {\n\n        let totalHours = 0;\n        this.timesheet.entries.forEach( (entry) => totalHours += entry.duration );\n        this.timesheet.entries.forEach( (entry) => {\n            entry.ratio = new Decimal(entry.duration).div(new Decimal(totalHours)).toJSON();\n        });\n\n    }\n\n    saveTimesheet() {\n\n        let errors = this.controller.validate().then( result => {\n\n            if (!result.valid) {\n                return;\n            }\n\n            //save and retrieve the latest revision of the timesheet for that user\n            this.db.save('timesheet-' + this.userName, this.timesheet).then( () => {\n                this.db.get('timesheet-' + this.userName, this.timesheet._id).then( (response) => {\n                    this.timesheet._rev = response._rev;\n                });\n            });\n\n        });\n    }\n\n    openEntry(id) {\n        this.router.navigateToRoute('timesheets/' + this.timesheet._id + '/' + id + '?r=admin/' + this.timesheet._id);\n    }\n}","\nimport { BindingEngine, inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { AdminRouter } from './admin-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\nimport { log } from '../../services/log';\n\n@inject(Element, Session, DBService, I18N, EventAggregator, BindingEngine, AdminRouter)\nexport class UsersTimesheets {\n\n    @bindable month;\n\n    timesheets = new Map();\n    users = new Map();\n    purposes = new Map();\n    unallocatedOnly = true;\n    \n    constructor(element, session,db, i18n, ea, bindingEngine, router) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.ea = ea;\n        this.bindingEngine = bindingEngine;\n        this.router = router;\n    }\n\n    attached() {\n\n        let me = this;\n        $('#showAll').checkbox({\n            onChange: function() {\n                me.unallocatedOnly = !$('#showAll').hasClass('checked');\n            }\n        });\n\n        this.retrieveData();\n\n        this.ea.subscribe('dbsync', response => {\n            if (response.dbName.match(/^timesheet\\-/)) {\n                me.retrieveTimesheets();\n            }\n        });\n    }\n\n    retrieveData() {\n        this.retrieveUsers().then( () => {\n            this.retrievePurposes().then( () => {\n                this.retrieveTimesheets();            \n            });\n        });\n\n    }\n\n    retrieveUsers() {\n        let me = this;\n        \n        return this.db.listUsers().then( response => {\n            console.log(response);\n            response.forEach( (user) => {\n                me.users.set(user.doc.name, user);\n            });\n            return new Promise((resolve) => { resolve(); });\n        }); \n\n    }\n\n    retrievePurposes() {\n        let me = this;\n        return this.db.list('purpose').then( response => {\n\n            if (response) {\n\n                response.forEach(function (purpose) {\n                    me.purposes.set(purpose.id, purpose.doc.name);\n                })               \n            \n            }\n\n            return new Promise((resolve) => { resolve(); });\n        });\n    }\n\n    retrieveTimesheets() {\n        let me = this;\n\n        this.users.forEach(function (user) {\n\n            me.db.get('timesheet-' + user.doc.name,  me.month).then( timesheet => {\n                if (timesheet) {\n                    me.timesheets.set(user.doc.name, timesheet);                                        \n                }\n            }); \n\n        }); \n    }\n}","\nimport { inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { TimesheetsRouter } from './timesheets-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\n\n@inject(Element, Session, DBService, I18N, EventAggregator, TimesheetsRouter)\nexport class MonthlyTimesheet {\n\n    @bindable entity = {};\n    purposes = new Map();\n    interprets = new Map();\n\n    constructor(element, session, db, i18n, ea, router) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.ea = ea;\n        this.router = router;\n    }\n\n    activate(params) {\n        \n        this.timesheetId = params.id;\n\n        this.retrieveData();\n\n        this.ea.subscribe('dbsync', response => {\n            console.log(\"DBSYNC\");\n            me.retrieveData();\n        });\n    }\n\n    retrieveData() {\n        //first load purposes to show names in the list\n        this.listPurposes().then(\n            this.listInterprets().then(\n                this.getTimesheet()\n            )\n        );\n    }\n\n    listPurposes() {\n        let me = this;\n        return this.db.list('purpose').then( response => {\n\n            if (response) {\n\n                response.forEach(function (purpose) {\n                    me.purposes.set(purpose.id, purpose.doc.name);\n                })               \n            \n            }\n\n            return new Promise((resolve) => { resolve(); });\n        });\n    }\n\n    listInterprets() {\n        let me = this;\n        return this.db.list('interpret').then( response => {\n\n            if (response) {\n\n                response.forEach(function (interpret) {\n                    me.interprets.set(interpret.id, interpret.doc.name);\n                })               \n\n            }\n\n            return new Promise((resolve) => { resolve(); });\n        });\n    }\n    \n    getTimesheet() {\n        let me = this;\n        console.log(\"LISTTIMESHEET\");\n        return this.db.get('timesheet-' + this.session.getUser().name,  this.timesheetId).then( response => {\n            console.log(\"RESPONSE\");\n            console.log(response);\n            me.entity = response;\n            return new Promise((resolve) => { resolve(); });\n        }); \n    }\n\n    openEntry(id) {\n        this.router.navigateToRoute('timesheets/' + this.entity._id + '/' + id + '?r=timesheets/' + this.entity._id);\n    }\n}","import { inject } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\n\n@inject(HttpClient)\nexport class PlanningRouter {\n\n   configureRouter(config, router) {\n\n        config.map([\n            { \n                route: ['/'],\n                name: 'planning',\n                moduleId: './planning',\n                nav: false,\n                title: 'Planning',\n                auth: true\n            },\n        ]);\n        this.router = router;\n    }\n\n    navigateToRoute(route, params) {\n       this.router.navigate(route);\n    }\n\n}","\nimport { inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { TimesheetsRouter } from './timesheets-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\n\n@inject(Element, Session, DBService, I18N, TimesheetsRouter)\nexport class Planning {\n\n    constructor(element, session, db, i18n, router) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.router = router;\n    }\n\n    attached() {\n        let me = this;\n        $(this.element).find('.ui.calendar').calendar({\n            type: 'month',\n            inline: true,\n            text: settings.calendar_text,\n            onChange: function(date, text) {\n                let timesheetId = moment(date).format('YYYY-MM');\n                me.router.navigateToRoute('app/timesheets/' + timesheetId);\n            }\n        });\n    }\n}","\nimport { inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { TimesheetsRouter } from './timesheets-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport {ValidationRules, ValidationController} from 'aurelia-validation';\nimport moment from 'moment';\nimport { I18N } from 'aurelia-i18n';\nimport { FlashSuccessMessage } from '../../resources/flash/flash-success-message';\n\n@inject(Element, Session, DBService, I18N, EventAggregator, TimesheetsRouter, NewInstance.of(ValidationController))\nexport class TimesheetEntry {\n\n    @bindable entity = {};\n\n    @bindable create = false;\n    @bindable saveAction;\n\n    constructor(element, session, db, i18n, ea, router, controller) {\n        this.element = element;\n        this.session = session;\n        this.db = db;\n        this.i18n = i18n;\n        this.ea = ea;\n        this.router = router;\n        this.controller = controller;\n    }\n\n    activate(params, routeConfig, navigationInstruction) {\n        console.log(params);\n        console.log(navigationInstruction);\n        if (params.timesheetId && params.entryId) {\n            this.getTimesheetEntry(params.timesheetId, params.entryId)\n        }\n\n        this.redirectTo = navigationInstruction.queryParams.r;\n    }\n\n    attached() {\n        \n        if ( ! this.entity.id ) {\n            this.entity.date = new Date();\n            this.entity.hours = 0;\n            this.entity.minutes = 0;\n            this.entity.interpret_hours = 0;\n            this.entity.interpret_minutes = 0;\n        }\n        this.setDate();\n        this.setupValidation();\n\n    }\n\n    setDate() {\n        let me = this;\n\n        $(this.element).find('.date.ui.calendar').each(function() {\n            $(this).calendar({\n                type: 'date',\n                formatInput: false,\n                text: settings.calendar_text\n            });\n\n            $(this).calendar(\n                'set date',\n                new Date(me.entity.date)\n            );\n        });        \n    }\n\n    setupValidation() {\n\n        ValidationRules.customRule(\n            'timeIsSet',\n            (value, obj) => parseInt(obj.minutes) > 0 || parseInt(value) > 0,\n            this.i18n.tr('time_not_set') \n        );\n\n        let me = this;\n        if (! this.create ) {\n            ValidationRules.customRule(\n                'monthUnchanged',\n                (value, obj) => me.isMonthUnChanged()\n                ,\n                this.i18n.tr('month_changed') \n            );\n\n            ValidationRules\n                .ensure('dateInput').satisfiesRule('monthUnchanged')\n                .ensure('date').satisfiesRule('monthUnchanged')\n                .on(this);\n        }\n\n        ValidationRules\n            .ensure('date').required()      \n            .ensure('purpose').required()\n            .ensure('hours').required()\n                .matches(/^[\\d]+$/).withMessage(this.i18n.tr('error_number'))\n                .then()\n                .satisfiesRule('timeIsSet').when(entry => parseInt(entry.minutes) === 0)\n            .ensure('minutes').required().matches(/^[\\d]+$/).withMessage(this.i18n.tr('error_number'))\n            .ensure('interpret_hours').matches(/^[\\d]*$/).withMessage(this.i18n.tr('error_number'))\n            .ensure('interpret_minutes').matches(/^[\\d]*$/).withMessage(this.i18n.tr('error_number'))\n            .on(this.entity);\n    }\n\n    isMonthUnChanged() {\n        return this.entity.date === null || this.entity.date === undefined || \n            new Date(this.entity.date).getMonth() === \n            this.getCalendarDate().getMonth()\n        ;\n    }\n\n    getCalendarDate() {\n        return new Date($(this.element).find('.date.ui.calendar').calendar('get date'));\n    }\n\n    getTimesheetEntry(timesheetId, entryId) {\n        let me = this;\n\n        return this.db.get('timesheet-' + this.session.getUser().name,  timesheetId).then( response => {\n            \n            response.entries.forEach(function(entry) {\n                if (entry.id === entryId) {\n                    me.entity = entry;\n                }\n            });\n\n            me.setDate();\n            return new Promise((resolve) => { resolve(); });\n        }); \n    }\n\n    doCreate(event) {\n\n        let errors = this.controller.validate().then( result => {\n\n            if (!result.valid) {\n                return;\n            }\n\n            this.entity.date = this.getCalendarDate();\n\n            if (this.create) {\n                this.entity.id = this.entity.purpose + ':' + Date.now();\n            }\n\n            this.entity.duration = parseInt(this.entity.hours) + parseFloat(parseInt(this.entity.minutes)/60);\n            this.entity.interpret_duration = parseInt(this.entity.interpret_hours) + parseFloat(parseInt(this.entity.interpret_minutes)/60);\n\n            console.log(\"SAVING ENTRY\");\n            console.log(this.entity);\n\n            let timesheetId = moment(this.entity.date).format('YYYY-MM');\n            console.log(timesheetId);\n            \n            //get the timesheet document\n            this.db.get('timesheet-' + this.session.getUser().name, timesheetId).then( timesheet => {\n\n                console.log(timesheet);\n\n                if (! timesheet ) {\n                    console.log(\"CREATENEWTIMESHEET\");\n                    timesheet = {\n                        _id: timesheetId,\n                        entries: []\n                    }\n                }\n                \n                //if entry already exists, remove it first\n                let entry = this.entity;\n                timesheet.entries.slice().reverse().forEach(function(item, index, object) {\n                    if (item.id === entry.id) {\n                        timesheet.entries.splice(object.length - 1 - index, 1);\n                    }\n                });\n\n                timesheet.entries = [\n                    this.entity,\n                    ...timesheet.entries\n                ];\n\n                console.log(timesheet);\n\n                this.db.save('timesheet-' + this.session.getUser().name, timesheet).then( () =>\n                    this.ea.publish(new FlashSuccessMessage(this.i18n.tr('success')))\n                );\n            \n                if (this.create) {\n                    this.entity = {\n                        purpose: this.entity.purpose,\n                        hours: 0,\n                        minutes: 0,\n                        interpret_hours: 0,\n                        interpret_minutes: 0\n                    };\n                }\n\n                if (this.saveAction) {\n                    this.saveAction({ entity: this.entity});\n                }\n\n                if (this.redirectTo) {\n                    this.router.navigateToRoute(this.redirectTo);\n                }\n            });\n            \n        });\n        console.log(errors);\n        \n    }\n}","import { inject } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { Router } from 'aurelia-router';\n\n@inject(Router)\nexport class TimesheetsRouter {\n\n    constructor(router) {\n        this.router = router;\n    }\n\n    configureRouter(config) {\n\n        config.map([\n            { \n                route: ['/'],\n                name: 'list',\n                moduleId: './timesheets',\n                nav: false,\n                title: 'List',\n                auth: true\n            },\n            { \n                route: [':id'],\n                name: 'timesheet',\n                moduleId: './monthly-timesheet',\n                nav: false,\n                title: 'Timesheet',\n                auth: true\n            },\n            { \n                route: ':timesheetId/:entryId',\n                name: 'timesheetEntry',\n                moduleId: './timesheet-entry',\n                nav: false,\n                title: 'Timesheet',\n                auth: true\n            }\n        ]);\n        \n    }\n\n    navigateToRoute(route, params) {\n       this.router.navigate(route);\n    }\n\n}","import { inject, NewInstance, bindable, observable } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { ValidationController } from 'aurelia-validation';\nimport { TimesheetsRouter } from './timesheets-router';\nimport { Session } from '../../services/session';\nimport { DBService } from '../../services/db-service';\nimport settings from '../../config/app-settings';\nimport moment from 'moment';\nimport { FlashSuccessMessage } from '../../resources/flash/flash-success-message';\nimport { I18N } from 'aurelia-i18n';\nimport { log } from '../../services/log';\n\n@inject(Session, DBService, EventAggregator, I18N)\nexport class Timesheets {\n\n    purposes = new Map();\n    lastTimesheet = {\n        doc: {\n            entries: []\n        }\n    };\n    \n    constructor(session, db, ea, i18n) {\n        this.session = session;\n        this.db = db;\n        this.ea = ea;\n        this.i18n = i18n;\n    }\n\n    activate(params) {\n        console.log(\"ACTIVATE\");\n        let me = this;        \n\n        this.retrieveData();\n\n        this.ea.subscribe('dbsync', response => {\n            console.log(\"DBSYNC\");\n            me.retrieveData();\n        });\n    }\n    \n    retrieveData() {\n        //first load purposes to show names in the list\n        this.listPurposes().then( response => {\n            this.getLastTimesheet();\n        });\n    }\n\n    listPurposes() {\n        let me = this;\n        return this.db.list('purpose').then( response => {\n\n            if (response) {\n\n                response.forEach(function (purpose) {\n                    me.purposes.set(purpose.id, purpose.doc.name);\n                })               \n            \n            }\n\n            return new Promise((resolve) => { resolve(); });\n        });\n    }\n\n    getLastTimesheet() {\n        let me = this;\n        console.log(\"LISTTIMESHEET\");\n        return this.db.list('timesheet-' + this.session.getUser().name, 1, true).then( response => {\n            log.debug(\"RESPONSE\");\n            log.debug(response);\n\n            me.lastTimesheet = {\n                doc: {\n                    entries: []\n                }\n            };\n            \n            if (response.length > 0) {\n                me.lastTimesheet = response[0];\n            }\n            log.debug(me.lastTimesheet);\n            return new Promise((resolve) => { resolve(); });\n        }); \n    }\n\n    attached() {\n        $('.ui.accordion')\n           .accordion({\n               exclusive: true\n           })\n        ;\n    }\n\n    saveEntry(entry) {\n        console.log(\"SAVVVVVVVVVV\");\n        console.log(entry);\n        \n        this.getLastTimesheet();\n    }\n\n    edit($event, entity) {\n        this.editing = entity;\n    }\n\n    cancel() {\n        this.editing = { id: -1 };\n        this.creating = false;\n    }\n\n    create() {\n        this.creating = true;\n    }\n}","import { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { Session } from '../../services/session'\n\n@inject(Session, Router) \nexport class LoggedRedirect\n{\n    constructor(session, router) {\n        this.session = session;\n        this.router = router;\n    }\n\n    activate() {\n        let router = this.router;\n        console.log(\"activate\");\n        this.session.start()\n        .then(() => {\n            console.log(\"NAV\");\n            router.navigate('app/timesheets');\n        })\n        .catch (function (err) {\n            console.log(err);\n        });\n    }\n}","import {inject} from 'aurelia-framework';\nimport {AuthService} from 'aurelia-auth';\nimport {Router} from 'aurelia-router';\nimport {Session} from '../../services/session';\nimport settings from '../../config/app-settings';\nimport PouchDB from 'pouchdb';\nimport PouchDBAuthentication from 'pouchdb-authentication';\n\n@inject(AuthService, Router, Session)\n\nexport class Login {\n\n    constructor(auth, router, session){\n        this.auth = auth;\n        this.router = router;\n        this.session = session;\n        this.settings = settings;\n    };\n    \n    login() {\n\n        let login = this;\n        \n        PouchDB.plugin(PouchDBAuthentication);\n\n        let db = new PouchDB('https://proacti.cloudant.com/timesheet-jerome', { skipSetup: true });\n        db.login( this.username, this.password, function (err, response)  {\n\n            console.log(\"RESPONSE:\");\n            console.log(response);\n            if (err) {\n                login.loginError = err.name;\n                $('.ui.form .login.error.message').show();\n                return;\n            }\n\n            localStorage.setItem('aurelia_token', btoa(login.username + ':' + login.password));\n            login.router.navigate('loggedIn');\n        });\n    };\n\n}","import { inject, NewInstance, bindable, containerless } from 'aurelia-framework';\nimport { HttpClient, json } from 'aurelia-fetch-client';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { ValidationRules, ValidationController } from 'aurelia-validation';\nimport { I18N } from 'aurelia-i18n';\nimport { UserRouter } from './user-router';\nimport { Session } from '../../services/session';\nimport settings from '../../config/app-settings';\nimport { FlashSuccessMessage } from '../../resources/flash/flash-success-message';\n\n@inject(Element, Session, I18N, HttpClient, UserRouter, EventAggregator, NewInstance.of(ValidationController))\nexport class Password {   \n\n    form = {};\n\n    constructor(element, session, i18n, http, router, ea, controller) {        \n        this.element = element;\n        this.session = session;\n        this.i18n = i18n;\n        this.http = http;\n        this.router = router;\n        this.ea = ea;\n        this.controller = controller;\n\n        this.form = {\n            current_password: null,\n            plain_password: {\n                first: null,\n                second: null\n            }\n        };\n    }\n    \n    activate() {\n\n        this.rules = ValidationRules\n            .ensure('current_password').required({ message: \"required\" })\n            .on(this.form)\n        ; \n\n        this.newrules = ValidationRules\n            .ensure('first').required().length({ minimum: 6 })\n            .ensure('second').required()\n            .ensure('first').equality('second')\n            .on(this.form.plain_password)\n        ;        \n    }\n\n    save(event) {\n\n        let errors = this.controller.validate();\n\n        if (errors.length > 0) {\n            return;\n        }\n\n        $(event.target).addClass('loading');\n\n        return this\n            .http.fetch(\n                'users/' + this.session.user.id + '/password',\n                {\n                    method: 'PUT',\n                    body: json(this.form)\n                }\n            )\n            .then(response => {\n                \n                $(event.target).removeClass('loading');\n\n                if (response instanceof Error) {\n                    Promise.reject(response);\n                    return response;\n                }\n\n                this.ea.publish(new FlashSuccessMessage(this.i18n.tr('success')));\n                this.form = {\n                    current_password: null,\n                    plain_password: {\n                        first: null,\n                        second: null\n                    }\n                };\n                return new Promise((resolve) => { resolve(); });\n            })\n            .catch( () => {} )\n        ;\n    }\n}\n\n","import { inject } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-fetch-client';\n\n@inject(HttpClient)\nexport class UserRouter {\n\n   configureRouter(config, router) {\n\n        config.map([\n            { \n                route: ['/password'],\n                name: 'password',\n                moduleId: './password',\n                nav: true,\n                title: 'user:change_password',\n                settings: { 'icon': 'unlock' }\n            }\n        ]);\n        this.router = router;\n    }\n\n    navigateToRoute(route, params) {\n       this.router.navigate(route);\n    }\n\n}","import { inject } from 'aurelia-framework';\nimport { DialogController } from 'aurelia-dialog';\n\n@inject(DialogController)\nexport class Confirmation {\n\n    constructor(dialogController) {\n        this.dialogController = dialogController;\n    }\n\n    activate(data) {\n        this.message = data;\n    }\n}","import {bindable, inject} from 'aurelia-framework';\nimport {DialogService} from \"aurelia-dialog\";\nimport {Confirmation} from \"./confirmation\";\n\n@inject(DialogService)\nexport class DeleteButton extends BaseViewModel {\n\n    @bindable action=()=>{};\n\n    @bindable message = \"Are you sure ?\";\n\n    constructor(dialogService, ...rest) {\n        super(...rest);\n        this.dialogService = dialogService;\n        this.message = this.i18n.tr('delete_sure');\n    }\n\n    do($event) {\n        $event.stopPropagation();\n        this.dialogService.open({\n            viewModel: Confirmation,\n            model: this.message\n        }).then(result => {\n            if (result.wasCancelled) return;\n            this.action();\n        });\n    }\n\n}","\"use strict\";\n\nimport {inject, bindable, customAttribute} from 'aurelia-framework';\n\n@customAttribute( `ui-confirmation` )\n@inject( Element )\nexport class UIConfirmationAttribute {\n\n    @bindable approveCallback;\n\n    constructor( element ) {\n        alert(element);\n\t\tthis.element = element;\n\t}\n\n\tattached() {\n\t\t$( this.element ).modal({\n            onApprove: function(element) {\n                return function () {\n                    let confirmEvent = new CustomEvent('confirm', {\n                        detail: {\n                            value: 1\n                        },\n                        bubbles: true\n                    });\n                    element.dispatchEvent(confirmEvent);\n                }\n            }(this.element)\n        });\n\t}\n\n    activeChanged( newValue ) {\n\t\tif ( newValue ) {\n\t\t\t$( this.element ).modal( 'show' );\n\t\t} else {\n\t\t\t$( this.element ).modal( 'hide' );\n\t\t}\n\t}\n\n    bind($arg) {\n        this.approveCallback = $arg.approveCallback;\n    }    \n}","import { bindable, customElement, inject, TaskQueue } from 'aurelia-framework';\nimport { DBService } from '../../services/db-service';\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@customElement('dropdown')\n@inject(Element, DBService, EventAggregator)\nexport class DropDownCustomElement {\n\n    @bindable entries;\n    @bindable selectedEntry;\n    @bindable parentId;\n    @bindable route;\n    @bindable parentRoute;\n    @bindable name;\n    @bindable required = false;\n    @bindable multiple = false;\n    @bindable allowAdd = false;\n    @bindable bypassCache = false;\n    @bindable selectAction = () => {};\n    @bindable addAction = () => {};\n    \n    selectedEntryName;\n\n    constructor(element, db, ea) {\n        this.element = element;\n        this.db = db;\n        this.ea = ea;\n    }\n\n    attached() {\n        let dropdown = this;\n        $(this.element).find('.ui.dropdown').dropdown({\n            'forceSelection': false,\n            'allowAdditions': dropdown.allowAdd,\n            'hideAdditions': !dropdown.allowAdd,\n            'onChange': function(value, text, $choice) {\n                if (\n                    typeof $choice !== 'undefined' &&\n                    $($choice[0]).hasClass('addition')\n                ) {\n                    dropdown.save(text);\n                } else {\n                    dropdown.selectedEntry = value;\n                }\n            }\n        });\n        this.load();\n\n        this.ea.subscribe('dbsync', response => {\n            if (response.dbName === dropdown.route) {\n                dropdown.load();\n            }\n        });\n    }\n\n    parentIdChanged(newEntry, oldEntry) {\n        //only == because input field coerces int into string\n        if (newEntry == oldEntry) {\n            return;\n        }\n        if (oldEntry) {\n            this.selectedEntry = undefined;\n        }\n        this.restoreDefaults();\n        this.load();\n    }\n\n    selectedEntryChanged() {\n\n        //leave if the entry is new as this will be re-triggered after the save operation\n        if (this.isSelectedEntryNew()) {\n            return;\n        }\n\n        let selected = $(this.element).find('.dropdown').dropdown('get value');\n\n        if (\n            selected[0] !== null && \n            (\n                this.selectedEntry === undefined || \n                this.selectedEntry === '' ||\n                this.selectedEntry === []\n            )\n        ) {\n            $(this.element).find('.dropdown').dropdown('clear');\n        }\n        this.setEntryName();\n\n        this.selectAction({ dropdown: this});\n\n    }\n\n    isSelectedEntryNew() {\n        if (this.entries === null) {\n            return true;\n        }\n\n        let me = this;\n        let isNew = true;\n        this.entries.forEach( (entry) => {\n            if (entry.id === me.selectedEntry) {\n                isNew = false;\n            }\n        });\n\n        return isNew;\n    }\n\n    restoreDefaults() {\n        $(this.element).find('.text')\n            .addClass('default');\n        this.selectedEntryName = this.getPlaceHolder();\n    }\n\n    getPlaceHolder() {\n        return $(this.element).find('.text').data('default');\n    }\n\n    setEntryName() {\n        if (this.multiple) {\n            return;\n        }\n\n        if (! this.entries) {\n            return;\n        }\n\n        for (let entry of this.entries) {\n            if (entry.id == this.selectedEntry) {\n                this.selectedEntryName = entry.doc.name;\n            }            \n        }\n\n        if (\n            this.selectedEntryName &&\n            this.selectedEntryName != this.getPlaceHolder()\n        ) {\n            $(this.element).find('.text')\n            .removeClass('default');\n        } else {\n            this.restoreDefaults();\n        }\n    }\n\n    load() {\n\n        this.db.list(this.route).then(\n            entries => {\n\n            this.entries = entries;\n\n            if (\n                this.entries &&\n                this.required &&\n                (this.selectedEntry === undefined || this.selectedEntry === '') &&\n                this.entries.length > 0\n            ) {\n                this.selectedEntry = this.entries[0].id;\n            }\n\n            this.setEntryName();\n        });\n                   \n    }\n\n    save(newEntry) {\n        let doc = {\n            name: newEntry\n        };\nconsole.log(this);\n        let me = this;\n        this.db.create(this.route, doc).then(\n            response => {\n                doc._id = response.id;\n                me.entries = [\n                    {id: response.id, doc : doc},\n                    ...me.entries\n                ];\n                me.selectedEntry = doc._id;\n                $(me.element).find('.dropdown').dropdown('set value', doc._id);\n                console.log(me);\n                me.addAction({ dropdown: me });\n            }\n        )\n    }\n}","import {inject, customAttribute} from 'aurelia-framework';\nimport {CssAnimator} from 'aurelia-animator-css';\n\n@customAttribute('animateonchange')\n@inject(Element, CssAnimator)\nexport class AnimateOnChangeCustomAttribute {\n\n    constructor(element, animator) {\n        this.element = element;\n        this.animator = animator;\n        this.initialValueSet = false;\n    }\n\n    valueChanged(newValue){\n        if (this.initialValueSet) {\n            this.animator.addClass(this.element, 'background-animation').then(() => {\n                this.animator.removeClass(this.element, 'background-animation');\n            });\n        }\n        this.initialValueSet = true;\n    }\n}","import { FlashMessage } from './flash-message';\n\nexport class FlashErrorMessage extends FlashMessage {\n    constructor(message) {\n        super(message);\n    }\n}","export class FlashMessage {\n    constructor(message) {\n        this.message = message;\n    }\n}","import { FlashMessage } from './flash-message';\n\nexport class FlashSuccessMessage extends FlashMessage {\n    constructor(message) {\n        super(message);\n    }\n}","import {bindable, inject} from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport {CssAnimator} from 'aurelia-animator-css';\nimport { FlashMessage } from './flash-message';\nimport { FlashSuccessMessage } from './flash-success-message';\nimport { FlashErrorMessage } from './flash-error-message';\n\n@inject(Element, EventAggregator, CssAnimator)\nexport class Flash {\n    \n    message = '';\n\n    constructor(element, eventAggregator, cssAnimator) {\n        this.element = element;\n        this.ea = eventAggregator;\n        this.animator = cssAnimator;        \n    }\n\n    attached() {\n        let messageElement = this.element.querySelectorAll('.message')[0];\n        this.subscriber = this.ea.subscribe(\n            FlashMessage, event => {\n\n                this.message = event.message;\n\n                $(messageElement).removeClass('positive');\n                $(messageElement).removeClass('negative');\n                $(messageElement).removeClass('background-animation-add');\n                $(messageElement).removeClass('background-animation-remove');\n                \n                let flashType = 'positive';\n                if (event instanceof FlashErrorMessage) {\n                    flashType = 'negative';\n                } \n\n                window.scrollTo(0, 0);\n                this.animator.addClass(\n                    messageElement, \n                    flashType\n                )\n                .then(() => {\n                    this.animator.addClass(\n                        messageElement, \n                        'background-animation'\n                    )\n                    .then(() => {\n                        this.animator.removeClass(messageElement, 'background-animation');\n                        this.animator.removeClass(messageElement, flashType);\n                    });\n                })\n            }\n        );        \n    }\n\n    detached() {\n        this.subscriber.dispose();\n    }\n}","export class JoinValueConverter {\n    toView(value) {\n        if (\n            value === undefined ||\n            !Array.isArray(value)\n        ) {\n            return '';\n        }\n        return value.join(', ');\n    }\n}","import moment from 'moment';\n\nexport class DateFormatValueConverter {\n    toView(value) {    \n        return moment(value).format('D-MMM-YYYY');\n    }\n}","export class EmailValueConverter {\n    toView(value) {\n        let html = '';\n        if (\n            value === undefined ||\n            !Array.isArray(value)\n        ) {\n            return html;\n        }\n        value.forEach(function(mail) {\n            html += '<a href=\"mailto: ' + mail + '\">' + mail + '</a> '; \n        });\n    \n        return html;\n    }\n}","export class LimitToValueConverter {\n    toView(array, count) {\n        if (array == null || array === undefined) {\n            return [];\n        }\n        return array.slice(0, count);\n    }\n}","import moment from 'moment';\n\nexport class MonthFormatValueConverter {\n    toView(value) {    \n        return moment(value).format('MMMM YYYY');\n    }\n}","import settings from '../../config/app-settings';\n\nexport class RemoteUrlValueConverter {\n    toView(value) {\n        return settings.rootUrl + '/' + value;\n    }\n}","export class TelValueConverter {\n    toView(value) {\n        let html = '';\n        if (\n            value === undefined ||\n            !Array.isArray(value)\n        ) {\n            return html;\n        }\n        value.forEach(function(tel) {\n            html += '<a href=\"tel: ' + tel + '\">' + tel + '</a> '; \n        });\n    \n        return html;\n    }\n}","export class TruncateValueConverter {\n    toView(value, length) {\n        \n        if (value === null || value === undefined || value.length <= length) {\n            return value;\n        }\n        \n        return value.substring(0, length) + '...';\n    }\n}","export class Pagination {\n\n    constructor(currentPage, itemsPerPage, totalCount, items) {\n        this.currentPage = currentPage;\n        this.itemsPerPage = itemsPerPage;\n        this.totalCount = totalCount;        \n        this.items = items;\n        \n        this.setNumberPages();\n        this.setVisiblePages();\n    }\n\n    setNumberPages() {\n        this.numberPages = Math.ceil(this.totalCount/this.itemsPerPage);\n    }\n\n    setVisiblePages() {\n        const NBR_START = 2;\n        const NBR_END = 2;\n        const NBR_PAGES = 10;\n        const NBR_DISABLED = 2;\n        const NBR_VISIBLE = 7;\n\n        if (this.numberPages <= NBR_PAGES) {\n            this.visiblePages = this.numberPages;\n            return;\n        }\n\n        //always show first and last pages\n        this.startPages = NBR_START;\n        this.endPages = Array\n            .apply(null, Array(NBR_END))\n            .map((v,i)=>this.numberPages - i - 1)\n            .reverse();\n\n        //show some pages before and some pages after the current\n        let visibleRangeStart = Math.max(\n            NBR_START,\n            this.currentPage - (NBR_VISIBLE - 1)/2\n        );\n        let visibleRangeEnd = Math.max(\n            NBR_VISIBLE,\n            this.currentPage + 1 + (NBR_VISIBLE - 1)/2\n        );\n\n        let nbrVisiblePages = NBR_VISIBLE - NBR_START;\n\n        //if we start after the first pages, add some disabled marker\n        if (\n            visibleRangeStart > NBR_START\n        ) {\n            this.firstDisabledPages = NBR_DISABLED;\n        }\n\n        if (visibleRangeEnd > this.numberPages) {\n            //if we reached the end, show more previous pages\n            visibleRangeStart = this.numberPages - NBR_VISIBLE;\n        } else {\n            //if we stop before the last pages, add more disabled marker\n            this.lastDisabledPages = NBR_DISABLED;\n        }\n\n        this.visiblePages = \n            Array\n            .apply(null, Array(nbrVisiblePages))\n            .map((v,i)=>i+visibleRangeStart);\n\n    }\n}","import {bindable, inject} from 'aurelia-framework';\nimport {DialogService} from \"aurelia-dialog\";\n\nexport class Paginator {\n\n    @bindable pagination;\n    @bindable action=()=>{};\n    @bindable hasLoadMore;\n\n    paginate(page) {\n        this.action({ params: {\n            \"page\": (page === undefined) ? this.pagination.currentPage : page, \n            \"limit\": this.pagination.itemsPerPage\n        }});\n    }\n\n    loadMore() {\n        this.action({ params: {\n            \"page\": (parseInt(this.pagination.currentPage) + 1), \n            \"limit\": this.pagination.itemsPerPage\n        }});        \n    }\n}"],"sourceRoot":"../src"}