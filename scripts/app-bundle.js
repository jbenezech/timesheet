define("app",["exports","aurelia-fetch-client","aurelia-framework","aurelia-i18n","aurelia-auth"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var a,s;e.App=(a=(0,n.inject)(i.I18N,t.HttpClient),a(s=function(){function e(t,n){o(this,e),this.i18n=t,this.httpClient=n}return e.prototype.activate=function(){this.i18n;this.httpClient.configure(function(e){e.useStandardConfiguration().withDefaults({credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"Fetch"}}).withInterceptor({request:function(e){return e},response:function(e){return e},responseError:function(e){return console.log(e),new Error(e.statusText)}}).withInterceptor({request:function(e){return e.headers.append("Authorization","Basic "+localStorage.getItem("aurelia_token")),e}})})},e.prototype.configureRouter=function(e,t){e.title="Ruelle",e.addPipelineStep("authorize",r.AuthorizeStep);var n={route:["app"],name:"home",moduleId:"components/user-app-router",nav:!1,auth:!0},i={route:["loggedIn"],name:"Logged",moduleId:"pages/user/logged-redirect",nav:!1,title:"Logged",auth:!0};e.map([{route:["login"],name:"login",moduleId:"pages/user/login",nav:!1,title:"Login",authRoute:!0},{route:"",redirect:"loggedIn"}].concat(n,i)),this.router=t},e}())||s)}),define("blur-image",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,i,o,a){if(!(isNaN(a)||a<1)){a|=0;var s,c=e.getContext("2d");try{s=c.getImageData(t,n,i,o)}catch(e){throw new Error("unable to access image data: "+e)}var d,p,h,f,g,v,m,_,y,b,w,x,C,O,k,P,j,S,M,E,T,A,R,I,B=s.data,D=a+a+1,z=i-1,$=o-1,V=a+1,U=V*(V+1)/2,N=new r,L=N;for(h=1;h<D;h++)if(L=L.next=new r,h==V)var q=L;L.next=N;var F=null,H=null;m=v=0;var W=u[a],K=l[a];for(p=0;p<o;p++){for(P=j=S=M=_=y=b=w=0,x=V*(E=B[v]),C=V*(T=B[v+1]),O=V*(A=B[v+2]),k=V*(R=B[v+3]),_+=U*E,y+=U*T,b+=U*A,w+=U*R,L=N,h=0;h<V;h++)L.r=E,L.g=T,L.b=A,L.a=R,L=L.next;for(h=1;h<V;h++)f=v+((z<h?z:h)<<2),_+=(L.r=E=B[f])*(I=V-h),y+=(L.g=T=B[f+1])*I,b+=(L.b=A=B[f+2])*I,w+=(L.a=R=B[f+3])*I,P+=E,j+=T,S+=A,M+=R,L=L.next;for(F=N,H=q,d=0;d<i;d++)B[v+3]=R=w*W>>K,0!=R?(R=255/R,B[v]=(_*W>>K)*R,B[v+1]=(y*W>>K)*R,B[v+2]=(b*W>>K)*R):B[v]=B[v+1]=B[v+2]=0,_-=x,y-=C,b-=O,w-=k,x-=F.r,C-=F.g,O-=F.b,k-=F.a,f=m+((f=d+a+1)<z?f:z)<<2,P+=F.r=B[f],j+=F.g=B[f+1],S+=F.b=B[f+2],M+=F.a=B[f+3],_+=P,y+=j,b+=S,w+=M,F=F.next,x+=E=H.r,C+=T=H.g,O+=A=H.b,k+=R=H.a,P-=E,j-=T,S-=A,M-=R,H=H.next,v+=4;m+=i}for(d=0;d<i;d++){for(j=S=M=P=y=b=w=_=0,v=d<<2,x=V*(E=B[v]),C=V*(T=B[v+1]),O=V*(A=B[v+2]),k=V*(R=B[v+3]),_+=U*E,y+=U*T,b+=U*A,w+=U*R,L=N,h=0;h<V;h++)L.r=E,L.g=T,L.b=A,L.a=R,L=L.next;for(g=i,h=1;h<=a;h++)v=g+d<<2,_+=(L.r=E=B[v])*(I=V-h),y+=(L.g=T=B[v+1])*I,b+=(L.b=A=B[v+2])*I,w+=(L.a=R=B[v+3])*I,P+=E,j+=T,S+=A,M+=R,L=L.next,h<$&&(g+=i);for(v=d,F=N,H=q,p=0;p<o;p++)f=v<<2,B[f+3]=R=w*W>>K,R>0?(R=255/R,B[f]=(_*W>>K)*R,B[f+1]=(y*W>>K)*R,B[f+2]=(b*W>>K)*R):B[f]=B[f+1]=B[f+2]=0,_-=x,y-=C,b-=O,w-=k,x-=F.r,C-=F.g,O-=F.b,k-=F.a,f=d+((f=p+V)<$?f:$)*i<<2,_+=P+=F.r=B[f],y+=j+=F.g=B[f+1],b+=S+=F.b=B[f+2],w+=M+=F.a=B[f+3],F=F.next,x+=E=H.r,C+=T=H.g,O+=A=H.b,k+=R=H.a,P-=E,j-=T,S-=A,M-=R,H=H.next,v+=i}c.putImageData(s,t,n)}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function o(e,t){var n=e.width,r=e.height,o=e.getContext("2d");o.drawImage(t,0,0,n,r),i(e,0,0,n,r,c)}Object.defineProperty(e,"__esModule",{value:!0}),e.BlurImageCustomAttribute=void 0;var a,s,u=(e.BlurImageCustomAttribute=(a=(0,t.inject)(Element),a(s=function(){function e(t){n(this,e),this.element=t}return e.prototype.valueChanged=function(e){var t=this;e.complete?o(this.element,e):e.onload=function(){return o(t.element,e)}},e}())||s),[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259]),l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],c=40}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1,remoteUrls:["https://ruelle.cloudant.com/"]}}),define("main",["exports","aurelia-fetch-client","aurelia-event-aggregator","aurelia-i18n","i18next-xhr-backend","semantic","semantic-calendar/calendar","aurelia-framework","aurelia-logging-console","lib/form/semantic-form-validation-renderer","./config/app-settings"],function(e,t,n,i,r,o,a,s,u,l,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e){Promise.config({longStackTraces:!1,warnings:!1}),e.use.standardConfiguration().developmentLogging().plugin("aurelia-dialog").plugin("aurelia-validation").plugin("aurelia-i18n",function(e){return e.i18next.use(f.default),e.i18next.options.load="currentOnly",e.i18next.options.lowerCaseLng=!1,e.i18next.options.cleanCode=!1,e.setup({resGetPath:"locales/__lng__/__ns__.json",lngs:["fr-FR"],fallbackLng:g.default.default_locale,debug:g.default.debug,ns:["translation"],defaultNs:"translation"})}),h(e.container),e.start().then(function(){e.setRoot()})}function h(e){var n=new t.HttpClient;e.registerInstance(t.HttpClient,n),e.registerHandler("semantic-form",function(e){return e.get(l.SemanticFormValidationRenderer)})}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=p;var f=d(r),g=(d(o),d(a),d(c));s.LogManager.addAppender(new u.ConsoleAppender),s.LogManager.setLevel(s.LogManager.logLevel.debug)}),define("components/top-bar",["exports","aurelia-framework","aurelia-i18n","aurelia-dialog","aurelia-event-aggregator","../resources/confirmation/confirmation","../services/db-service","../services/session","../config/app-settings","../environment","../services/log"],function(e,t,n,i,r,o,a,s,u,l,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TopBar=void 0;var h,f,g=(d(u),d(l)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.TopBar=(h=(0,t.inject)(s.Session,n.I18N,a.DBService,i.DialogService,r.EventAggregator),h(f=function(){function e(t,n,i,r,o){p(this,e),this.error=!1,this.session=t,this.i18n=n,this.db=i,this.dialogService=r,this.ea=o}return e.prototype.logout=function(){var e=this;return this.db.hasUnsyncedUpdate()?void this.dialogService.open({viewModel:o.Confirmation,model:this.i18n.tr("unsync-warning")}).then(function(t){t.wasCancelled||e.clearData()}):void this.clearData()},e.prototype.clearData=function(){var e=this;this.db.removeDBs().then(function(){return e.session.invalidate()})},e.prototype.attached=function(){var e=this;this.ea.subscribe("dberr",function(t){c.log.error(t),e.error=!0})},e.prototype.navigateToPlanning=function(){this.navigate("app/timesheets/planning")},e.prototype.wipeAll=function(){this.db.removeDBs()},v(e,[{key:"isTest",get:function(){return g.default.testing}},{key:"isAdmin",get:function(){return this.session.isGranted("admin")}},{key:"isSynced",get:function(){return!this.db.hasUnsyncedUpdate()}}]),e}())||f)}),define("components/user-app-router",["exports","aurelia-framework","aurelia-i18n","../services/session","../config/app-settings"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.UserAppRouter=void 0;var s,u;o(r),e.UserAppRouter=(s=(0,t.inject)(i.Session,n.I18N),s(u=function(){function e(t,n){a(this,e),this.session=t,this.i18n=n,this.session.isStarted()||this.session.start()}return e.prototype.configureRouter=function(e,t){var n={route:["timesheets"],name:"timesheets",moduleId:"pages/timesheets/timesheets-router",nav:!0,auth:!0},i={route:["planning"],name:"planning",moduleId:"pages/timesheets/planning-router",nav:!0,auth:!0},r={route:["admin"],name:"admin-planning",moduleId:"pages/admin/admin-router",nav:!0,auth:!0},o={route:["user"],name:"user",moduleId:"pages/user/user-router",nav:!1,auth:!0},a={route:["user"],name:"user",moduleId:"pages/user/user-router",nav:!1,auth:!0},s=[n,i,r,o,a];e.map(s),this.router=t},e}())||u)}),define("config/app-settings",["exports","../environment"],function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),r={remoteUrls:i.default.remoteUrls,default_locale:"fr-FR",debug:!0,calendar_text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"}};e.default=r}),define("services/accounting-service",["exports","aurelia-framework","pouchdb","moment","decimal","./log","./db-service"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AccountingService=void 0;var l,c,d,p=(s(n),s(i),s(r));e.AccountingService=(l=(0,t.inject)(a.DBService),c=(0,t.singleton)(),l(d=c(d=function(){function e(t){u(this,e),this.rules=new Map,this.db=t}return e.prototype.retrieveRules=function(e){var t=this;if(void 0!==e)return this.db.view("accounting","accounting/rules",e,"",!1,!0,1).then(function(e){var n=e[0];t.rules.set(n.key,{charges:new p.default(n.value[0]),provision_cp_brut:new p.default(n.value[1]),provision_cp_charges:new p.default(n.value[2]),prime_precarite_brut:new p.default(n.value[3]),net_payable:new p.default(n.value[4]),urssaf:new p.default(n.value[5])})})},e.prototype.provisionAccounts=function(e,t){var n=this;return this.rules.has(e)?new Promise(function(i){return i(n.doProvision(n.rules.get(e),t))}):this.retrieveRules(e).then(function(){return n.doProvision(n.rules.get(e),t)})},e.prototype.doProvision=function(e,t){var n={salary:t.salary,charges:t.salary.mul(e.charges),provisionCPBrut:t.salary.mul(e.provision_cp_brut),netPayable:t.salary.mul(e.net_payable),urssaf:t.salary.mul(e.urssaf)};return n.provisionCPCharges=n.charges.mul(e.provision_cp_charges),n.provisionCP=n.provisionCPBrut.add(n.provisionCPCharges),t.precarite?(n.primePrecariteBrut=t.salary.mul(e.prime_precarite_brut),n.primePrecariteCharges=n.primePrecariteBrut.mul(e.provision_cp_charges),n.provisionPrecarite=n.primePrecariteBrut.add(n.primePrecariteCharges)):(n.primePrecariteBrut=new p.default(0),n.primePrecariteCharges=new p.default(0),n.provisionPrecarite=new p.default(0)),t.accounts=n,t},e}())||d)||d)}),define("services/db-service",["exports","aurelia-framework","./session","pouchdb","pouchdb-upsert","moment","aurelia-event-aggregator","aurelia-fetch-client","./log","../config/app-settings","./sharding-service","../environment"],function(e,t,n,i,r,o,a,s,u,l,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DBService=void 0;var f,g,v,m=p(i),_=p(r),y=(p(o),p(l),p(d));e.DBService=(f=(0,t.inject)(n.Session,c.ShardingService,s.HttpClient,a.EventAggregator),g=(0,t.singleton)(),f(v=g(v=function(){function e(t,n,i,r){h(this,e),this.dbs=new Map,this.syncHandlers=new Map,this.lastUpdates=new Map,this.lastSyncs=new Map,this.liveReplicates=["^accounting$","^allocation$","^interpret$","^purpose$","^timesheet-{0}$"],this.session=t,this.sharding=n,this.http=i,this.ea=r,this.restoreCheckpoints(),m.default.plugin(_.default)}return e.prototype.getDB=function(e){if(!this.dbs.has(e)){var t=this.setupDB(e);this.dbs.set(e,t)}return this.dbs.get(e)},e.prototype.setupDB=function(e){var t=this,n=new m.default(e,{skip_setup:!0});if(y.default.testing)return n;this.addUpdateCheckpoint(e);var i=n.sync(this.sharding.getRemoteUrl()+e,t.getSyncOptions(e)).on("change",function(n){t.addSyncCheckpoint(e),"pull"===n.direction&&t.ea.publish("dbsync",{dbName:e})}).on("paused",function(n){t.addSyncCheckpoint(e)}).on("error",function(e){t.handleSyncError(n,e)});return this.syncHandlers.set(e,i),n},e.prototype.isLiveReplicate=function(e){for(var t=atob(localStorage.getItem("aurelia_token")).split(":")[0],n=this.liveReplicates,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;if(e.match(new RegExp(a.replace("{0}",t))))return!0}return!1},e.prototype.getSyncOptions=function(e){var t=localStorage.getItem("aurelia_token"),n={ajax:{headers:{Authorization:"Basic "+t}}};return this.isLiveReplicate(e)&&(n.live=!0,n.retry=!0),n},e.prototype.handleSyncError=function(e,t){403===t.status||404===t.status?this.removeDB(e):401===t.status?this.session.invalidate():void 0!==t.result&&"cancelled"===t.result.status?u.log.error(t):this.ea.publish("dberr",{dbName:e.name,err:t})},e.prototype.handleUpdateError=function(e,t,n){var i=this;409===n.status&&"conflict"===n.name&&e.upsert(t._id,function(){return t}).catch(function(n){u.log.error(n),i.ea.publish("dberr",{dbName:e.name,doc:t,err:n})})},e.prototype.removeDB=function(e){return this.syncHandlers.has(e.name)&&(this.syncHandlers.get(e.name).cancel(),this.syncHandlers.delete(e.name)),this.dbs.delete(e.name),this.removeUpdateCheckpoint(e.name),this.removeSyncCheckpoint(e.name),e.destroy()},e.prototype.removeDBs=function(){var e=this,t=this,n=[];return this.dbs.forEach(function(e,i){n.push(t.removeDB(e))}),Promise.all(n).then(function(){return window.indexedDB.webkitGetDatabaseNames().onsuccess=function(e){Array.prototype.forEach.call(e.target.result,indexedDB.deleteDatabase.bind(indexedDB))},localStorage.removeItem("last-updates"),localStorage.removeItem("last-syncs"),e.lastUpdates.clear(),e.lastSyncs.clear(),new Promise(function(e){return e()})})},e.prototype.listUsers=function(){var e=this;if(!this.dbs.has("staff")){var t=new m.default("staff",{skip_setup:!0});this.dbs.set("staff",t)}var n=this.dbs.get("staff");return this.http.fetch(this.sharding.getRemoteUrl()+"_users/_all_docs?include_docs=true").then(function(e){return e.json()}).then(function(t){return Promise.all(t.rows.filter(function(e){return e.id.match(/^org\.couchdb\.user/)}).map(function(t){var n={id:t.doc._id,doc:{_id:t.doc._id,name:t.doc.name,originRev:t.doc._rev,roles:t.doc.roles}};return e.createOrReplaceLocalUser(n)}))}).then(function(e){return e}).catch(function(e){return n.allDocs({include_docs:!0}).then(function(e){return e.rows}).catch(function(e){u.log.error(e)})})},e.prototype.createOrReplaceLocalUser=function(e){var t=this.dbs.get("staff"),n=this;return t.get(e.id).then(function(i){return i.originRev===e.doc.originRev?new Promise(function(t){return t(e)}):(e.doc._rev=i._rev,t.put(e.doc).then(function(){return e}).catch(function(i){return n.handleUpdateError(t,e.doc,i)}))}).then(function(t){return e}).catch(function(i){if(404===i.status)return t.put(e.doc).then(function(){return e}).catch(function(i){return n.handleUpdateError(t,e.doc,i)})})},e.prototype.list=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={include_docs:!0};t&&(i.limit=t),n&&(i.descending=n);var r=Object.assign({},i),o=Object.assign({},i);n?(r.endkey="_design￿",o.startkey="_design"):(r.endkey="_design",o.startkey="_design￿");var a=this;return this.getDB(e).allDocs(r).then(function(t){return a.getDB(e).allDocs(o).then(function(e){return[].concat(t.rows,e.rows)}).catch(function(e){u.log.error(e)})}).catch(function(e){u.log.error(e)})},e.prototype.get=function(e,t){return this.getDB(e).get(t,{}).then(function(e){return e}).catch(function(e){u.log.error(e)})},e.prototype.view=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s={start_key:n,end_key:i,group:r,descending:o};return a>0&&(s.limit=a),this.getDB(e).query(t,s).then(function(e){return e.rows}).catch(function(e){u.log.error(e)})},e.prototype.replicate=function(e){var t=this;return m.default.replicate(e,this.sharding.getRemoteUrl()+e).on("change",function(n){return t.addSyncCheckpoint(e),new Promise(function(e){return e(!0)})}).on("error",function(e){return t.handleSyncError(db,e),new Promise(function(e){return e(!1)})})},e.prototype.save=function(e,t){this.addUpdateCheckpoint(e);var n=this.getDB(e),i=this;return n.put(t).then(function(t){return i.isLiveReplicate(e)?t:i.replicate(e).then(function(e){return t})}).catch(function(e){i.handleUpdateError(n,t,e)})},e.prototype.create=function(e,t){this.addUpdateCheckpoint(e);var n=this.getDB(e),i=this;return n.post(t).then(function(t){return this.isLiveReplicate(e)?t:this.replicate(e).then(function(e){return t})}).catch(function(e){i.handleUpdateError(n,t,e)})},e.prototype.addUpdateCheckpoint=function(e){this.lastUpdates.set(e,Date.now()),this.persistMap(this.lastUpdates,"last-updates")},e.prototype.addSyncCheckpoint=function(e){this.lastSyncs.set(e,Date.now()),this.persistMap(this.lastSyncs,"last-syncs")},e.prototype.removeUpdateCheckpoint=function(e){this.lastUpdates.delete(e),this.persistMap(this.lastUpdates,"last-updates")},e.prototype.removeSyncCheckpoint=function(e){this.lastSyncs.delete(e),this.persistMap(this.lastSyncs,"last-syncs")},e.prototype.persistMap=function(e,t){var n=[];e.forEach(function(e,t){return n=[].concat(n,[[t,e]])}),localStorage.setItem(t,JSON.stringify(n))},e.prototype.restoreCheckpoints=function(){null!==localStorage.getItem("last-updates")&&(this.lastUpdates=new Map(JSON.parse(localStorage.getItem("last-updates")))),null!==localStorage.getItem("last-syncs")&&(this.lastSyncs=new Map(JSON.parse(localStorage.getItem("last-syncs"))))},e.prototype.hasUnsyncedUpdate=function(){if(y.default.testing)return!1;var e=!1,t=this;return this.lastUpdates.forEach(function(n,i){(!t.lastSyncs.has(i)||t.lastUpdates.get(i)>t.lastSyncs.get(i))&&(e=!0)}),e},e}())||v)||v)}),define("services/http-service",["exports","aurelia-framework","./session","pouchdb","moment","aurelia-event-aggregator","aurelia-fetch-client","../config/app-settings"],function(e,t,n,i,r,o,a,s){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.HTTPService=void 0;var c,d,p,h=(u(i),u(r),u(s));e.HTTPService=(c=(0,t.inject)(n.Session,a.HttpClient,o.EventAggregator),d=(0,t.singleton)(),c(p=d(p=function(){function e(t,n,i){l(this,e),this.session=t,this.http=n,this.ea=i,this.configure()}return e.prototype.configure=function(){this.http.configure(function(e){e.useStandardConfiguration().withBaseUrl(h.default.baseUrl).withDefaults({credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"Fetch"}}).withInterceptor({request:function(e){return e},response:function(e){return e},responseError:function(e){return console.log(e),ea.publish(new FlashErrorMessage(i18n.tr(e.statusText))),new Error(e.statusText)}}).withInterceptor({request:function(e){var t=fakeAuthService.getAuthHeaderValue(e.url);return e.headers.append("Authorization",t),e}})})},e.prototype.fetch=function(e){return this.http.fetch(e).then(function(e){return e.json()}).then(function(e){return e})},e}())||p)||p)}),define("services/log",["exports","aurelia-framework"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=void 0;e.log=t.LogManager.getLogger("timesheet")}),define("services/session",["exports","aurelia-framework","aurelia-router","aurelia-auth","aurelia-i18n","pouchdb","../config/app-settings","./log","./sharding-service"],function(e,t,n,i,r,o,a,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var d,p,h,f=l(o),g=l(a);e.Session=(d=(0,t.singleton)(),p=(0,t.inject)(n.Router,i.AuthService,u.ShardingService,r.I18N),d(h=p(h=function(){function e(t,n,i,r){c(this,e),this.router=t,this.auth=n,this.sharding=i,this.i18n=r,this.loadFromStorage(),this.locale=this.getLocale(),this.i18n.setLocale(this.locale),this.started=!1}return e.prototype.start=function(){var e=this;return this.loadUserFromBackend().then(function(){return e.started=!0,new Promise(function(e){e()})}).catch(function(e){s.log.error(e)})},e.prototype.isStarted=function(){return this.started},e.prototype.loadFromStorage=function(){if(null!==localStorage.getItem("session")){var e=JSON.parse(localStorage.getItem("session"));this.user=e.user,this.locale=e.locale}},e.prototype.persistToStorage=function(){var e={user:this.user,locale:this.locale};localStorage.setItem("session",JSON.stringify(e))},e.prototype.setUser=function(e){this.user=e,this.persistToStorage()},e.prototype.getUser=function(){return this.user},e.prototype.loadUserFromBackend=function(){if(null===localStorage.getItem("aurelia_token"))return new Promise(function(e){});var e=atob(localStorage.getItem("aurelia_token")).split(":"),t=e[0],n=e[1],i=new f.default(this.sharding.getRemoteUrl()+"_users",{skipSetup:!0,auth:{username:t,password:n},ajax:{withCredentials:!1}}),r=this;return i.get("org.couchdb.user:"+t,{include_docs:!0}).then(function(e){return r.user=e,r.persistToStorage(),e}).catch(function(e){s.log.error(e)})},e.prototype.invalidate=function(){this.user=null,localStorage.setItem("session","{}"),this.auth.logout("#/login")},e.prototype.getLocale=function(){return void 0!==this.locale?this.locale:void 0!==this.user&&void 0!==this.user.preferred_locale?this.user.preferred_locale:g.default.default_locale},e.prototype.switchLocale=function(e){this.locale=e,this.setBaseUrl(),this.i18n.setLocale(this.locale),this.persistToStorage(),this.router.navigate(this.router.history.fragment,{replace:!0})},e.prototype.getToken=function(){return localStorage.getItem("aurelia_token")},e.prototype.isGranted=function(e){return void 0!==this.user&&null!==this.user&&this.user.roles.includes(e)},e}())||h)||h)}),define("services/sharding-service",["exports","aurelia-framework","../config/app-settings"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ShardingService=void 0;var o,a,s=i(n),u=6;e.ShardingService=(o=(0,t.singleton)(!1),o(a=function(){function e(){r(this,e),this.curIndex=0,this.curConnections=0}return e.prototype.getRemoteUrl=function(){return this.curConnections>=u&&(this.curConnections=0,this.curIndex++),this.curIndex===s.default.remoteUrls.length&&(this.curIndex=0),this.curConnections++,s.default.remoteUrls[this.curIndex]},e}())||a)}),define("lib/form/semantic-form-validation-renderer",["exports","aurelia-dependency-injection","aurelia-validation"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticFormValidationRenderer=void 0;var r,o;e.SemanticFormValidationRenderer=(r=(0,t.inject)(Element),r(o=function(){function e(t){i(this,e),this.boundaryElement=t}return e.prototype.render=function(e){for(var t=e.unrender,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}for(var o=r,a=o.result,s=o.elements,u=s,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var d;if(l){if(c>=u.length)break;d=u[c++]}else{if(c=u.next(),c.done)break;d=c.value}var p=d;this.remove(p,a)}}for(var h=e.render,f=Array.isArray(h),g=0,h=f?h:h[Symbol.iterator]();;){var v;if(f){if(g>=h.length)break;v=h[g++]}else{if(g=h.next(),g.done)break;v=g.value}for(var m=v,a=m.result,s=m.elements,_=s,y=Array.isArray(_),b=0,_=y?_:_[Symbol.iterator]();;){var w;if(y){if(b>=_.length)break;w=_[b++]}else{if(b=_.next(),b.done)break;w=b.value}var x=w;this.add(x,a)}}},e.prototype.add=function(e,t){if(!t.valid){e.errors=e.errors||new Map,e.errors.set(t);var n=e.querySelector(".field")||e.closest(".field");n.classList.add("error");var i=document.createElement("div");i.classList.add("ui"),i.classList.add("error"),i.classList.add("message"),i.classList.add("visible"),i.classList.add("validation-error"),i.textContent=t.message,i.error=t,n.appendChild(i)}},e.prototype.remove=function(e,t){if(!t.valid){e.errors.delete(t);var n=e.querySelector(".field")||e.closest(".field");n.classList.remove("error");for(var i=n.querySelectorAll(".validation-error"),r=i.length;r--;){var o=i[r];o.error===t&&(o.result=null,o.remove())}}},e}())||o);!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t}}(Element.prototype)}),define("pages/admin/admin-panel",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AdminPanel=void 0;e.AdminPanel=function(){function e(){n(this,e)}return e.prototype.attached=function(){$(".admin.panel.menu .item").tab({onLoad:function(e,t){document.querySelector("admin-reports").au.controller.viewModel.refresh()}})},e.prototype.activate=function(e){this.month=e.month},e}()}),define("pages/admin/admin-report",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.AdminReport=void 0;var o,a,s;e.AdminReport=(o=function e(){i(this,e),n(this,"entries",a,this),n(this,"totals",s,this)},a=r(o.prototype,"entries",[t.bindable],{enumerable:!0,initializer:null}),s=r(o.prototype,"totals",[t.bindable],{enumerable:!0,initializer:null}),o)}),define("pages/admin/admin-reports",["exports","aurelia-framework","aurelia-event-aggregator","../../services/accounting-service","moment","aurelia-i18n","decimal","./admin-router","../../services/db-service","../../config/app-settings","../../services/log"],function(e,t,n,i,r,o,a,s,u,l,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.AdminReports=void 0;var g,v,m,_,y=(d(r),d(a)),b=(d(l),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});e.AdminReports=(g=(0,t.inject)(u.DBService,i.AccountingService,o.I18N,n.EventAggregator,t.TaskQueue),g((m=function(){function e(t,n,i,r,o){h(this,e),p(this,"month",_,this),this.users=new Map,this.allocations=new Map,this.allocationUserReports=new Map,this.allocationReports=[],this.showMonthAggregate=!1,this.db=t,this.accounting=n,this.i18n=i,this.ea=r,this.taskQueue=o}return e.prototype.attached=function(){var e=this;$("#showMonthAggregate").checkbox({onChange:function(){e.showMonthAggregate=$("#showMonthAggregate").hasClass("checked")}}),this.loadReports(),this.subscriber=this.ea.subscribe("dbsync",function(t){t.dbName.match(/^timesheet\-/)&&e.retrieveAllocationReports().then(function(){e.taskQueue.queueMicroTask(function(){e.generateUsersExportLinks(),e.aggregateReports()})})})},e.prototype.detached=function(){this.subscriber.dispose()},e.prototype.refresh=function(){this.loadReports()},e.prototype.getNextMonth=function(){var e=this.month.split("-");if(12===parseInt(e[1]))return parseInt(e[0])+1+"-01";var t=parseInt(e[1])+1;return e[0]+"-"+(t<10?"0":"")+t},e.prototype.loadReports=function(){var e=this;this.retrieveUsers().then(function(){return e.retrieveAllocations()}).then(function(){return e.retrieveAllocationReports()}).then(function(){e.taskQueue.queueMicroTask(function(){e.generateUsersExportLinks(),e.aggregateReports()})})},e.prototype.retrieveUsers=function(){var e=this;return this.db.listUsers().then(function(t){return t.forEach(function(t){e.users.set(t.doc.name,t)}),new Promise(function(e){e()})})},e.prototype.retrieveAllocations=function(){var e=this;return this.db.list("allocation").then(function(t){return t&&t.forEach(function(t){e.allocations.set(t.id,t.doc.name)}),new Promise(function(e){e()})})},e.prototype.retrieveAllocationReports=function(){var e=this,t=[];return this.users.forEach(function(n){t.push(e.db.view("timesheet-"+n.doc.name,"allocations/stats",e.month,e.getNextMonth(),!1).then(function(t){if(void 0===t)return new Promise(function(e){
return e([])});return Promise.all(t.map(function(t){var n=t.key.split(":")[1],i={allocation:n,allocationName:e.allocations.get(n),ratio:new y.default(parseFloat(t.value[0])).mul(100),duration:new y.default(t.value[1]),salary:new y.default(t.value[2]).mul(parseFloat(t.value[0])),precarite:t.value[3]};return e.accounting.provisionAccounts(e.accountingRuleEndKey,i)}))}).then(function(t){e.allocationUserReports.set(n.doc.name,e.groupReportsByAllocation(t))}))}),Promise.all(t)},e.prototype.groupReportsByAllocation=function(e){var t={},n=new Map;for(var i in e){var r=Object.assign({},e[i]);if(n.has(r.allocation)){var o=n.get(r.allocation);n.set(r.allocation,this.addReportsData(o,r)),t=this.addReportsData(t,r)}else n.set(r.allocation,Object.assign({},r)),t=this.addReportsData(t,r)}return{entries:Array.from(n.values()),totals:t}},e.prototype.addReportsData=function(e,t){for(var n={},i=Object.getOwnPropertyNames(t),r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++]}else{if(o=i.next(),o.done)break;a=o.value}var s=a;"object"===b(t[s])&&t[s]instanceof y.default&&(n[s]=new y.default(0),void 0===e[s]&&(e[s]=new y.default(0)),n[s]=e[s].add(t[s]))}return void 0!==t.accounts&&(n.accounts={},void 0===e.accounts&&(e.accounts={}),n.accounts=this.addReportsData(e.accounts,t.accounts)),n},e.prototype.aggregateReports=function(){for(var e=[],t=0,n=this.allocationUserReports.values(),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;e=[].concat(e,a.entries),t++}this.allocationReports=this.groupReportsByAllocation(e);for(var s=this.allocationReports.entries,u=Array.isArray(s),l=0,s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++]}else{if(l=s.next(),l.done)break;c=l.value}var d=c;d.ratio=d.ratio.div(t)}void 0!==this.allocationReports.totals.ratio&&(this.allocationReports.totals.ratio=this.allocationReports.totals.ratio.div(t)),this.generateExportLink()},e.prototype.generateUsersExportLinks=function(){var e=this;this.users.forEach(function(t){e.allocationUserReports.has(t.doc.name)&&e.generateExportLink(t.doc.name)})},e.prototype.generateExportLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=this.month+"\n"+this.i18n.tr("allocation")+";"+this.i18n.tr("ratio")+";"+this.i18n.tr("duration")+";"+this.i18n.tr("salary")+";"+this.i18n.tr("charges")+";"+this.i18n.tr("provisionCPbrut")+";"+this.i18n.tr("provisionCPcharges")+";"+this.i18n.tr("precaritebrut")+";"+this.i18n.tr("precaritecharges")+"\n",i=this.allocationReports,r=t.month+".csv",o=document.getElementById("csv-export-link");if(null!==e&&(i=this.allocationUserReports.get(e),r=e+"-"+t.month+".csv",o=document.getElementById(e+"-csv-export-link")),null!==o&&0!==i.entries.length){for(var a in i.entries){var s=i.entries[a];n+=s.allocationName+";"+s.ratio+";"+s.duration+";"+s.salary+";"+s.accounts.charges+";"+s.accounts.provisionCPBrut+";"+s.accounts.provisionCPCharges+";"+s.accounts.primePrecariteBrut+";"+s.accounts.primePrecariteCharges+"\n"}n+=";"+i.totals.ratio+";"+i.totals.duration+";"+i.totals.salary+";"+i.totals.accounts.charges+";"+i.totals.accounts.provisionCPBrut+";"+i.totals.accounts.provisionCPCharges+";"+i.totals.accounts.primePrecariteBrut+";"+i.totals.accounts.primePrecariteCharges+"\n"+this.i18n.tr("netpayable")+";"+i.totals.accounts.netPayable+"\n"+this.i18n.tr("urssaf")+";"+i.totals.accounts.urssaf+"\n"+this.i18n.tr("provisionCPbrut")+";"+i.totals.accounts.provisionCP+"\n"+this.i18n.tr("provisionprecarite")+";"+i.totals.accounts.provisionPrecarite+"\n",o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",r)}},e}(),_=f(m.prototype,"month",[t.bindable],{enumerable:!0,initializer:null}),v=m))||v)}),define("pages/admin/admin-router",["exports","aurelia-framework","aurelia-router","aurelia-i18n"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AdminRouter=void 0;var o,a;e.AdminRouter=(o=(0,t.inject)(n.Router,i.I18N),o(a=function(){function e(t,n){r(this,e),this.router=t,this.i18n=n}return e.prototype.configureRouter=function(e){e.map([{route:["/","planning"],name:"planning",moduleId:"./planning",nav:!1,title:this.i18n.tr("planning"),auth:!0},{route:":month",name:"panel",moduleId:"./admin-panel",nav:!1,title:this.i18n.tr("budgetting"),auth:!0}])},e.prototype.navigateToRoute=function(e,t){this.router.navigate(e)},e}())||a)}),define("pages/admin/planning",["exports","aurelia-framework","moment","aurelia-i18n","./admin-router","../../config/app-settings"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Planning=void 0;var u,l,c=a(n),d=a(o);e.Planning=(u=(0,t.inject)(Element,r.AdminRouter),u(l=function(){function e(t,n){s(this,e),this.element=t,this.router=n}return e.prototype.attached=function(){var e=this;$(this.element).find(".ui.calendar").calendar({type:"month",inline:!0,text:d.default.calendar_text,onChange:function(t,n){var i=(0,c.default)(t).format("YYYY-MM");e.router.navigateToRoute("admin/"+i)}})},e}())||l)}),define("pages/admin/user-timesheet",["exports","aurelia-framework","aurelia-i18n","aurelia-validation","decimal","./admin-router","../../services/db-service"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.UserTimesheet=void 0;var d,p,h,f,g,v,m,_,y=s(r);e.UserTimesheet=(d=(0,t.inject)(a.DBService,n.I18N,t.NewInstance.of(i.ValidationController),o.AdminRouter),d((h=function(){function e(t,n,i,r){l(this,e),u(this,"timesheet",f,this),u(this,"userName",g,this),u(this,"purposes",v,this),u(this,"unallocatedOnly",m,this),u(this,"accountingRules",_,this),this.db=t,this.i18n=n,this.controller=i,this.router=r}return e.prototype.attached=function(){$("."+this.userName+" .precarite.checkbox").checkbox(),this.timesheet.precarite&&$("."+this.userName+" .precarite.checkbox").checkbox("set checked"),i.ValidationRules.ensure("salary").required().matches(/^[\d]+[\.|]?[\d]*$/).withMessage(this.i18n.tr("error_number")).on(this.timesheet)},e.prototype.allocationSelected=function(e){var t=e.element.dataset.username;this.timesheet.entries.forEach(function(t){t.id===e.element.dataset.entryid&&(t.allocation=e.selectedEntry)}),this.calculateRatios(),this.saveTimesheet(t)},e.prototype.allocationAdded=function(e){$(".user.timesheet dropdown").each(function(){this.au.controller.viewModel.entries=e.entries})},e.prototype.calculateRatios=function(){var e=0;this.timesheet.entries.forEach(function(t){return e+=t.duration}),this.timesheet.entries.forEach(function(t){t.ratio=new y.default(t.duration).div(new y.default(e)).toJSON()})},e.prototype.saveTimesheet=function(e){var t=this;this.controller.validate().then(function(e){e.valid&&(t.timesheet.precarite=$("."+t.userName+" .precarite.checkbox").checkbox("is checked"),t.db.save("timesheet-"+t.userName,t.timesheet).then(function(){t.db.get("timesheet-"+t.userName,t.timesheet._id).then(function(e){t.timesheet._rev=e._rev})}))})},e.prototype.openEntry=function(e){this.router.navigateToRoute("timesheets/"+this.timesheet._id+"/"+e+"?r=admin/"+this.timesheet._id)},e}(),f=c(h.prototype,"timesheet",[t.bindable],{enumerable:!0,initializer:function(){return{}}}),g=c(h.prototype,"userName",[t.bindable],{enumerable:!0,initializer:null}),v=c(h.prototype,"purposes",[t.bindable],{enumerable:!0,initializer:function(){return new Map}}),m=c(h.prototype,"unallocatedOnly",[t.bindable],{enumerable:!0,initializer:null}),_=c(h.prototype,"accountingRules",[t.bindable],{enumerable:!0,initializer:null}),p=h))||p)}),define("pages/admin/users-timesheets",["exports","aurelia-framework","aurelia-event-aggregator","../../services/db-service","../../config/app-settings","moment","../../services/log"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.UsersTimesheets=void 0;var d,p,h,f;s(r),s(o),e.UsersTimesheets=(d=(0,t.inject)(i.DBService,n.EventAggregator),d((h=function(){function e(t,n){l(this,e),u(this,"month",f,this),this.timesheets=new Map,this.users=new Map,this.purposes=new Map,this.unallocatedOnly=!0,this.db=t,this.ea=n}return e.prototype.attached=function(){var e=this;$("#showAll").checkbox({onChange:function(){e.unallocatedOnly=!$("#showAll").hasClass("checked")}}),this.retrieveData(),this.subscriber=this.ea.subscribe("dbsync",function(t){t.dbName.match(/^timesheet\-/)&&e.retrieveTimesheets()})},e.prototype.detached=function(){this.subscriber.dispose()},e.prototype.retrieveData=function(){var e=this;this.retrieveUsers().then(function(){return e.retrievePurposes()}).then(function(){return e.retrieveTimesheets()})},e.prototype.retrieveUsers=function(){var e=this;return this.db.listUsers().then(function(t){return t.map(function(t){e.users.set(t.doc.name,t)}),new Promise(function(e){e()})})},e.prototype.retrievePurposes=function(){var e=this;return this.db.list("purpose").then(function(t){return t.map(function(t){e.purposes.set(t.id,t.doc.name)}),new Promise(function(e){e()})})},e.prototype.retrieveTimesheets=function(){var e=this;this.users.forEach(function(t){e.db.get("timesheet-"+t.doc.name,e.month).then(function(n){n&&e.timesheets.set(t.doc.name,n)})})},e}(),f=c(h.prototype,"month",[t.bindable],{enumerable:!0,initializer:null}),p=h))||p)}),define("pages/timesheets/monthly-timesheet",["exports","aurelia-framework","aurelia-event-aggregator","./timesheets-router","../../services/session","../../services/db-service","../../config/app-settings","moment"],function(e,t,n,i,r,o,a,s){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.MonthlyTimesheet=void 0;var p,h,f,g;u(a),u(s),e.MonthlyTimesheet=(p=(0,t.inject)(r.Session,o.DBService,n.EventAggregator,i.TimesheetsRouter),p((f=function(){function e(t,n,i,r){c(this,e),l(this,"entity",g,this),this.purposes=new Map,this.interprets=new Map,this.session=t,this.db=n,this.ea=i,this.router=r}return e.prototype.activate=function(e){this.timesheetId=e.id},e.prototype.attached=function(){this.retrieveData(),this.subscriber=this.ea.subscribe("dbsync",function(e){me.retrieveData()})},e.prototype.detached=function(){this.subscriber.dispose()},e.prototype.retrieveData=function(){var e=this;this.listPurposes().then(function(){return e.listInterprets()}).then(function(){return e.getTimesheet()})},e.prototype.listPurposes=function(){var e=this;return this.db.list("purpose").then(function(t){return t.map(function(t){e.purposes.set(t.id,t.doc.name)}),new Promise(function(e){e()})})},e.prototype.listInterprets=function(){var e=this;return this.db.list("interpret").then(function(t){return t.map(function(t){e.interprets.set(t.id,t.doc.name)}),new Promise(function(e){e()})})},e.prototype.getTimesheet=function(){var e=this;return this.db.get("timesheet-"+this.session.getUser().name,this.timesheetId).then(function(t){return e.entity=t,new Promise(function(e){e()})})},e.prototype.openEntry=function(e){this.router.navigateToRoute("timesheets/"+this.entity._id+"/"+e+"?r=timesheets/"+this.entity._id)},e}(),g=d(f.prototype,"entity",[t.bindable],{enumerable:!0,initializer:function(){return{}}}),h=f))||h)}),define("pages/timesheets/planning-router",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PlanningRouter=void 0;e.PlanningRouter=function(){function e(){n(this,e)}return e.prototype.configureRouter=function(e,t){e.map([{route:["/"],name:"planning",moduleId:"./planning",nav:!1,title:"Planning",auth:!0}]),this.router=t},e.prototype.navigateToRoute=function(e,t){this.router.navigate(e)},e}()}),define("pages/timesheets/planning",["exports","aurelia-framework","moment","./timesheets-router","../../config/app-settings"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Planning=void 0;var s,u,l=o(n),c=o(r);e.Planning=(s=(0,t.inject)(Element,i.TimesheetsRouter),s(u=function(){function e(t,n){a(this,e),this.element=t,this.router=n}return e.prototype.attached=function(){var e=this;$(this.element).find(".ui.calendar").calendar({type:"month",inline:!0,text:c.default.calendar_text,onChange:function(t,n){var i=(0,l.default)(t).format("YYYY-MM");e.router.navigateToRoute("app/timesheets/"+i)}})},e}())||u)}),define("pages/timesheets/timesheet-entry",["exports","aurelia-framework","aurelia-event-aggregator","aurelia-validation","moment","aurelia-i18n","../../resources/flash/flash-success-message","../../config/app-settings","./timesheets-router","../../services/session","../../services/db-service"],function(e,t,n,i,r,o,a,s,u,l,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.TimesheetEntry=void 0;var g,v,m,_,y,b,w=d(r),x=d(s),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.TimesheetEntry=(g=(0,t.inject)(Element,l.Session,c.DBService,o.I18N,n.EventAggregator,u.TimesheetsRouter,t.NewInstance.of(i.ValidationController)),g((m=function(){function e(t,n,i,r,o,a,s){h(this,e),p(this,"entity",_,this),p(this,"create",y,this),p(this,"saveAction",b,this),this.element=t,this.session=n,this.db=i,this.i18n=r,this.ea=o,this.router=a,this.controller=s}return e.prototype.activate=function(e,t,n){e.timesheetId&&e.entryId&&this.getTimesheetEntry(e.timesheetId,e.entryId),this.redirectTo=n.queryParams.r},e.prototype.attached=function(){this.entity.id||(this.entity.date=new Date,this.entity.hours=0,this.entity.minutes=0,this.entity.interpret_hours=0,this.entity.interpret_minutes=0),this.setDate(),this.setupValidation()},e.prototype.setDate=function(){var e=this;$(this.element).find(".date.ui.calendar").each(function(){$(this).calendar({type:"date",formatInput:!1,text:x.default.calendar_text}),$(this).calendar("set date",new Date(e.entity.date))})},e.prototype.setupValidation=function(){i.ValidationRules.customRule("timeIsSet",function(e,t){return parseInt(t.minutes)>0||parseInt(e)>0},this.i18n.tr("time_not_set"));var e=this;this.create||(i.ValidationRules.customRule("monthUnchanged",function(t,n){return e.isMonthUnChanged()},this.i18n.tr("month_changed")),i.ValidationRules.ensure("dateInput").satisfiesRule("monthUnchanged").ensure("date").satisfiesRule("monthUnchanged").on(this)),i.ValidationRules.ensure("date").required().ensure("purpose").required().ensure("hours").required().matches(/^[\d]+$/).withMessage(this.i18n.tr("error_number")).then().satisfiesRule("timeIsSet").when(function(e){return 0===parseInt(e.minutes)}).ensure("minutes").required().matches(/^[\d]+$/).withMessage(this.i18n.tr("error_number")).ensure("interpret_hours").matches(/^[\d]*$/).withMessage(this.i18n.tr("error_number")).ensure("interpret_minutes").matches(/^[\d]*$/).withMessage(this.i18n.tr("error_number")).on(this.entity)},e.prototype.isMonthUnChanged=function(){return null===this.entity.date||void 0===this.entity.date||new Date(this.entity.date).getMonth()===this.getCalendarDate().getMonth()},e.prototype.getCalendarDate=function(){return new Date($(this.element).find(".date.ui.calendar").calendar("get date"))},e.prototype.getTimesheetEntry=function(e,t){var n=this;return this.db.get("timesheet-"+this.session.getUser().name,e).then(function(e){return e.map(function(e){e.id===t&&(n.entity=e)}),n.setDate(),new Promise(function(e){e()})})},e.prototype.doSave=function(e){var t=this;this.controller.validate().then(function(e){if(t.isEditable&&e.valid){t.entity.date=t.getCalendarDate(),t.create&&(t.entity.id=t.entity.purpose+":"+Date.now()),t.entity.hours=parseInt(t.entity.hours),t.entity.minutes=parseInt(t.entity.minutes),t.entity.interpret_hours=parseInt(t.entity.interpret_hours),t.entity.interpret_minutes=parseInt(t.entity.interpret_minutes),t.entity.duration=t.entity.hours+parseFloat(t.entity.minutes/60),t.entity.interpret_duration=t.entity.interpret_hours+parseFloat(t.entity.interpret_minutes/60);var n=(0,w.default)(t.entity.date).format("YYYY-MM");t.db.get("timesheet-"+t.session.getUser().name,n).then(function(e){e||(e={_id:n,entries:[]});var i=t.entity;e.entries.slice().reverse().forEach(function(t,n,r){t.id===i.id&&e.entries.splice(r.length-1-n,1)}),e.entries=[t.entity].concat(e.entries),t.db.save("timesheet-"+t.session.getUser().name,e).then(function(){return t.ea.publish(new a.FlashSuccessMessage(t.i18n.tr("success")))}),t.create&&(t.entity={purpose:t.entity.purpose,hours:0,minutes:0,interpret_hours:0,interpret_minutes:0},t.setupValidation()),t.saveAction&&t.saveAction({entity:t.entity}),t.redirectTo&&t.router.navigateToRoute(t.redirectTo)})}})},C(e,[{key:"isEditable",get:function(){return this.session.isGranted("admin")||void 0===this.entity.allocation||null===this.entity.allocation}}]),e}(),_=f(m.prototype,"entity",[t.bindable],{enumerable:!0,initializer:function(){return{}}}),y=f(m.prototype,"create",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),b=f(m.prototype,"saveAction",[t.bindable],{enumerable:!0,initializer:null}),v=m))||v)}),define("pages/timesheets/timesheets-router",["exports","aurelia-framework","aurelia-router","aurelia-i18n"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TimesheetsRouter=void 0;var o,a;e.TimesheetsRouter=(o=(0,t.inject)(n.Router,i.I18N),o(a=function(){function e(t,n){r(this,e),this.router=t,this.i18n=n}return e.prototype.configureRouter=function(e){e.map([{route:["/"],name:"entry",moduleId:"./timesheets",nav:!1,title:this.i18n.tr("timesheetentry"),auth:!0},{route:[":id"],name:"timesheet",moduleId:"./monthly-timesheet",nav:!1,title:this.i18n.tr("monthtimesheet"),auth:!0},{route:":timesheetId/:entryId",name:"timesheetEntry",moduleId:"./timesheet-entry",nav:!1,title:this.i18n.tr("timesheetentry"),auth:!0}])},e.prototype.navigateToRoute=function(e,t){this.router.navigate(e)},e}())||a)}),define("pages/timesheets/timesheets",["exports","aurelia-framework","aurelia-event-aggregator","../../services/session","../../services/db-service","../../services/log"],function(e,t,n,i,r,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Timesheets=void 0;var s,u;e.Timesheets=(s=(0,t.inject)(i.Session,r.DBService,n.EventAggregator),s(u=function(){function e(t,n,i){a(this,e),this.purposes=new Map,this.lastTimesheet={doc:{entries:[]}},this.session=t,this.db=n,this.ea=i}return e.prototype.retrieveData=function(){var e=this;this.listPurposes().then(function(){return e.getLastTimesheet()})},e.prototype.listPurposes=function(){var e=this;return this.db.list("purpose").then(function(t){return t.map(function(t){e.purposes.set(t.id,t.doc.name)}),new Promise(function(e){e()})})},e.prototype.getLastTimesheet=function(){var e=this;return this.db.list("timesheet-"+this.session.getUser().name,1,!0).then(function(t){return e.lastTimesheet={doc:{entries:[]}},t.length>0&&(e.lastTimesheet=t[0]),new Promise(function(e){e()})})},e.prototype.attached=function(){$(".ui.accordion").accordion({exclusive:!0}),this.retrieveData();var e=this;this.subscriber=this.ea.subscribe("dbsync",function(t){e.retrieveData()})},e.prototype.detached=function(){this.subscriber.dispose()},e.prototype.saveEntry=function(e){this.getLastTimesheet()},e}())||u)}),define("pages/user/logged-redirect",["exports","aurelia-framework","aurelia-router","../../services/session","../../services/log"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LoggedRedirect=void 0;var a,s;e.LoggedRedirect=(a=(0,t.inject)(i.Session,n.Router),a(s=function(){function e(t,n){o(this,e),this.session=t,this.router=n}return e.prototype.activate=function(){var e=this.router;this.session.start().then(function(){e.navigate("app/timesheets")}).catch(function(e){r.log.error(e)})},e}())||s)}),define("pages/user/login",["exports","aurelia-framework","aurelia-router","pouchdb","pouchdb-authentication","../../services/log","../../services/sharding-service"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Login=void 0;var l,c,d=s(i),p=s(r);e.Login=(l=(0,t.inject)(a.ShardingService,n.Router),l(c=function(){function e(t,n){u(this,e),this.sharding=t,this.router=n}return e.prototype.login=function(){var e=this;d.default.plugin(p.default);var t=new d.default(this.sharding.getRemoteUrl()+"_users",{skipSetup:!0});t.login(this.username,this.password,function(t,n){return t?(o.log.error(t),e.loginError=t.name,void $(".ui.form .login.error.message").show()):(localStorage.setItem("aurelia_token",btoa(e.username+":"+e.password)),void e.router.navigate("loggedIn"))})},e}())||c)}),define("pages/user/password",["exports","aurelia-framework","aurelia-fetch-client","aurelia-event-aggregator","aurelia-validation","aurelia-i18n","./user-router","../../services/session","../../config/app-settings","../../resources/flash/flash-success-message"],function(e,t,n,i,r,o,a,s,u,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Password=void 0;var p,h;c(u),e.Password=(p=(0,t.inject)(Element,s.Session,o.I18N,n.HttpClient,a.UserRouter,i.EventAggregator,t.NewInstance.of(r.ValidationController)),p(h=function(){function e(t,n,i,r,o,a,s){d(this,e),this.form={},this.element=t,this.session=n,this.i18n=i,this.http=r,this.router=o,this.ea=a,this.controller=s,this.form={current_password:null,plain_password:{first:null,second:null}}}return e.prototype.activate=function(){this.rules=r.ValidationRules.ensure("current_password").required({message:"required"}).on(this.form),this.newrules=r.ValidationRules.ensure("first").required().length({minimum:6}).ensure("second").required().ensure("first").equality("second").on(this.form.plain_password)},e.prototype.save=function(e){var t=this,i=this.controller.validate();if(!(i.length>0))return $(e.target).addClass("loading"),this.http.fetch("users/"+this.session.user.id+"/password",{method:"PUT",body:(0,n.json)(this.form)}).then(function(n){return $(e.target).removeClass("loading"),n instanceof Error?(Promise.reject(n),n):(t.ea.publish(new l.FlashSuccessMessage(t.i18n.tr("success"))),t.form={current_password:null,plain_password:{first:null,second:null}},new Promise(function(e){e()}))}).catch(function(){})},e}())||h)}),define("pages/user/user-router",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.UserRouter=void 0;e.UserRouter=function(){function e(){n(this,e)}return e.prototype.configureRouter=function(e,t){e.map([{route:["/password"],name:"password",moduleId:"./password",nav:!0,title:"user:change_password",settings:{icon:"unlock"}}]),this.router=t},e.prototype.navigateToRoute=function(e,t){this.router.navigate(e)},e}()}),define("resources/confirmation/confirmation",["exports","aurelia-framework","aurelia-dialog"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Confirmation=void 0;var r,o;e.Confirmation=(r=(0,t.inject)(n.DialogController),r(o=function(){function e(t){i(this,e),this.dialogController=t}return e.prototype.activate=function(e){this.message=e},e}())||o)}),define("resources/confirmation/delete-button",["exports","aurelia-framework","aurelia-dialog","./confirmation"],function(e,t,n,i){"use strict";function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteButton=void 0;var l,c,d,p,h;e.DeleteButton=(l=(0,t.inject)(n.DialogService),l((d=function(e){function t(n){o(this,t);for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];var l=a(this,e.call.apply(e,[this].concat(s)));return r(l,"action",p,l),r(l,"message",h,l),l.dialogService=n,l.message=l.i18n.tr("delete_sure"),l}return s(t,e),t.prototype.do=function(e){var t=this;e.stopPropagation(),this.dialogService.open({viewModel:i.Confirmation,model:this.message}).then(function(e){e.wasCancelled||t.action()})},t}(BaseViewModel),p=u(d.prototype,"action",[t.bindable],{enumerable:!0,initializer:function(){return function(){}}}),h=u(d.prototype,"message",[t.bindable],{enumerable:!0,initializer:function(){return"Are you sure ?"}}),c=d))||c)}),define("resources/confirmation/ui-confirmation",["exports","aurelia-framework"],function(e,t){"use strict";function n(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.UIConfirmationAttribute=void 0;var o,a,s,u,l;e.UIConfirmationAttribute=(o=(0,t.customAttribute)("ui-confirmation"),a=(0,t.inject)(Element),o(s=a((u=function(){function e(t){i(this,e),n(this,"approveCallback",l,this),alert(t),this.element=t}return e.prototype.attached=function(){$(this.element).modal({onApprove:function(e){return function(){var t=new CustomEvent("confirm",{detail:{value:1},bubbles:!0});e.dispatchEvent(t)}}(this.element)})},e.prototype.activeChanged=function(e){e?$(this.element).modal("show"):$(this.element).modal("hide")},e.prototype.bind=function(e){this.approveCallback=e.approveCallback},e}(),l=r(u.prototype,"approveCallback",[t.bindable],{enumerable:!0,initializer:null}),s=u))||s)||s)}),define("resources/dropdown/dropdown",["exports","aurelia-framework","../../services/db-service","aurelia-event-aggregator"],function(e,t,n,i){"use strict";function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.DropDownCustomElement=void 0;var s,u,l,c,d,p,h,f,g,v,m,_,y;e.DropDownCustomElement=(s=(0,t.customElement)("dropdown"),u=(0,t.inject)(Element,n.DBService,i.EventAggregator),
s(l=u((c=function(){function e(t,n,i){o(this,e),r(this,"entries",d,this),r(this,"selectedEntry",p,this),r(this,"route",h,this),r(this,"name",f,this),r(this,"required",g,this),r(this,"multiple",v,this),r(this,"allowAdd",m,this),r(this,"selectAction",_,this),r(this,"addAction",y,this),this.element=t,this.db=n,this.ea=i}return e.prototype.attached=function(){var e=this;$(this.element).find(".ui.dropdown").dropdown({forceSelection:!1,allowAdditions:e.allowAdd,hideAdditions:!e.allowAdd,onChange:function(t,n,i){"undefined"!=typeof i&&$(i[0]).hasClass("addition")?e.save(n):e.selectedEntry=t}}),this.load(),this.subscriber=this.ea.subscribe("dbsync",function(t){t.dbName===e.route&&e.load()})},e.prototype.detached=function(){this.subscriber.dispose()},e.prototype.selectedEntryChanged=function(){if(!this.isSelectedEntryNew()){var e=$(this.element).find(".dropdown").dropdown("get value");null===e[0]||void 0!==this.selectedEntry&&""!==this.selectedEntry&&this.selectedEntry!==[]||$(this.element).find(".dropdown").dropdown("clear"),this.setEntryName(),this.selectAction({dropdown:this})}},e.prototype.isSelectedEntryNew=function(){if(null===this.entries)return!0;var e=this,t=!0;return this.entries.forEach(function(n){n.id===e.selectedEntry&&(t=!1)}),t},e.prototype.restoreDefaults=function(){$(this.element).find(".text").addClass("default"),this.selectedEntryName=this.getPlaceHolder()},e.prototype.getPlaceHolder=function(){return $(this.element).find(".text").data("default")},e.prototype.setEntryName=function(){if(!this.multiple&&this.entries){for(var e=this.entries,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var r=i;r.id==this.selectedEntry&&(this.selectedEntryName=r.doc.name)}this.selectedEntryName&&this.selectedEntryName!=this.getPlaceHolder()?$(this.element).find(".text").removeClass("default"):this.restoreDefaults()}},e.prototype.load=function(){var e=this;this.db.list(this.route).then(function(t){e.entries=t,e.entries&&e.required&&(void 0===e.selectedEntry||""===e.selectedEntry)&&e.entries.length>0&&(e.selectedEntry=e.entries[0].id),e.setEntryName()})},e.prototype.save=function(e){var t={name:e},n=this;this.db.create(this.route,t).then(function(e){t._id=e.id,n.entries=[{id:e.id,doc:t}].concat(n.entries),n.selectedEntry=t._id,$(n.element).find(".dropdown").dropdown("set value",t._id),n.addAction({dropdown:n})})},e}(),d=a(c.prototype,"entries",[t.bindable],{enumerable:!0,initializer:null}),p=a(c.prototype,"selectedEntry",[t.bindable],{enumerable:!0,initializer:null}),h=a(c.prototype,"route",[t.bindable],{enumerable:!0,initializer:null}),f=a(c.prototype,"name",[t.bindable],{enumerable:!0,initializer:null}),g=a(c.prototype,"required",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),v=a(c.prototype,"multiple",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),m=a(c.prototype,"allowAdd",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),_=a(c.prototype,"selectAction",[t.bindable],{enumerable:!0,initializer:function(){return function(){}}}),y=a(c.prototype,"addAction",[t.bindable],{enumerable:!0,initializer:function(){return function(){}}}),l=c))||l)||l)}),define("resources/flash/flash-error-message",["exports","./flash-message"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FlashErrorMessage=void 0;e.FlashErrorMessage=function(e){function t(r){return n(this,t),i(this,e.call(this,r))}return r(t,e),t}(t.FlashMessage)}),define("resources/flash/flash-message",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.FlashMessage=function e(n){t(this,e),this.message=n}}),define("resources/flash/flash-success-message",["exports","./flash-message"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FlashSuccessMessage=void 0;e.FlashSuccessMessage=function(e){function t(r){return n(this,t),i(this,e.call(this,r))}return r(t,e),t}(t.FlashMessage)}),define("resources/flash/flash",["exports","aurelia-framework","aurelia-event-aggregator","aurelia-animator-css","./flash-message","./flash-success-message","./flash-error-message"],function(e,t,n,i,r,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Flash=void 0;var u,l;e.Flash=(u=(0,t.inject)(Element,n.EventAggregator,i.CssAnimator),u(l=function(){function e(t,n,i){s(this,e),this.message="",this.element=t,this.ea=n,this.animator=i}return e.prototype.attached=function(){var e=this,t=this.element.querySelectorAll(".message")[0];this.subscriber=this.ea.subscribe(r.FlashMessage,function(n){e.message=n.message,$(t).removeClass("positive"),$(t).removeClass("negative"),$(t).removeClass("background-animation-add"),$(t).removeClass("background-animation-remove");var i="positive";n instanceof a.FlashErrorMessage&&(i="negative"),window.scrollTo(0,0),e.animator.addClass(t,i).then(function(){e.animator.addClass(t,"background-animation").then(function(){e.animator.removeClass(t,"background-animation"),e.animator.removeClass(t,i)})})})},e.prototype.detached=function(){this.subscriber.dispose()},e}())||l)}),define("resources/formats/array-join",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.JoinValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e){return void 0!==e&&Array.isArray(e)?e.join(", "):""},e}()}),define("resources/formats/date-format",["exports","moment"],function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DateFormatValueConverter=void 0;var r=n(t);e.DateFormatValueConverter=function(){function e(){i(this,e)}return e.prototype.toView=function(e){return(0,r.default)(e).format("D-MMM-YYYY")},e}()}),define("resources/formats/email",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.EmailValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e){var t="";return void 0!==e&&Array.isArray(e)?(e.forEach(function(e){t+='<a href="mailto: '+e+'">'+e+"</a> "}),t):t},e}()}),define("resources/formats/limit-to-value",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.LimitToValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e,t){return null==e||void 0===e?[]:e.slice(0,t)},e}()}),define("resources/formats/month-format",["exports","moment"],function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MonthFormatValueConverter=void 0;var r=n(t);e.MonthFormatValueConverter=function(){function e(){i(this,e)}return e.prototype.toView=function(e){return(0,r.default)(e).format("MMMM YYYY")},e}()}),define("resources/formats/tel",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.TelValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e){var t="";return void 0!==e&&Array.isArray(e)?(e.forEach(function(e){t+='<a href="tel: '+e+'">'+e+"</a> "}),t):t},e}()}),define("resources/formats/truncate",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.TruncateValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e,t){return null===e||void 0===e||e.length<=t?e:e.substring(0,t)+"..."},e}()}),define("aurelia-templating-resources/compose",["exports","aurelia-dependency-injection","aurelia-task-queue","aurelia-templating","aurelia-pal"],function(e,t,n,i,r){"use strict";function o(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function s(e,t){return Object.assign(t,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element})}function u(e,t){e.currentInstruction=null,e.compositionEngine.compose(t).then(function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null})}Object.defineProperty(e,"__esModule",{value:!0}),e.Compose=void 0;var l,c,d,p,h,f,g;e.Compose=(l=(0,i.customElement)("compose"),c=(0,t.inject)(r.DOM.Element,t.Container,i.CompositionEngine,i.ViewSlot,i.ViewResources,n.TaskQueue),l(d=(0,i.noView)(d=c((p=function(){function e(e,t,n,i,r,a){o(this,"model",h,this),o(this,"view",f,this),o(this,"viewModel",g,this),this.element=e,this.container=t,this.compositionEngine=n,this.viewSlot=i,this.viewResources=r,this.taskQueue=a,this.currentController=null,this.currentViewModel=null}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,u(this,s(this,{view:this.view,viewModel:this.viewModel,model:this.model}))},e.prototype.unbind=function(e,t){this.bindingContext=null,this.overrideContext=null;var n=!0,i=!0;this.viewSlot.removeAll(n,i)},e.prototype.modelChanged=function(e,t){var n=this;return this.currentInstruction?void(this.currentInstruction.model=e):void this.taskQueue.queueMicroTask(function(){if(n.currentInstruction)return void(n.currentInstruction.model=e);var t=n.currentViewModel;t&&"function"==typeof t.activate&&t.activate(e)})},e.prototype.viewChanged=function(e,t){var n=this,i=s(this,{view:e,viewModel:this.currentViewModel||this.viewModel,model:this.model});return this.currentInstruction?void(this.currentInstruction=i):(this.currentInstruction=i,void this.taskQueue.queueMicroTask(function(){return u(n,n.currentInstruction)}))},e.prototype.viewModelChanged=function(e,t){var n=this,i=s(this,{viewModel:e,view:this.view,model:this.model});return this.currentInstruction?void(this.currentInstruction=i):(this.currentInstruction=i,void this.taskQueue.queueMicroTask(function(){return u(n,n.currentInstruction)}))},e}(),h=a(p.prototype,"model",[i.bindable],{enumerable:!0,initializer:null}),f=a(p.prototype,"view",[i.bindable],{enumerable:!0,initializer:null}),g=a(p.prototype,"viewModel",[i.bindable],{enumerable:!0,initializer:null}),d=p))||d)||d)||d)}),define("aurelia-templating-resources/if",["exports","aurelia-templating","aurelia-dependency-injection"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var i,r,o;e.If=(i=(0,t.customAttribute)("if"),r=(0,n.inject)(t.BoundViewFactory,t.ViewSlot),i(o=(0,t.templateController)(o=r(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.showing=!1,this.view=null,this.bindingContext=null,this.overrideContext=null}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=this;if(this.__queuedChanges)return void this.__queuedChanges.push(e);var n=this._runValueChanged(e);n instanceof Promise&&!function(){var e=t.__queuedChanges=[],i=function n(){if(!e.length)return void(t.__queuedChanges=void 0);var i=t._runValueChanged(e.shift())||Promise.resolve();i.then(n)};n.then(i)}()},e.prototype._runValueChanged=function(e){var t=this;if(!e){var n=void 0;return null!==this.view&&this.showing&&(n=this.viewSlot.remove(this.view),n instanceof Promise?n.then(function(){return t.view.unbind()}):this.view.unbind()),this.showing=!1,n}if(null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),!this.showing)return this.showing=!0,this.viewSlot.add(this.view)},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing&&(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)),this.view.returnToCache(),this.view=null))},e}())||o)||o)||o)}),define("aurelia-templating-resources/with",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.With=void 0;var r,o,a;e.With=(r=(0,n.customAttribute)("with"),o=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),r(a=(0,n.templateController)(a=o(a=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=(0,i.createOverrideContext)(e,this.parentOverrideContext);this.view?this.view.bind(e,t):(this.view=this.viewFactory.create(),this.view.bind(e,t),this.viewSlot.add(this.view))},e.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},e}())||a)||a)||a)}),define("aurelia-templating-resources/repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],function(e,t,n,i,r,o,a,s){"use strict";function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.Repeat=void 0;var p,h,f,g,v,m,_,y;e.Repeat=(p=(0,i.customAttribute)("repeat"),h=(0,t.inject)(i.BoundViewFactory,i.TargetInstruction,i.ViewSlot,i.ViewResources,n.ObserverLocator,r.RepeatStrategyLocator),p(f=(0,i.templateController)(f=h((g=function(e){function t(t,n,i,r,s,c){var d=l(this,e.call(this,{local:"item",viewsRequireLifecycle:(0,a.viewsRequireLifecycle)(t)}));return u(d,"items",v,d),u(d,"local",m,d),u(d,"key",_,d),u(d,"value",y,d),d.viewFactory=t,d.instruction=n,d.viewSlot=i,d.lookupFunctions=r.lookupFunctions,d.observerLocator=s,d.key="key",d.value="value",d.strategyLocator=c,d.ignoreMutation=!1,d.sourceExpression=(0,o.getItemsSourceExpression)(d.instruction,"repeat.for"),d.isOneTime=(0,o.isOneTime)(d.sourceExpression),d.viewsRequireLifecycle=(0,a.viewsRequireLifecycle)(t),d}return c(t,e),t.prototype.call=function(e,t){this[e](this.items,t)},t.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},t.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0),this._unsubscribeCollection()},t.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},t.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,e)}},t.prototype._getInnerCollection=function(){var e=(0,o.unwrapExpression)(this.sourceExpression);return e?e.evaluate(this.scope,null):null},t.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&this.strategy.instanceMutated(this,e,t)},t.prototype.handleInnerCollectionMutated=function(e,t){var n=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var i=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return n.ignoreMutation=!1}),i===this.items?this.itemsChanged():this.items=i}},t.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},t.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},t.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]].expressions;if(i)for(var r=0;n<i.length;n++)if("matcher"===i[r].targetProperty){var o=i[r];return i.splice(r,1),o}}},t.prototype.viewCount=function(){return this.viewSlot.children.length},t.prototype.views=function(){return this.viewSlot.children},t.prototype.view=function(e){return this.viewSlot.children[e]},t.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},t.prototype.addView=function(e,t){var n=this.viewFactory.create();n.bind(e,t),this.viewSlot.add(n)},t.prototype.insertView=function(e,t,n){var i=this.viewFactory.create();i.bind(t,n),this.viewSlot.insert(e,i)},t.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},t.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},t.prototype.removeViews=function(e,t,n){return this.viewSlot.removeMany(e,t,n)},t.prototype.removeView=function(e,t,n){return this.viewSlot.removeAt(e,t,n)},t.prototype.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,o.updateOneTimeBinding)(e.bindings[t]);for(t=e.controllers.length;t--;)for(var n=e.controllers[t].boundProperties.length;n--;){var i=e.controllers[t].boundProperties[n].binding;(0,o.updateOneTimeBinding)(i)}},t}(s.AbstractRepeater),v=d(g.prototype,"items",[i.bindable],{enumerable:!0,initializer:null}),m=d(g.prototype,"local",[i.bindable],{enumerable:!0,initializer:null}),_=d(g.prototype,"key",[i.bindable],{enumerable:!0,initializer:null}),y=d(g.prototype,"value",[i.bindable],{enumerable:!0,initializer:null}),f=g))||f)||f)||f)}),define("aurelia-templating-resources/repeat-strategy-locator",["exports","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],function(e,t,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatStrategyLocator=void 0;e.RepeatStrategyLocator=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy(function(e){return null===e||void 0===e},new t.NullRepeatStrategy),this.addStrategy(function(e){return e instanceof Array},new n.ArrayRepeatStrategy),this.addStrategy(function(e){return e instanceof Map},new i.MapRepeatStrategy),this.addStrategy(function(e){return e instanceof Set},new r.SetRepeatStrategy),this.addStrategy(function(e){return"number"==typeof e},new o.NumberRepeatStrategy)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,n=0,i=t.length;n<i;++n)if(t[n](e))return this.strategies[n];return null},e}()}),define("aurelia-templating-resources/null-repeat-strategy",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NullRepeatStrategy=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}()}),define("aurelia-templating-resources/array-repeat-strategy",["exports","./repeat-utilities","aurelia-binding"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayRepeatStrategy=void 0;e.ArrayRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(e,n){var i=this,r=n.length;if(!n||0===r)return void e.removeAllViews(!0,!e.viewsRequireLifecycle);var o=e.views(),a=o.length;return 0===a?void this._standardProcessInstanceChanged(e,n):void(e.viewsRequireLifecycle?!function(){for(var s=o.slice(0),u=e.local,l=e.matcher(),c=[],d=[],p=0;p<a;p++){var h=s[p],f=h.bindingContext[u];(0,t.indexOf)(n,f,l)===-1?d.push(h):c.push(f)}var g=void 0,v=void 0;c.length>0?(v=e.removeViews(d,!0,!e.viewsRequireLifecycle),g=function(){for(var a=0;a<r;a++){var s=n[a],u=(0,t.indexOf)(c,s,l,a),d=void 0;if(u===-1){var p=(0,t.createFullOverrideContext)(e,n[a],a,r);e.insertView(a,p.bindingContext,p),c.splice(a,0,void 0)}else u===a?(d=o[u],c[u]=void 0):(d=o[u],e.moveView(u,a),c.splice(u,1),c.splice(a,0,void 0));d&&(0,t.updateOverrideContext)(d.overrideContext,a,r)}i._inPlaceProcessItems(e,n)}):(v=e.removeAllViews(!0,!e.viewsRequireLifecycle),g=function(){return i._standardProcessInstanceChanged(e,n)}),v instanceof Promise?v.then(g):g()}():this._inPlaceProcessItems(e,n))},e.prototype._standardProcessInstanceChanged=function(e,n){for(var i=0,r=n.length;i<r;i++){var o=(0,t.createFullOverrideContext)(e,n[i],i,r);e.addView(o.bindingContext,o)}},e.prototype._inPlaceProcessItems=function(e,n){for(var i=n.length,r=e.viewCount();r>i;)r--,e.removeView(r,!0,!e.viewsRequireLifecycle);for(var o=e.local,a=0;a<r;a++){var s=e.view(a),u=a===i-1,l=0!==a&&!u;s.bindingContext[o]===n[a]&&s.overrideContext.$middle===l&&s.overrideContext.$last===u||(s.bindingContext[o]=n[a],s.overrideContext.$middle=l,s.overrideContext.$last=u,e.updateBindings(s))}for(var c=r;c<i;c++){var d=(0,t.createFullOverrideContext)(e,n[c],c,i);e.addView(d.bindingContext,d)}},e.prototype.instanceMutated=function(e,t,i){var r=this;if(e.__queuedSplices){for(var o=0,a=i.length;o<a;++o){var s=i[o],u=s.index,l=s.removed,c=s.addedCount;(0,n.mergeSplice)(e.__queuedSplices,u,l,c)}return void(e.__array=t.slice(0))}var d=this._runSplices(e,t.slice(0),i);d instanceof Promise&&!function(){var t=e.__queuedSplices=[],n=function n(){if(!t.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var i=r._runSplices(e,e.__array,t)||Promise.resolve();t=e.__queuedSplices=[],i.then(n)};d.then(n)}()},e.prototype._runSplices=function(e,n,i){for(var r=this,o=0,a=[],s=0,u=i.length;s<u;++s){for(var l=i[s],c=l.removed,d=0,p=c.length;d<p;++d){var h=e.removeView(l.index+o+a.length,!0);h instanceof Promise&&a.push(h)}o-=l.addedCount}if(a.length>0)return Promise.all(a).then(function(){var o=r._handleAddedSplices(e,n,i);(0,t.updateOverrideContexts)(e.views(),o)});var f=this._handleAddedSplices(e,n,i);(0,t.updateOverrideContexts)(e.views(),f)},e.prototype._handleAddedSplices=function(e,n,i){for(var r=void 0,o=void 0,a=n.length,s=0,u=i.length;s<u;++s){var l=i[s],c=r=l.index,d=l.index+l.addedCount;for(("undefined"==typeof o||null===o||o>l.index)&&(o=r);c<d;++c){var p=(0,t.createFullOverrideContext)(e,n[c],c,a);e.insertView(c,p.bindingContext,p)}}return o},e}()}),define("aurelia-templating-resources/repeat-utilities",["exports","aurelia-binding"],function(e,t){"use strict";function n(e,t){var n=e.length;for(t>0&&(t-=1);t<n;++t)r(e[t].overrideContext,t,n)}function i(e,n,i,o,a){var s={},u=(0,t.createOverrideContext)(s,e.scope.overrideContext);return"undefined"!=typeof a?(s[e.key]=a,s[e.value]=n):s[e.local]=n,r(u,i,o),u}function r(e,t,n){var i=0===t,r=t===n-1,o=t%2===0;e.$index=t,e.$first=i,e.$last=r,e.$middle=!(i||r),e.$odd=!o,e.$even=o}function o(e,t){return e.behaviorInstructions.filter(function(e){return e.originalAttrName===t})[0].attributes.items.sourceExpression}function a(e){for(var n=!1;e instanceof t.BindingBehavior;)e=e.expression;for(;e instanceof t.ValueConverter;)e=e.expression,n=!0;return n?e:null}function s(e){for(;e instanceof t.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1}function u(e){e.call&&e.mode===c?e.call(t.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()}function l(e,t,n,i){if(!n)return e.indexOf(t);for(var r=e.length,o=i||0;o<r;o++)if(n(e[o],t))return o;return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.updateOverrideContexts=n,e.createFullOverrideContext=i,e.updateOverrideContext=r,e.getItemsSourceExpression=o,e.unwrapExpression=a,e.isOneTime=s,e.updateOneTimeBinding=u,e.indexOf=l;var c=t.bindingMode.oneTime}),define("aurelia-templating-resources/map-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapRepeatStrategy=void 0;e.MapRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);return i instanceof Promise?void i.then(function(){return n._standardProcessItems(e,t)}):void this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=0,r=void 0;n.forEach(function(o,a){r=(0,t.createFullOverrideContext)(e,o,i,n.size,a),e.addView(r.bindingContext,r),++i})},e.prototype.instanceMutated=function(e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=[],d=void 0;for(o=0,a=i.length;o<a;++o)switch(l=i[o],r=l.key,l.type){case"update":u=this._getViewIndexByKey(e,r),d=e.removeView(u,!0,!e.viewsRequireLifecycle),d instanceof Promise&&c.push(d),s=(0,t.createFullOverrideContext)(e,n.get(r),u,n.size,r),e.insertView(u,s.bindingContext,s);break;case"add":s=(0,t.createFullOverrideContext)(e,n.get(r),n.size-1,n.size,r),e.insertView(n.size-1,s.bindingContext,s);break;case"delete":if(void 0===l.oldValue)return;u=this._getViewIndexByKey(e,r),d=e.removeView(u,!0,!e.viewsRequireLifecycle),d instanceof Promise&&c.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}c.length>0?Promise.all(c).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var n=void 0,i=void 0,r=void 0;for(n=0,i=e.viewCount();n<i;++n)if(r=e.view(n),r.bindingContext[e.key]===t)return n},e}()}),define("aurelia-templating-resources/set-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetRepeatStrategy=void 0;e.SetRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);return i instanceof Promise?void i.then(function(){return n._standardProcessItems(e,t)}):void this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=0,r=void 0;n.forEach(function(o){r=(0,t.createFullOverrideContext)(e,o,i,n.size),e.addView(r.bindingContext,r),++i})},e.prototype.instanceMutated=function(e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=[],d=void 0;for(o=0,a=i.length;o<a;++o)switch(l=i[o],r=l.value,l.type){case"add":s=(0,t.createFullOverrideContext)(e,r,n.size-1,n.size),e.insertView(n.size-1,s.bindingContext,s);break;case"delete":u=this._getViewIndexByValue(e,r),d=e.removeView(u,!0,!e.viewsRequireLifecycle),d instanceof Promise&&c.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}c.length>0?Promise.all(c).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var n=void 0,i=void 0,r=void 0;for(n=0,i=e.viewCount();n<i;++n)if(r=e.view(n),r.bindingContext[e.local]===t)return n},e}()}),define("aurelia-templating-resources/number-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberRepeatStrategy=void 0;e.NumberRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);return i instanceof Promise?void i.then(function(){return n._standardProcessItems(e,t)}):void this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=e.viewCount(),r=void 0,o=void 0,a=void 0,s=void 0;if(n=Math.floor(n),s=i-n,s>0)for(s>i&&(s=i),r=0,o=s;r<o;++r)e.removeView(i-(r+1),!0,!e.viewsRequireLifecycle);else{for(r=i,o=n;r<o;++r)a=(0,t.createFullOverrideContext)(e,r,r,o),e.addView(a.bindingContext,a);(0,t.updateOverrideContexts)(e.views(),0)}},e}()}),define("aurelia-templating-resources/analyze-view-factory",["exports"],function(e){"use strict";function t(e){var t=e.type,n=null!==t.elementName?t.elementName:t.attributeName;return r.indexOf(n)===-1&&(t.handlesAttached||t.handlesBind||t.handlesCreated||t.handlesDetached||t.handlesUnbind)||t.viewFactory&&i(t.viewFactory)||e.viewFactory&&i(e.viewFactory)}function n(e){var n=e.behaviorInstructions;if(n)for(var r=n.length;r--;)if(t(n[r]))return!0;return e.viewFactory&&i(e.viewFactory)}function i(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,
e.viewFactory)return e._viewsRequireLifecycle=i(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0,!0;for(var t in e.instructions)if(n(e.instructions[t]))return e._viewsRequireLifecycle=!0,!0;return e._viewsRequireLifecycle=!1,!1}Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=i;var r=e.lifecycleOptionalBehaviors=["focus","if","repeat","show","with"]}),define("aurelia-templating-resources/abstract-repeater",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractRepeater=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,n){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}()}),define("aurelia-templating-resources/show",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Show=void 0;var o,a,s;e.Show=(o=(0,n.customAttribute)("show"),a=(0,t.inject)(i.DOM.Element,n.Animator,t.Optional.of(i.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,r.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.removeClass(this.element,r.aureliaHideClassName):this.animator.addClass(this.element,r.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/aurelia-hide-style",["exports","aurelia-pal"],function(e,t){"use strict";function n(){t.DOM.injectStyles(o)}function i(e){t.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,t.DOM.injectStyles(o,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.aureliaHideClassName=void 0,e.injectAureliaHideStyleAtHead=n,e.injectAureliaHideStyleAtBoundary=i;var r=e.aureliaHideClassName="aurelia-hide",o="."+r+" { display:none !important; }"}),define("aurelia-templating-resources/hide",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;var o,a,s;e.Hide=(o=(0,n.customAttribute)("hide"),a=(0,t.inject)(i.DOM.Element,n.Animator,t.Optional.of(i.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,r.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,r.aureliaHideClassName):this.animator.removeClass(this.element,r.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/sanitize-html",["exports","aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],function(e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizeHTMLValueConverter=void 0;var r,o,a;e.SanitizeHTMLValueConverter=(r=(0,t.valueConverter)("sanitizeHTML"),o=(0,n.inject)(i.HTMLSanitizer),r(a=o(a=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null===e||void 0===e?null:this.sanitizer.sanitize(e)},e}())||a)||a)}),define("aurelia-templating-resources/html-sanitizer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;e.HTMLSanitizer=function(){function e(){}return e.prototype.sanitize=function(e){return e.replace(t,"")},e}()}),define("aurelia-templating-resources/replaceable",["exports","aurelia-dependency-injection","aurelia-templating"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Replaceable=void 0;var i,r,o;e.Replaceable=(i=(0,n.customAttribute)("replaceable"),r=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),i(o=(0,n.templateController)(o=r(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e}())||o)||o)||o)}),define("aurelia-templating-resources/focus",["exports","aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],function(e,t,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;var a,s,u;e.Focus=(a=(0,t.customAttribute)("focus",n.bindingMode.twoWay),s=(0,i.inject)(o.DOM.Element,r.TaskQueue),a(u=s(u=function(){function e(e,t){var n=this;this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1,this.focusListener=function(e){n.value=!0},this.blurListener=function(e){o.DOM.activeElement!==n.element&&(n.value=!1)}}return e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask(function(){e.value&&e.element.focus()}):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this.focusListener),this.element.addEventListener("blur",this.blurListener)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this.focusListener),this.element.removeEventListener("blur",this.blurListener)},e}())||u)||u)}),define("aurelia-templating-resources/css-resource",["exports","aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],function(e,t,n,i,r,o){"use strict";function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if("string"!=typeof t)throw new Error("Failed loading required CSS file: "+e);return t.replace(c,function(t,n){var i=n.charAt(0);return"'"!==i&&'"'!==i||(n=n.substr(1,n.length-2)),"url('"+(0,r.relativeToFile)(n,e)+"')"})}function l(e){var n,i,r=(n=(0,t.resource)(new d(e)),n(i=function(e){function t(){return a(this,e.apply(this,arguments))}return s(t,e),t}(p))||i);return r}Object.defineProperty(e,"__esModule",{value:!0}),e._createCSSResource=l;var c=/url\((?!['"]data)([^)]+)\)/gi,d=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(n.Loader).loadText(this.address).catch(function(e){return null}).then(function(e){e=u(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,o.DOM.injectStyles(e))})},e}(),p=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,n){if(n.targetShadowDOM)o.DOM.injectStyles(this.css,e,!0);else if(o.FEATURE.scopedCSS){var i=o.DOM.injectStyles(this.css,e,!0);i.setAttribute("scoped","scoped")}else this.owner._alreadyGloballyInjected||(o.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}()}),define("aurelia-templating-resources/attr-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrBindingBehavior=void 0;e.AttrBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,n){e.targetObserver=new t.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e}()}),define("aurelia-templating-resources/binding-mode-behaviors",["exports","aurelia-binding","aurelia-metadata"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=void 0;var i,r,o,a,s,u,l={bind:function(e,t,n){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}};e.OneTimeBindingBehavior=(i=(0,n.mixin)(l),i(r=function(){this.mode=t.bindingMode.oneTime})||r),e.OneWayBindingBehavior=(o=(0,n.mixin)(l),o(a=function(){this.mode=t.bindingMode.oneWay})||a),e.TwoWayBindingBehavior=(s=(0,n.mixin)(l),s(u=function(){this.mode=t.bindingMode.twoWay})||u)}),define("aurelia-templating-resources/throttle-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function n(e){var t=this,n=this.throttleState,i=+new Date-n.last;return i>=n.delay?(clearTimeout(n.timeoutId),n.timeoutId=null,n.last=+new Date,void this.throttledMethod(e)):(n.newValue=e,void(null===n.timeoutId&&(n.timeoutId=setTimeout(function(){n.timeoutId=null,n.last=+new Date,t.throttledMethod(n.newValue)},n.delay-i))))}Object.defineProperty(e,"__esModule",{value:!0}),e.ThrottleBindingBehavior=void 0;e.ThrottleBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.throttledMethod=e[o],e.throttledMethod.originalName=o,e[o]=n,e.throttleState={delay:r,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){var n=e.throttledMethod.originalName;e[n]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e}()}),define("aurelia-templating-resources/debounce-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function n(e){var t=this,n=this.debounceState;return n.immediate?(n.immediate=!1,void this.debouncedMethod(e)):(clearTimeout(n.timeoutId),void(n.timeoutId=setTimeout(function(){return t.debouncedMethod(e)},n.delay)))}Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceBindingBehavior=void 0;e.DebounceBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.debouncedMethod=e[o],e.debouncedMethod.originalName=o,e[o]=n,e.debounceState={delay:r,timeoutId:null,immediate:"updateTarget"===o}},e.prototype.unbind=function(e,t){var n=e.debouncedMethod.originalName;e[n]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e}()}),define("aurelia-templating-resources/signal-binding-behavior",["exports","./binding-signaler"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignalBindingBehavior=void 0;e.SignalBindingBehavior=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[t.BindingSignaler]},e.prototype.bind=function(e,t){if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var n=arguments[2],i=this.signals[n]||(this.signals[n]=[]);i.push(e),e.signalName=n}else{if(!(arguments.length>3))throw new Error("Signal name is required.");for(var r=Array.prototype.slice.call(arguments,2),o=r.length;o--;){var a=r[o],s=this.signals[a]||(this.signals[a]=[]);s.push(e)}e.signalName=r}},e.prototype.unbind=function(e,t){var n=e.signalName;if(e.signalName=null,Array.isArray(n))for(var i=n,r=i.length;r--;){var o=i[r],a=this.signals[o];a.splice(a.indexOf(e),1)}else{var s=this.signals[n];s.splice(s.indexOf(e),1)}},e}()}),define("aurelia-templating-resources/binding-signaler",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingSignaler=void 0;e.BindingSignaler=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var n=this.signals[e];if(n)for(var i=n.length;i--;)n[i].call(t.sourceContext)},e}()}),define("aurelia-templating-resources/update-trigger-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTriggerBindingBehavior=void 0;var n,i,r="The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">",o="The updateTrigger binding behavior can only be applied to two-way bindings on input/select elements.";e.UpdateTriggerBindingBehavior=(i=n=function(){function e(e){this.eventManager=e}return e.prototype.bind=function(e,n){for(var i=arguments.length,a=Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];if(0===a.length)throw new Error(r);if(e.mode!==t.bindingMode.twoWay)throw new Error(o);var u=e.observerLocator.getObserver(e.target,e.targetProperty);if(!u.handler)throw new Error(o);e.targetObserver=u,u.originalHandler=e.targetObserver.handler;var l=this.eventManager.createElementHandler(a);u.handler=l},e.prototype.unbind=function(e,t){e.targetObserver.handler=e.targetObserver.originalHandler,e.targetObserver.originalHandler=null},e}(),n.inject=[t.EventManager],i)}),define("aurelia-templating-resources/html-resource-plugin",["exports","aurelia-templating","./dynamic-element"],function(e,t,n){"use strict";function i(e){return/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase()}function r(e){var r=e.container.get(t.ViewEngine),o=e.aurelia.loader;r.addResourcePlugin(".html",{fetch:function(e){return o.loadTemplate(e).then(function(t){var r,o=t.template.getAttribute("bindable"),a=i(e);return o?(o=o.split(",").map(function(e){return e.trim()}),t.template.removeAttribute("bindable")):o=[],r={},r[a]=(0,n._createDynamicElement)(a,e,o),r})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.getElementName=i,e.configure=r}),define("aurelia-templating-resources/dynamic-element",["exports","aurelia-templating"],function(e,t){"use strict";function n(e,n,i){for(var r,o,a,s=(r=(0,t.customElement)(e),o=(0,t.useView)(n),r(a=o(a=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||a)||a),u=0,l=i.length;u<l;++u)(0,t.bindable)(i[u])(s);return s}Object.defineProperty(e,"__esModule",{value:!0}),e._createDynamicElement=n}),define("aurelia-i18n/i18n",["exports","i18next","aurelia-pal","aurelia-event-aggregator","aurelia-templating-resources"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.I18N=void 0;var a,s,u=o(t);e.I18N=(s=a=function(){function e(e,t){var n=this;this.globalVars={},this.params={},this.i18nextDefered={resolve:null,promise:null},this.i18next=u.default,this.ea=e,this.Intl=window.Intl,this.signaler=t,this.i18nextDefered.promise=new Promise(function(e){return n.i18nextDefered.resolve=e})}return e.prototype.setup=function(e){var t=this,n={compatibilityAPI:"v1",compatibilityJSON:"v1",lng:"en",attributes:["t","i18n"],fallbackLng:"en",debug:!1};return u.default.init(e||n,function(e,n){u.default.options.attributes instanceof String&&(u.default.options.attributes=[u.default.options.attributes]),t.i18nextDefered.resolve(t.i18next)}),this.i18nextDefered.promise},e.prototype.i18nextReady=function(){return this.i18nextDefered.promise},e.prototype.setLocale=function(e){var t=this;return new Promise(function(n){var i=t.getLocale();t.i18next.changeLanguage(e,function(r,o){t.ea.publish("i18n:locale:changed",{oldValue:i,newValue:e}),t.signaler.signal("aurelia-translation-signal"),n(o)})})},e.prototype.getLocale=function(){return this.i18next.language},e.prototype.nf=function(e,t){return new this.Intl.NumberFormat(t||this.getLocale(),e||{})},e.prototype.uf=function(e,t){var n=this.nf({},t||this.getLocale()),i=n.format(1e4/3),r=i[1],o=i[5],a=e.replace(r,"").replace(/[^\d.,-]/g,"").replace(o,".");return Number(a)},e.prototype.df=function(e,t){return new this.Intl.DateTimeFormat(t||this.getLocale(),e)},e.prototype.tr=function(e,t){var n=this.globalVars;return void 0!==t&&(n=Object.assign(Object.assign({},this.globalVars),t)),this.i18next.t(e,n)},e.prototype.registerGlobalVariable=function(e,t){this.globalVars[e]=t},e.prototype.unregisterGlobalVariable=function(e){delete this.globalVars[e]},e.prototype.updateTranslations=function(e){if(e&&e.querySelectorAll){var t=void 0,n=void 0,i=[].concat(this.i18next.options.attributes);for(t=0,n=i.length;t<n;t++)i[t]="["+i[t]+"]";i=i.join(",");var r=e.querySelectorAll(i);for(t=0,n=r.length;t<n;t++){for(var o=r[t],a=void 0,s=0,u=this.i18next.options.attributes.length;s<u&&!(a=o.getAttribute(this.i18next.options.attributes[s]));s++);a&&this.updateValue(o,a)}}},e.prototype.updateValue=function(e,t,i){if(null!==t&&void 0!==t)for(var r=t.split(";"),o=r.length;o--;){var a=r[o],s=/\[([a-z\-]*)\]/gi,u=void 0,l="text";for("IMG"===e.nodeName&&(l="src");null!==(u=s.exec(a));)u.index===s.lastIndex&&s.lastIndex++,u&&(a=a.replace(u[0],""),l=u[1]);e._textContent||(e._textContent=e.textContent),e._innerHTML||(e._innerHTML=e.innerHTML);var c=l.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});switch(l){case"text":var d=n.DOM.createTextNode(this.tr(a,i));for(e._newChild&&e.removeChild(e._newChild),e._newChild=d;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(e._newChild);break;case"prepend":var p=n.DOM.createElement("div");p.innerHTML=this.tr(a,i);for(var h=e.childNodes.length-1;h>=0;h--)e.childNodes[h]._prepended&&e.removeChild(e.childNodes[h]);for(var f=p.childNodes.length-1;f>=0;f--)p.childNodes[f]._prepended=!0,e.firstChild?e.insertBefore(p.childNodes[f],e.firstChild):e.appendChild(p.childNodes[f]);break;case"append":var g=n.DOM.createElement("div");g.innerHTML=this.tr(a,i);for(var v=e.childNodes.length-1;v>=0;v--)e.childNodes[v]._appended&&e.removeChild(e.childNodes[v]);for(;g.firstChild;)g.firstChild._appended=!0,e.appendChild(g.firstChild);break;case"html":e.innerHTML=this.tr(a,i);break;default:e.au&&e.au.controller&&e.au.controller.viewModel&&c in e.au.controller.viewModel?e.au.controller.viewModel[c]=this.tr(a,i):e.setAttribute(l,this.tr(a,i))}}},e}(),a.inject=[i.EventAggregator,r.BindingSignaler],s)}),define("aurelia-i18n/relativeTime",["exports","./i18n","./defaultTranslations/relative.time","aurelia-event-aggregator"],function(e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelativeTime=void 0;e.RelativeTime=function(){function e(e,t){var n=this;this.service=e,this.ea=t,this.service.i18nextReady().then(function(){n.setup()}),this.ea.subscribe("i18n:locale:changed",function(e){n.setup(e)})}return e.inject=function(){return[t.I18N,i.EventAggregator]},e.prototype.setup=function(e){var t=n.translations.default||n.translations,i=e&&e.newValue?e.newValue:this.service.getLocale(),r=this.service.i18next.fallbackLng,o=0;if((o=i.indexOf("-"))>=0){var a=i.substring(0,o);t[a]&&this.addTranslationResource(a,t[a].translation)}t[i]&&this.addTranslationResource(i,t[i].translation),t[r]&&this.addTranslationResource(i,t[r].translation)},e.prototype.addTranslationResource=function(e,t){var n=this.service.i18next.options;if(n.interpolation&&"__"!==n.interpolation.prefix||"__"!==n.interpolation.suffix)for(var i in t)t[i]=t[i].replace("__count__",n.interpolation.prefix+"count"+n.interpolation.suffix);this.service.i18next.addResources(e,n.defaultNS,t)},e.prototype.getRelativeTime=function(e){var t=new Date,n=t.getTime()-e.getTime(),i=this.getTimeDiffDescription(n,"year",31104e6);return i||(i=this.getTimeDiffDescription(n,"month",2592e6),i||(i=this.getTimeDiffDescription(n,"day",864e5),i||(i=this.getTimeDiffDescription(n,"hour",36e5),i||(i=this.getTimeDiffDescription(n,"minute",6e4),i||(i=this.getTimeDiffDescription(n,"second",1e3),i||(i=this.service.tr("now"))))))),i},e.prototype.getTimeDiffDescription=function(e,t,n){var i=(e/n).toFixed(0);if(i>0)return this.service.tr(t,{count:parseInt(i,10),context:"ago"});if(i<0){var r=Math.abs(i);return this.service.tr(t,{count:r,context:"in"})}return null},e}()}),define("aurelia-i18n/defaultTranslations/relative.time",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.translations={ar:{translation:{now:"الآن",second_ago:"منذ __count__ ثانية",second_ago_plural:"منذ __count__ ثواني",second_in:"في __count__ ثانية",second_in_plural:"في __count__ ثواني",minute_ago:"منذ __count__ دقيقة",minute_ago_plural:"منذ __count__ دقائق",minute_in:"في __count__ دقيقة",minute_in_plural:"في __count__ دقائق",hour_ago:"منذ __count__ ساعة",hour_ago_plural:"منذ __count__ ساعات",hour_in:"في __count__ ساعة",hour_in_plural:"في __count__ ساعات",day_ago:"منذ __count__ يوم",day_ago_plural:"منذ __count__ أيام",day_in:"في __count__ يوم",day_in_plural:"في __count__ أيام"}},en:{translation:{now:"just now",second_ago:"__count__ second ago",second_ago_plural:"__count__ seconds ago",second_in:"in __count__ second",second_in_plural:"in __count__ seconds",minute_ago:"__count__ minute ago",minute_ago_plural:"__count__ minutes ago",minute_in:"in __count__ minute",minute_in_plural:"in __count__ minutes",hour_ago:"__count__ hour ago",hour_ago_plural:"__count__ hours ago",hour_in:"in __count__ hour",hour_in_plural:"in __count__ hours",day_ago:"__count__ day ago",day_ago_plural:"__count__ days ago",day_in:"in __count__ day",day_in_plural:"in __count__ days",month_ago:"__count__ month ago",month_ago_plural:"__count__ months ago",month_in:"in __count__ month",month_in_plural:"in __count__ months",year_ago:"__count__ year ago",year_ago_plural:"__count__ years ago",year_in:"in __count__ year",year_in_plural:"in __count__ years"}},it:{translation:{now:"adesso",second_ago:"__count__ secondo fa",second_ago_plural:"__count__ secondi fa",second_in:"in __count__ secondo",second_in_plural:"in __count__ secondi",minute_ago:"__count__ minuto fa",minute_ago_plural:"__count__ minuti fa",minute_in:"in __count__ minuto",minute_in_plural:"in __count__ minuti",hour_ago:"__count__ ora fa",hour_ago_plural:"__count__ ore fa",hour_in:"in __count__ ora",hour_in_plural:"in __count__ ore",day_ago:"__count__ giorno fa",day_ago_plural:"__count__ giorni fa",day_in:"in __count__ giorno",day_in_plural:"in __count__ giorni",month_ago:"__count__ mese fa",month_ago_plural:"__count__ mesi fa",month_in:"in __count__ mese",month_in_plural:"in __count__ mesi",year_ago:"__count__ anno fa",year_ago_plural:"__count__ anni fa",year_in:"in __count__ anno",year_in_plural:"in __count__ anni"}},de:{translation:{now:"jetzt gerade",second_ago:"vor __count__ Sekunde",second_ago_plural:"vor __count__ Sekunden",second_in:"in __count__ Sekunde",second_in_plural:"in __count__ Sekunden",minute_ago:"vor __count__ Minute",minute_ago_plural:"vor __count__ Minuten",minute_in:"in __count__ Minute",minute_in_plural:"in __count__ Minuten",hour_ago:"vor __count__ Stunde",hour_ago_plural:"vor __count__ Stunden",hour_in:"in __count__ Stunde",hour_in_plural:"in __count__ Stunden",day_ago:"vor __count__ Tag",day_ago_plural:"vor __count__ Tagen",day_in:"in __count__ Tag",day_in_plural:"in __count__ Tagen",month_ago:"vor __count__ Monat",month_ago_plural:"vor __count__ Monaten",month_in:"in __count__ Monat",month_in_plural:"in __count__ Monaten",year_ago:"vor __count__ Jahr",year_ago_plural:"vor __count__ Jahren",year_in:"in __count__ Jahr",year_in_plural:"in __count__ Jahren"}},nl:{translation:{now:"zonet",second_ago:"__count__ seconde geleden",second_ago_plural:"__count__ seconden geleden",second_in:"in __count__ seconde",second_in_plural:"in __count__ seconden",minute_ago:"__count__ minuut geleden",minute_ago_plural:"__count__ minuten geleden",minute_in:"in __count__ minuut",minute_in_plural:"in __count__ minuten",hour_ago:"__count__ uur geleden",hour_ago_plural:"__count__ uren geleden",hour_in:"in __count__ uur",hour_in_plural:"in __count__ uren",day_ago:"__count__ dag geleden",day_ago_plural:"__count__ dagen geleden",day_in:"in __count__ dag",day_in_plural:"in __count__ dagen",month_ago:"__count__ maand geleden",month_ago_plural:"__count__ maanden geleden",month_in:"in __count__ maand",month_in_plural:"in __count__ maanden",year_ago:"__count__ jaar geleden",year_ago_plural:"__count__ jaren geleden",year_in:"in __count__ jaar",year_in_plural:"in __count__ jaren"}},fr:{translation:{now:"maintenant",second_ago:"__count__ seconde plus tôt",second_ago_plural:"__count__ secondes plus tôt",second_in:"en __count__ seconde",second_in_plural:"en __count__ secondes",minute_ago:"__count__ minute plus tôt",minute_ago_plural:"__count__ minutes plus tôt",minute_in:"en __count__ minute",minute_in_plural:"en __count__ minutes",hour_ago:"__count__ heure plus tôt",hour_ago_plural:"__count__ heures plus tôt",hour_in:"en __count__ heure",hour_in_plural:"en __count__ heures",day_ago:"__count__ jour plus tôt",day_ago_plural:"__count__ jours plus tôt",day_in:"en __count__ jour",day_in_plural:"en __count__ jours"}},th:{translation:{now:"เมื่อกี้",second_ago:"__count__ วินาที ที่ผ่านมา",second_ago_plural:"__count__ วินาที ที่ผ่านมา",second_in:"อีก __count__ วินาที",second_in_plural:"อีก __count__ วินาที",minute_ago:"__count__ นาที ที่ผ่านมา",minute_ago_plural:"__count__ นาที ที่ผ่านมา",minute_in:"อีก __count__ นาที",minute_in_plural:"อีก __count__ นาที",hour_ago:"__count__ ชั่วโมง ที่ผ่านมา",hour_ago_plural:"__count__ ชั่วโมง ที่ผ่านมา",hour_in:"อีก __count__ ชั่วโมง",hour_in_plural:"อีก __count__ ชั่วโมง",day_ago:"__count__ วัน ที่ผ่านมา",day_ago_plural:"__count__ วัน ที่ผ่านมา",day_in:"อีก __count__ วัน",day_in_plural:"อีก __count__ วัน"}},sv:{translation:{now:"just nu",second_ago:"__count__ sekund sedan",second_ago_plural:"__count__ sekunder sedan",second_in:"om __count__ sekund",second_in_plural:"om __count__ sekunder",minute_ago:"__count__ minut sedan",minute_ago_plural:"__count__ minuter sedan",minute_in:"om __count__ minut",minute_in_plural:"om __count__ minuter",hour_ago:"__count__ timme sedan",hour_ago_plural:"__count__ timmar sedan",hour_in:"om __count__ timme",hour_in_plural:"om __count__ timmar",day_ago:"__count__ dag sedan",day_ago_plural:"__count__ dagar sedan",day_in:"om __count__ dag",day_in_plural:"om __count__ dagar"}},da:{translation:{now:"lige nu",second_ago:"__count__ sekunder siden",second_ago_plural:"__count__ sekunder siden",second_in:"om __count__ sekund",second_in_plural:"om __count__ sekunder",minute_ago:"__count__ minut siden",minute_ago_plural:"__count__ minutter siden",minute_in:"om __count__ minut",minute_in_plural:"om __count__ minutter",hour_ago:"__count__ time siden",hour_ago_plural:"__count__ timer siden",hour_in:"om __count__ time",hour_in_plural:"om __count__ timer",day_ago:"__count__ dag siden",day_ago_plural:"__count__ dage siden",day_in:"om __count__ dag",day_in_plural:"om __count__ dage"}},no:{translation:{now:"akkurat nå",second_ago:"__count__ sekund siden",second_ago_plural:"__count__ sekunder siden",second_in:"om __count__ sekund",second_in_plural:"om __count__ sekunder",minute_ago:"__count__ minutt siden",minute_ago_plural:"__count__ minutter siden",minute_in:"om __count__ minutt",minute_in_plural:"om __count__ minutter",hour_ago:"__count__ time siden",hour_ago_plural:"__count__ timer siden",hour_in:"om __count__ time",hour_in_plural:"om __count__ timer",day_ago:"__count__ dag siden",day_ago_plural:"__count__ dager siden",day_in:"om __count__ dag",day_in_plural:"om __count__ dager"}},jp:{translation:{now:"たった今",second_ago:"__count__ 秒前",second_ago_plural:"__count__ 秒前",second_in:"あと __count__ 秒",second_in_plural:"あと __count__ 秒",minute_ago:"__count__ 分前",minute_ago_plural:"__count__ 分前",minute_in:"あと __count__ 分",minute_in_plural:"あと __count__ 分",hour_ago:"__count__ 時間前",hour_ago_plural:"__count__ 時間前",hour_in:"あと __count__ 時間",hour_in_plural:"あと __count__ 時間",day_ago:"__count__ 日間前",day_ago_plural:"__count__ 日間前",day_in:"あと __count__ 日間",day_in_plural:"あと __count__ 日間"}},pt:{translation:{now:"neste exato momento",second_ago:"__count__ segundo atrás",second_ago_plural:"__count__ segundos atrás",second_in:"em __count__ segundo",second_in_plural:"em __count__ segundos",minute_ago:"__count__ minuto atrás",minute_ago_plural:"__count__ minutos atrás",minute_in:"em __count__ minuto",minute_in_plural:"em __count__ minutos",hour_ago:"__count__ hora atrás",hour_ago_plural:"__count__ horas atrás",hour_in:"em __count__ hora",hour_in_plural:"em __count__ horas",day_ago:"__count__ dia atrás",day_ago_plural:"__count__ dias atrás",day_in:"em __count__ dia",day_in_plural:"em __count__ dias",month_ago:"__count__ mês atrás",month_ago_plural:"__count__ meses atrás",month_in:"em __count__ mês",month_in_plural:"em __count__ meses",year_ago:"__count__ ano atrás",year_ago_plural:"__count__ anos atrás",year_in:"em __count__ ano",year_in_plural:"em __count__ anos"}},zh:{translation:{now:"刚才",second_ago:"__count__ 秒钟前",second_ago_plural:"__count__ 秒钟前",second_in:"__count__ 秒内",second_in_plural:"__count__ 秒内",minute_ago:"__count__ 分钟前",minute_ago_plural:"__count__ 分钟前",minute_in:"__count__ 分钟内",minute_in_plural:"__count__ 分钟内",hour_ago:"__count__ 小时前",hour_ago_plural:"__count__ 小时前",hour_in:"__count__ 小时内",hour_in_plural:"__count__ 小时内",day_ago:"__count__ 天前",day_ago_plural:"__count__ 天前",day_in:"__count__ 天内",day_in_plural:"__count__ 天内",month_ago:"__count__ 月前",month_ago_plural:"__count__ 月前",month_in:"__count__ 月内",month_in_plural:"__count__ 月内",year_ago:"__count__ 年前",year_ago_plural:"__count__ 年前",year_in:"__count__ 年内",year_in_plural:"__count__ 年内"}},"zh-CN":{translation:{now:"刚才",second_ago:"__count__ 秒钟前",second_ago_plural:"__count__ 秒钟前",second_in:"__count__ 秒内",second_in_plural:"__count__ 秒内",minute_ago:"__count__ 分钟前",minute_ago_plural:"__count__ 分钟前",minute_in:"__count__ 分钟内",minute_in_plural:"__count__ 分钟内",hour_ago:"__count__ 小时前",hour_ago_plural:"__count__ 小时前",hour_in:"__count__ 小时内",hour_in_plural:"__count__ 小时内",day_ago:"__count__ 天前",day_ago_plural:"__count__ 天前",day_in:"__count__ 天内",day_in_plural:"__count__ 天内",month_ago:"__count__ 月前",month_ago_plural:"__count__ 月前",month_in:"__count__ 月内",month_in_plural:"__count__ 月内",year_ago:"__count__ 年前",year_ago_plural:"__count__ 年前",year_in:"__count__ 年内",year_in_plural:"__count__ 年内"}},"zh-HK":{translation:{now:"剛才",second_ago:"__count__ 秒鐘前",second_ago_plural:"__count__ 秒鐘前",second_in:"__count__ 秒內",second_in_plural:"__count__ 秒內",minute_ago:"__count__ 分鐘前",minute_ago_plural:"__count__ 分鐘前",minute_in:"__count__ 分鐘內",minute_in_plural:"__count__ 分鐘內",hour_ago:"__count__ 小時前",hour_ago_plural:"__count__ 小時前",hour_in:"__count__ 小時內",hour_in_plural:"__count__ 小時內",day_ago:"__count__ 天前",day_ago_plural:"__count__ 天前",day_in:"__count__ 天內",day_in_plural:"__count__ 天內",month_ago:"__count__ 月前",month_ago_plural:"__count__ 月前",month_in:"__count__ 月內",month_in_plural:"__count__ 月內",year_ago:"__count__ 年前",year_ago_plural:"__count__ 年前",year_in:"__count__ 年內",year_in_plural:"__count__ 年內"}},"zh-TW":{
translation:{now:"剛才",second_ago:"__count__ 秒鐘前",second_ago_plural:"__count__ 秒鐘前",second_in:"__count__ 秒內",second_in_plural:"__count__ 秒內",minute_ago:"__count__ 分鐘前",minute_ago_plural:"__count__ 分鐘前",minute_in:"__count__ 分鐘內",minute_in_plural:"__count__ 分鐘內",hour_ago:"__count__ 小時前",hour_ago_plural:"__count__ 小時前",hour_in:"__count__ 小時內",hour_in_plural:"__count__ 小時內",day_ago:"__count__ 天前",day_ago_plural:"__count__ 天前",day_in:"__count__ 天內",day_in_plural:"__count__ 天內",month_ago:"__count__ 月前",month_ago_plural:"__count__ 月前",month_in:"__count__ 月內",month_in_plural:"__count__ 月內",year_ago:"__count__ 年前",year_ago_plural:"__count__ 年前",year_in:"__count__ 年內",year_in_plural:"__count__ 年內"}}}}),define("aurelia-i18n/df",["exports","aurelia-logging","./i18n","aurelia-templating-resources","aurelia-binding"],function(e,t,n,i,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(e,"__esModule",{value:!0}),e.DfBindingBehavior=e.DfValueConverter=void 0;var a=o(t);e.DfValueConverter=function(){function e(e){this.service=e}return e.inject=function(){return[n.I18N]},e.prototype.toView=function(e,t,n,i){if(null===e||"undefined"==typeof e||"string"==typeof e&&""===e.trim())return e;if(t&&"function"==typeof t.format)return t.format(e);if(i){var r=a.getLogger("i18n");r.warn("This ValueConverter signature is depcrecated and will be removed in future releases. Please use the signature [dfOrOptions, locale]")}else i=this.service.df(t,n||this.service.getLocale());return"string"==typeof e&&isNaN(e)&&!Number.isInteger(e)&&(e=new Date(e)),i.format(e)},e}(),e.DfBindingBehavior=function(){function e(e){this.signalBindingBehavior=e}return e.inject=function(){return[i.SignalBindingBehavior]},e.prototype.bind=function(e,t){this.signalBindingBehavior.bind(e,t,"aurelia-translation-signal");var n=e.sourceExpression;if(!n.rewritten){n.rewritten=!0;var i=n.expression;n.expression=new r.ValueConverter(i,"df",n.args,[i].concat(n.args))}},e.prototype.unbind=function(e,t){this.signalBindingBehavior.unbind(e,t)},e}()}),define("aurelia-i18n/nf",["exports","aurelia-logging","./i18n","aurelia-templating-resources","aurelia-binding"],function(e,t,n,i,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(e,"__esModule",{value:!0}),e.NfBindingBehavior=e.NfValueConverter=void 0;var a=o(t);e.NfValueConverter=function(){function e(e){this.service=e}return e.inject=function(){return[n.I18N]},e.prototype.toView=function(e,t,n,i){if(null===e||"undefined"==typeof e||"string"==typeof e&&""===e.trim())return e;if(t&&"function"==typeof t.format)return t.format(e);if(i){var r=a.getLogger("i18n");r.warn("This ValueConverter signature is depcrecated and will be removed in future releases. Please use the signature [nfOrOptions, locale]")}else i=this.service.nf(t,n||this.service.getLocale());return i.format(e)},e}(),e.NfBindingBehavior=function(){function e(e){this.signalBindingBehavior=e}return e.inject=function(){return[i.SignalBindingBehavior]},e.prototype.bind=function(e,t){this.signalBindingBehavior.bind(e,t,"aurelia-translation-signal");var n=e.sourceExpression;if(!n.rewritten){n.rewritten=!0;var i=n.expression;n.expression=new r.ValueConverter(i,"nf",n.args,[i].concat(n.args))}},e.prototype.unbind=function(e,t){this.signalBindingBehavior.unbind(e,t)},e}()}),define("aurelia-i18n/rt",["exports","./relativeTime"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RtValueConverter=void 0;e.RtValueConverter=function(){function e(e){this.service=e}return e.inject=function(){return[t.RelativeTime]},e.prototype.toView=function(e){return null===e||"undefined"==typeof e||"string"==typeof e&&""===e.trim()?e:("string"==typeof e&&isNaN(e)&&!Number.isInteger(e)&&(e=new Date(e)),this.service.getRelativeTime(e))},e}()}),define("aurelia-i18n/t",["exports","./i18n","aurelia-event-aggregator","aurelia-templating","aurelia-templating-resources","aurelia-binding","./utils"],function(e,t,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TBindingBehavior=e.TCustomAttribute=e.TParamsCustomAttribute=e.TValueConverter=void 0;var s,u,l,c,d,p,h,f,g,v,m=(e.TValueConverter=function(){function e(e){this.service=e}return e.inject=function(){return[t.I18N]},e.prototype.toView=function(e,t){return this.service.tr(e,t)},e}(),e.TParamsCustomAttribute=(s=(0,i.customAttribute)("t-params"),s((c=l=function(){function e(e){this.element=e}return e.prototype.valueChanged=function(){},e}(),l.inject=[Element],u=c))||u));e.TCustomAttribute=(d=(0,i.customAttribute)("t"),d((f=h=function(){function e(e,t,n,i){this.element=e,this.service=t,this.ea=n,this.lazyParams=i}return e.prototype.bind=function(){var e=this;this.params=this.lazyParams(),this.params&&(this.params.valueChanged=function(t,n){e.paramsChanged(e.value,t,n)});var t=null!==this.params?this.params.value:void 0;this.subscription=this.ea.subscribe("i18n:locale:changed",function(){e.service.updateValue(e.element,e.value,null!==e.params?e.params.value:void 0)}),this.service.updateValue(this.element,this.value,t)},e.prototype.paramsChanged=function(e,t){this.service.updateValue(this.element,e,t)},e.prototype.valueChanged=function(e){var t=null!==this.params?this.params.value:void 0;this.service.updateValue(this.element,e,t)},e.prototype.unbind=function(){this.subscription&&this.subscription.dispose()},e}(),h.inject=[Element,t.I18N,n.EventAggregator,a.LazyOptional.of(m)],p=f))||p),e.TBindingBehavior=(v=g=function(){function e(e){this.signalBindingBehavior=e}return e.prototype.bind=function(e,t){this.signalBindingBehavior.bind(e,t,"aurelia-translation-signal");var n=e.sourceExpression;if(!n.rewritten){n.rewritten=!0;var i=n.expression;n.expression=new o.ValueConverter(i,"t",n.args,[i].concat(n.args))}},e.prototype.unbind=function(e,t){this.signalBindingBehavior.unbind(e,t)},e}(),g.inject=[r.SignalBindingBehavior],v)}),define("aurelia-i18n/utils",["exports","aurelia-dependency-injection"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LazyOptional=e.assignObjectToKeys=e.extend=void 0;var n,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=e.extend=function(e,t){for(var n in t)e[n]=t[n];return e};e.assignObjectToKeys=function e(t,n){if(void 0===n||null===n)return n;var i={};return Object.keys(n).map(function(a){"object"===r(n[a])?o(i,e(a,n[a])):i[""!==t?t+"."+a:a]=n[a]}),i},e.LazyOptional=(n=(0,t.resolver)(),n(i=function(){function e(e){this.key=e}return e.prototype.get=function(e){var t=this;return function(){return e.hasResolver(t.key,!1)?e.get(t.key):null}},e.of=function(t){return new e(t)},e}())||i)}),define("aurelia-i18n/base-i18n",["exports","./i18n","aurelia-event-aggregator"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseI18N=void 0;var i,r;e.BaseI18N=(r=i=function(){function e(e,t,n){var i=this;this.i18n=e,this.element=t,this.__i18nDisposer=n.subscribe("i18n:locale:changed",function(){i.i18n.updateTranslations(i.element)})}return e.prototype.attached=function(){this.i18n.updateTranslations(this.element)},e.prototype.detached=function(){this.__i18nDisposer.dispose()},e}(),i.inject=[t.I18N,Element,n.EventAggregator],r)}),define("aurelia-i18n/aurelia-i18n-loader",["exports"],function(e){"use strict";function t(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse}}function n(e){return s.call(u.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=e.Backend=(r=i=function(){function e(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.init(e,t),this.type="backend"}return e.with=function(e){return this.loader=e,this},e.prototype.init=function(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=e,this.options=n(i,this.options||{},t())},e.prototype.readMulti=function(e,t,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(e,t));var r=this.services.interpolator.interpolate(i,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(r,n)},e.prototype.read=function(e,t,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([e],[t]));var r=this.services.interpolator.interpolate(i,{lng:e,ns:t});this.loadUrl(r,n)},e.prototype.loadUrl=function(e,t){var n=this;this.constructor.loader.loadText(e).then(function(i){var r=void 0,o=void 0;try{r=n.options.parse(i,e)}catch(t){o="failed parsing "+e+" to json"}return o?t(o,!1):void t(null,r)},function(n){return t("failed loading "+e,!1)})},e.prototype.create=function(e,t,n,i){},e}(),i.loader=null,r);o.type="backend",e.default=o;var a=[],s=a.forEach,u=a.slice}),define("aurelia-auth/auth-service",["exports","aurelia-dependency-injection","aurelia-fetch-client","aurelia-event-aggregator","./authentication","./base-config","./oAuth1","./oAuth2","./auth-utilities"],function(e,t,n,i,r,o,a,s,u){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AuthService=void 0;var c,d,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.AuthService=(c=(0,t.inject)(n.HttpClient,r.Authentication,a.OAuth1,s.OAuth2,o.BaseConfig,i.EventAggregator),c(d=function(){function e(t,n,i,r,o,a){l(this,e),this.http=t,this.auth=n,this.oAuth1=i,this.oAuth2=r,this.config=o.current,this.tokenInterceptor=n.tokenInterceptor,this.eventAggregator=a}return e.prototype.getMe=function(){var e=this.auth.getProfileUrl();return this.http.fetch(e).then(u.status)},e.prototype.isAuthenticated=function(){return this.auth.isAuthenticated()},e.prototype.getTokenPayload=function(){return this.auth.getPayload()},e.prototype.setToken=function(e){this.auth.setToken(Object.defineProperty({},this.config.tokenName,{value:e}))},e.prototype.signup=function(e,t,i){var r=this,o=this.auth.getSignupUrl(),a=void 0;return a="object"===p(arguments[0])?arguments[0]:{displayName:e,email:t,password:i},this.http.fetch(o,{method:"post",body:(0,n.json)(a)}).then(u.status).then(function(e){return r.config.loginOnSignup?r.auth.setToken(e):r.config.signupRedirect&&(window.location.href=r.config.signupRedirect),r.eventAggregator.publish("auth:signup",e),e})},e.prototype.login=function(e,t){var i=this,r=this.auth.getLoginUrl(),o=void 0;return o="string"!=typeof arguments[1]?arguments[0]:{email:e,password:t},this.http.fetch(r,{method:"post",headers:"string"==typeof o?{"Content-Type":"application/x-www-form-urlencoded"}:{},body:"string"==typeof o?o:(0,n.json)(o)}).then(u.status).then(function(e){return i.auth.setToken(e),i.eventAggregator.publish("auth:login",e),e})},e.prototype.logout=function(e){var t=this;return this.auth.logout(e).then(function(){t.eventAggregator.publish("auth:logout")})},e.prototype.authenticate=function(e,t,n){var i=this,r=this.oAuth2;return"1.0"===this.config.providers[e].type&&(r=this.oAuth1),r.open(this.config.providers[e],n||{}).then(function(e){return i.auth.setToken(e,t),i.eventAggregator.publish("auth:authenticate",e),e})},e.prototype.unlink=function(e){var t=this,i=this.config.baseUrl?(0,u.joinUrl)(this.config.baseUrl,this.config.unlinkUrl):this.config.unlinkUrl;return"get"===this.config.unlinkMethod?this.http.fetch(i+e).then(u.status).then(function(e){return t.eventAggregator.publish("auth:unlink",e),e}):"post"===this.config.unlinkMethod?this.http.fetch(i,{method:"post",body:(0,n.json)(e)}).then(u.status).then(function(e){return t.eventAggregator.publish("auth:unlink",e),e}):void 0},e}())||d)}),define("aurelia-auth/authentication",["exports","aurelia-dependency-injection","./base-config","./storage","./auth-utilities"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Authentication=void 0;var a,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.Authentication=(a=(0,t.inject)(i.Storage,n.BaseConfig),a(s=function(){function e(t,n){o(this,e),this.storage=t,this.config=n.current,this.tokenName=this.config.tokenPrefix?this.config.tokenPrefix+"_"+this.config.tokenName:this.config.tokenName,this.idTokenName=this.config.tokenPrefix?this.config.tokenPrefix+"_"+this.config.idTokenName:this.config.idTokenName}return e.prototype.getLoginRoute=function(){return this.config.loginRoute},e.prototype.getLoginRedirect=function(){return this.initialUrl||this.config.loginRedirect},e.prototype.getLoginUrl=function(){return this.config.baseUrl?(0,r.joinUrl)(this.config.baseUrl,this.config.loginUrl):this.config.loginUrl},e.prototype.getSignupUrl=function(){return this.config.baseUrl?(0,r.joinUrl)(this.config.baseUrl,this.config.signupUrl):this.config.signupUrl},e.prototype.getProfileUrl=function(){return this.config.baseUrl?(0,r.joinUrl)(this.config.baseUrl,this.config.profileUrl):this.config.profileUrl},e.prototype.getToken=function(){return this.storage.get(this.tokenName)},e.prototype.getPayload=function(){var e=this.storage.get(this.tokenName);return this.decomposeToken(e)},e.prototype.decomposeToken=function(e){if(e&&3===e.split(".").length){var t=e.split(".")[1],n=t.replace(/-/g,"+").replace(/_/g,"/");try{return JSON.parse(decodeURIComponent(escape(window.atob(n))))}catch(e){return null}}},e.prototype.setInitialUrl=function(e){this.initialUrl=e},e.prototype.setToken=function(e,t){var n=e&&e[this.config.responseTokenProp],i=void 0;n&&((0,r.isObject)(n)&&(0,r.isObject)(n.data)?e=n:(0,r.isString)(n)&&(i=n)),!i&&e&&(i=this.config.tokenRoot&&e[this.config.tokenRoot]?e[this.config.tokenRoot][this.config.tokenName]:e[this.config.tokenName]),i&&this.storage.set(this.tokenName,i);var o=e&&e[this.config.responseIdTokenProp];o&&this.storage.set(this.idTokenName,o),this.config.loginRedirect&&!t?window.location.href=this.getLoginRedirect():t&&(0,r.isString)(t)&&(window.location.href=window.encodeURI(t))},e.prototype.removeToken=function(){this.storage.remove(this.tokenName)},e.prototype.isAuthenticated=function(){var e=this.storage.get(this.tokenName);if(!e)return!1;if(3!==e.split(".").length)return!0;var t=void 0;try{var n=e.split(".")[1],i=n.replace(/-/g,"+").replace(/_/g,"/");t=JSON.parse(window.atob(i)).exp}catch(e){return!1}return!t||Math.round((new Date).getTime()/1e3)<=t},e.prototype.logout=function(e){var t=this;return new Promise(function(n){t.storage.remove(t.tokenName),t.config.logoutRedirect&&!e?window.location.href=t.config.logoutRedirect:(0,r.isString)(e)&&(window.location.href=e),n()})},u(e,[{key:"tokenInterceptor",get:function(){var e=this.config,t=this.storage,n=this;return{request:function(i){if(n.isAuthenticated()&&e.httpInterceptor){var r=e.tokenPrefix?e.tokenPrefix+"_"+e.tokenName:e.tokenName,o=t.get(r);e.authHeader&&e.authToken&&(o=e.authToken+" "+o),i.headers.set(e.authHeader,o)}return i}}}}]),e}())||s)}),define("aurelia-auth/base-config",["exports","./auth-utilities"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseConfig=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.BaseConfig=function(){function e(){n(this,e),this._current={httpInterceptor:!0,loginOnSignup:!0,baseUrl:"/",loginRedirect:"#/",logoutRedirect:"#/",signupRedirect:"#/login",loginUrl:"/auth/login",signupUrl:"/auth/signup",profileUrl:"/auth/me",loginRoute:"/login",signupRoute:"/signup",tokenRoot:!1,tokenName:"token",idTokenName:"id_token",tokenPrefix:"aurelia",responseTokenProp:"access_token",responseIdTokenProp:"id_token",unlinkUrl:"/auth/unlink/",unlinkMethod:"get",authHeader:"Authorization",authToken:"Bearer",withCredentials:!0,platform:"browser",storage:"localStorage",providers:{identSrv:{name:"identSrv",url:"/auth/identSrv",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["profile","openid"],responseType:"code",scopePrefix:"",scopeDelimiter:" ",requiredUrlParams:["scope","nonce"],optionalUrlParams:["display","state"],state:function(){var e=Math.random().toString(36).substr(2);return encodeURIComponent(e)},display:"popup",type:"2.0",clientId:"jsClient",nonce:function(){var e=((Date.now()+Math.random())*Math.random()).toString().replace(".","");return encodeURIComponent(e)},popupOptions:{width:452,height:633}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",requiredUrlParams:["scope"],optionalUrlParams:["display","state"],display:"popup",type:"2.0",state:function(){var e=Math.random().toString(36).substr(2);return encodeURIComponent(e)},popupOptions:{width:452,height:633}},facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.3/dialog/oauth",redirectUri:window.location.origin+"/"||window.location.protocol+"//"+window.location.host+"/",scope:["email"],scopeDelimiter:",",nonce:function(){return Math.random()},requiredUrlParams:["nonce","display","scope"],display:"popup",type:"2.0",popupOptions:{width:580,height:400}},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",type:"2.0",popupOptions:{width:527,height:582}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",type:"2.0",popupOptions:{width:1020,height:618}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:[],scopeDelimiter:",",type:"2.0",popupOptions:{width:559,height:519}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",type:"1.0",popupOptions:{width:495,height:645}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["wl.emails"],scopeDelimiter:" ",requiredUrlParams:["display","scope"],display:"popup",type:"2.0",popupOptions:{width:500,height:560}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",display:"popup",type:"2.0",popupOptions:{width:550,height:369}}}}}return e.prototype.configure=function(e){(0,t.merge)(this._current,e)},i(e,[{key:"current",get:function(){return this._current}}]),e}()}),define("aurelia-auth/auth-utilities",["exports"],function(e){"use strict";function t(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function n(e,i,r){for(var o=e.$$hashKey,a=0,s=i.length;a<s;++a){var c=i[a];if(u(c)||l(c))for(var d=Object.keys(c),p=0,h=d.length;p<h;p++){var f=d[p],g=c[f];r&&u(g)?(u(e[f])||(e[f]=Array.isArray(g)?[]:{}),n(e[f],[g],!0)):e[f]=g}}return t(e,o),e}function i(e){if(e.status>=200&&e.status<400)return e.json().catch(function(e){return null});throw e}function r(e){return"undefined"!=typeof e}function o(e){return e.replace(/([\:\-\_]+(.))/g,function(e,t,n,i){return i?n.toUpperCase():n})}function a(e){var t=void 0,n=void 0,i={};return v((e||"").split("&"),function(e){e&&(n=e.split("="),t=decodeURIComponent(n[0]),i[t]=!r(n[1])||decodeURIComponent(n[1]))}),i}function s(e){return"string"==typeof e}function u(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":m(e))}function l(e){return"function"==typeof e}function c(e,t){if(/^(?:[a-z]+:)?\/\//i.test(t))return t;var n=[e,t].join("/"),i=function(e){return e.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return i(n)}function d(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":m(e))&&!Object.getPrototypeOf(e)}function p(e){if(null===e||h(e))return!1}function h(e){return e&&e.window===e}function f(e){return n(e,_.call(arguments,1),!1)}function g(e){return n(e,_.call(arguments,1),!0)}function v(e,t,n){var i=void 0,r=void 0;if(e)if(l(e))for(i in e)"prototype"===i||"length"===i||"name"===i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(Array.isArray(e)||p(e)){var o="object"!==("undefined"==typeof e?"undefined":m(e));for(i=0,r=e.length;i<r;i++)(o||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==v)e.forEach(t,n,e);else if(d(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)hasOwnProperty.call(e,i)&&t.call(n,e[i],i,e);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.status=i,e.isDefined=r,e.camelCase=o,e.parseQueryString=a,e.isString=s,e.isObject=u,e.isFunction=l,e.joinUrl=c,e.isBlankObject=d,e.isArrayLike=p,e.isWindow=h,e.extend=f,e.merge=g,e.forEach=v;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=[].slice}),define("aurelia-auth/storage",["exports","aurelia-dependency-injection","./base-config"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var r,o;e.Storage=(r=(0,t.inject)(n.BaseConfig),r(o=function(){function e(t){i(this,e),this.config=t.current,this.storage=this._getStorage(this.config.storage)}return e.prototype.get=function(e){return this.storage.getItem(e)},e.prototype.set=function(e,t){return this.storage.setItem(e,t)},e.prototype.remove=function(e){return this.storage.removeItem(e)},e.prototype._getStorage=function(e){if("localStorage"===e){if("localStorage"in window&&null!==window.localStorage)return localStorage;throw new Error("Local Storage is disabled or unavailable.")}if("sessionStorage"===e){if("sessionStorage"in window&&null!==window.sessionStorage)return sessionStorage;throw new Error("Session Storage is disabled or unavailable.")}throw new Error("Invalid storage type specified: "+e)},e}())||o)}),define("aurelia-auth/oAuth1",["exports","aurelia-dependency-injection","./auth-utilities","./storage","./popup","./base-config","aurelia-fetch-client"],function(e,t,n,i,r,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.OAuth1=void 0;var u,l;e.OAuth1=(u=(0,t.inject)(i.Storage,r.Popup,a.HttpClient,o.BaseConfig),u(l=function(){function e(t,n,i,r){s(this,e),this.storage=t,this.config=r.current,this.popup=n,this.http=i,this.defaults={url:null,name:null,popupOptions:null,redirectUri:null,authorizationEndpoint:null}}return e.prototype.open=function(e,t){var i=this,r=(0,n.extend)({},this.defaults,e),o=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,r.url):r.url;return"mobile"!==this.config.platform&&(this.popup=this.popup.open("",r.name,r.popupOptions,r.redirectUri)),this.http.fetch(o,{method:"post"}).then(n.status).then(function(e){"mobile"===i.config.platform?i.popup=i.popup.open([r.authorizationEndpoint,i.buildQueryString(e)].join("?"),r.name,r.popupOptions,r.redirectUri):i.popup.popupWindow.location=[r.authorizationEndpoint,i.buildQueryString(e)].join("?");var n="mobile"===i.config.platform?i.popup.eventListener(r.redirectUri):i.popup.pollPopup();return n.then(function(e){return i.exchangeForToken(e,t,r)})})},e.prototype.exchangeForToken=function(e,t,i){var r=(0,n.extend)({},t,e),o=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,i.url):i.url,s=this.config.withCredentials?"include":"same-origin";return this.http.fetch(o,{method:"post",body:(0,a.json)(r),credentials:s}).then(n.status)},e.prototype.buildQueryString=function(e){var t=[];return(0,n.forEach)(e,function(e,n){return t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}),t.join("&")},e}())||l)}),define("aurelia-auth/popup",["exports","./auth-utilities","./base-config","aurelia-dependency-injection"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Popup=void 0;var o,a;e.Popup=(o=(0,i.inject)(n.BaseConfig),o(a=function(){function e(t){r(this,e),this.config=t.current,this.popupWindow=null,this.polling=null,this.url=""}return e.prototype.open=function(e,t,n,i){this.url=e;var r=this.stringifyOptions(this.prepareOptions(n||{}));return this.popupWindow=window.open(e,t,r),this.popupWindow&&this.popupWindow.focus&&this.popupWindow.focus(),this},e.prototype.eventListener=function(e){var n=this,i=new Promise(function(i,r){n.popupWindow.addEventListener("loadstart",function(o){if(0===o.url.indexOf(e)){var a=document.createElement("a");if(a.href=o.url,a.search||a.hash){var s=a.search.substring(1).replace(/\/$/,""),u=a.hash.substring(1).replace(/\/$/,""),l=(0,t.parseQueryString)(u),c=(0,t.parseQueryString)(s);(0,t.extend)(c,l),c.error?r({error:c.error}):i(c),n.popupWindow.close()}}}),popupWindow.addEventListener("exit",function(){r({data:"Provider Popup was closed"})}),popupWindow.addEventListener("loaderror",function(){deferred.reject({data:"Authorization Failed"})})});return i},e.prototype.pollPopup=function(){var e=this,n=this,i=new Promise(function(i,r){e.polling=setInterval(function(){try{var e=document.location.host,o=n.popupWindow.location.host;if(o===e&&(n.popupWindow.location.search||n.popupWindow.location.hash)){var a=n.popupWindow.location.search.substring(1).replace(/\/$/,""),s=n.popupWindow.location.hash.substring(1).replace(/[\/$]/,""),u=(0,t.parseQueryString)(s),l=(0,t.parseQueryString)(a);(0,t.extend)(l,u),l.error?r({error:l.error}):i(l),n.popupWindow.close(),clearInterval(n.polling)}}catch(e){}n.popupWindow?n.popupWindow.closed&&(clearInterval(n.polling),r({data:"Problem poll popup"})):(clearInterval(n.polling),r({data:"Provider Popup Blocked"}))},35)});return i},e.prototype.prepareOptions=function(e){var n=e.width||500,i=e.height||500;return(0,t.extend)({width:n,height:i,left:window.screenX+(window.outerWidth-n)/2,top:window.screenY+(window.outerHeight-i)/2.5},e)},e.prototype.stringifyOptions=function(e){var n=[];return(0,t.forEach)(e,function(e,t){n.push(t+"="+e)}),n.join(",")},e}())||a)}),define("aurelia-auth/oAuth2",["exports","aurelia-dependency-injection","./auth-utilities","./storage","./popup","./base-config","./authentication","aurelia-fetch-client"],function(e,t,n,i,r,o,a,s){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.OAuth2=void 0;var l,c;e.OAuth2=(l=(0,t.inject)(i.Storage,r.Popup,s.HttpClient,o.BaseConfig,a.Authentication),l(c=function(){function e(t,n,i,r,o){u(this,e),this.storage=t,this.config=r.current,this.popup=n,this.http=i,this.auth=o,this.defaults={url:null,name:null,state:null,scope:null,scopeDelimiter:null,redirectUri:null,popupOptions:null,authorizationEndpoint:null,responseParams:null,requiredUrlParams:null,optionalUrlParams:null,defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code"}}return e.prototype.open=function(e,t){var i=this,r=(0,n.extend)({},this.defaults,e),o=r.name+"_state";(0,n.isFunction)(r.state)?this.storage.set(o,r.state()):(0,n.isString)(r.state)&&this.storage.set(o,r.state);var a=r.name+"_nonce";(0,n.isFunction)(r.nonce)?this.storage.set(a,r.nonce()):(0,n.isString)(r.nonce)&&this.storage.set(a,r.nonce);var s=r.authorizationEndpoint+"?"+this.buildQueryString(r),u=void 0;return u="mobile"===this.config.platform?this.popup.open(s,r.name,r.popupOptions,r.redirectUri).eventListener(r.redirectUri):this.popup.open(s,r.name,r.popupOptions,r.redirectUri).pollPopup(),u.then(function(e){return e.state&&e.state!==i.storage.get(o)?Promise.reject("OAuth 2.0 state parameter mismatch."):r.responseType.toUpperCase().indexOf("TOKEN")!==-1?i.verifyIdToken(e,r.name)?e:Promise.reject("OAuth 2.0 Nonce parameter mismatch."):i.exchangeForToken(e,t,r)})},e.prototype.verifyIdToken=function(e,t){var n=e&&e[this.config.responseIdTokenProp];if(!n)return!0;var i=this.auth.decomposeToken(n);if(!i)return!0;var r=i.nonce;if(!r)return!0;var o=this.storage.get(t+"_nonce");return r===o},e.prototype.exchangeForToken=function(e,t,i){var r=(0,n.extend)({},t,{code:e.code,clientId:i.clientId,redirectUri:i.redirectUri});e.state&&(r.state=e.state),(0,n.forEach)(i.responseParams,function(t){return r[t]=e[t]});var o=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,i.url):i.url,a=this.config.withCredentials?"include":"same-origin";return this.http.fetch(o,{method:"post",body:(0,s.json)(r),credentials:a}).then(n.status)},e.prototype.buildQueryString=function(e){var t=this,i=[],r=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return(0,n.forEach)(r,function(r){(0,n.forEach)(e[r],function(r){var o=(0,n.camelCase)(r),a=(0,n.isFunction)(e[r])?e[r]():e[o];if("state"===r){var s=e.name+"_state";a=encodeURIComponent(t.storage.get(s))}if("nonce"===r){var u=e.name+"_nonce";a=encodeURIComponent(t.storage.get(u))}"scope"===r&&Array.isArray(a)&&(a=a.join(e.scopeDelimiter),e.scopePrefix&&(a=[e.scopePrefix,a].join(e.scopeDelimiter))),i.push([r,a])})}),i.map(function(e){return e.join("=")}).join("&")},e}())||c)}),define("aurelia-auth/authorize-step",["exports","aurelia-dependency-injection","aurelia-router","./authentication"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AuthorizeStep=void 0;var o,a;e.AuthorizeStep=(o=(0,t.inject)(i.Authentication),o(a=function(){function e(t){r(this,e),this.auth=t}return e.prototype.run=function(e,t){var i=this.auth.isAuthenticated(),r=this.auth.getLoginRoute();if(e.getAllInstructions().some(function(e){return e.config.auth})){if(!i)return this.auth.setInitialUrl(window.location.href),t.cancel(new n.Redirect(r))}else if(i&&e.getAllInstructions().some(function(e){return e.fragment===r})){var o=this.auth.getLoginRedirect();return t.cancel(new n.Redirect(o))}return t()},e}())||a)}),define("aurelia-auth/auth-fetch-config",["exports","aurelia-dependency-injection","aurelia-fetch-client","./authentication"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.FetchConfig=void 0;var o,a;e.FetchConfig=(o=(0,t.inject)(n.HttpClient,i.Authentication),
o(a=function(){function e(t,n){r(this,e),this.httpClient=t,this.auth=n}return e.prototype.configure=function(){var e=this;this.httpClient.configure(function(t){t.withDefaults({headers:{Accept:"application/json","Content-Type":"application/json"}}).withInterceptor(e.auth.tokenInterceptor)})},e}())||a)}),define("aurelia-auth/auth-filter",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.AuthFilterValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e,t){return e.filter(function(e){return void 0===e.config.auth||e.config.auth===t})},e}()}),define("aurelia-validation/property-info",["require","exports","aurelia-binding"],function(e,t,n){"use strict";function i(e,t,n){var i=t.evaluate(n,null);if(null===i||void 0===i||i instanceof Object)return i;throw new Error("The '"+t+"' part of '"+e+"' evaluates to "+i+" instead of an object, null or undefined.")}function r(e,t){for(var r=e;e instanceof n.BindingBehavior||e instanceof n.ValueConverter;)e=e.expression;var o,a;if(e instanceof n.AccessScope)o=t.bindingContext,a=e.name;else if(e instanceof n.AccessMember)o=i(r,e.object,t),a=e.name;else{if(!(e instanceof n.AccessKeyed))throw new Error("Expression '"+r+"' is not compatible with the validate binding-behavior.");o=i(r,e.object,t),a=e.key.evaluate(t)}return null===o||void 0===o?null:{object:o,propertyName:a}}t.getPropertyInfo=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("aurelia-validation/validate-binding-behavior",["require","exports","aurelia-task-queue","./validate-trigger","./validate-binding-behavior-base"],function(e,t,n,i,r){"use strict";var o=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(e){return e.validateTrigger},t}(r.ValidateBindingBehaviorBase);o.inject=[n.TaskQueue],t.ValidateBindingBehavior=o;var a=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return i.validateTrigger.manual},t}(r.ValidateBindingBehaviorBase);a.inject=[n.TaskQueue],t.ValidateManuallyBindingBehavior=a;var s=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return i.validateTrigger.blur},t}(r.ValidateBindingBehaviorBase);s.inject=[n.TaskQueue],t.ValidateOnBlurBindingBehavior=s;var u=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return i.validateTrigger.change},t}(r.ValidateBindingBehaviorBase);u.inject=[n.TaskQueue],t.ValidateOnChangeBindingBehavior=u;var l=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getValidateTrigger=function(){return i.validateTrigger.changeOrBlur},t}(r.ValidateBindingBehaviorBase);l.inject=[n.TaskQueue],t.ValidateOnChangeOrBlurBindingBehavior=l}),define("aurelia-validation/validate-trigger",["require","exports"],function(e,t){"use strict";t.validateTrigger={manual:0,blur:1,change:2,changeOrBlur:3}}),define("aurelia-validation/validate-binding-behavior-base",["require","exports","aurelia-dependency-injection","aurelia-pal","./validation-controller","./validate-trigger"],function(e,t,n,i,r,o){"use strict";var a=function(){function e(e){this.taskQueue=e}return e.prototype.getTarget=function(e,t){var n=e.target;if(n instanceof Element)return n;for(var r=0,o=t.controllers.length;r<o;r++){var a=t.controllers[r];if(a.viewModel===n){var s=a.container.get(i.DOM.Element);if(s)return s;throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')}}throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')},e.prototype.bind=function(e,t,i,a){var s,u=this,l=this.getTarget(e,t);if(i instanceof r.ValidationController?s=i:(s=t.container.get(n.Optional.of(r.ValidationController)),a=i),null===s)throw new Error("A ValidationController has not been registered.");s.registerBinding(e,l,a),e.validationController=s;var c=this.getValidateTrigger(s);c&o.validateTrigger.change&&(e.standardUpdateSource=e.updateSource,e.updateSource=function(e){this.standardUpdateSource(e),this.validationController.validateBinding(this)}),c&o.validateTrigger.blur&&(e.validateBlurHandler=function(){u.taskQueue.queueMicroTask(function(){return s.validateBinding(e)})},e.validateTarget=l,l.addEventListener("blur",e.validateBlurHandler)),c!==o.validateTrigger.manual&&(e.standardUpdateTarget=e.updateTarget,e.updateTarget=function(e){this.standardUpdateTarget(e),this.validationController.resetBinding(this)})},e.prototype.unbind=function(e){e.standardUpdateSource&&(e.updateSource=e.standardUpdateSource,e.standardUpdateSource=null),e.standardUpdateTarget&&(e.updateTarget=e.standardUpdateTarget,e.standardUpdateTarget=null),e.validateBlurHandler&&(e.validateTarget.removeEventListener("blur",e.validateBlurHandler),e.validateBlurHandler=null,e.validateTarget=null),e.validationController.unregisterBinding(e),e.validationController=null},e}();t.ValidateBindingBehaviorBase=a}),define("aurelia-validation/validation-controller",["require","exports","./validator","./validate-trigger","./property-info","./validate-result"],function(e,t,n,i,r,o){"use strict";var a=function(){function e(e){this.validator=e,this.bindings=new Map,this.renderers=[],this.results=[],this.errors=[],this.validating=!1,this.elements=new Map,this.objects=new Map,this.validateTrigger=i.validateTrigger.blur,this.finishValidating=Promise.resolve()}return e.prototype.addObject=function(e,t){this.objects.set(e,t)},e.prototype.removeObject=function(e){this.objects.delete(e),this.processResultDelta("reset",this.results.filter(function(t){return t.object===e}),[])},e.prototype.addError=function(e,t,n){void 0===n&&(n=null);var i=new o.ValidateResult({},t,n,!1,e);return this.processResultDelta("validate",[],[i]),i},e.prototype.removeError=function(e){this.results.indexOf(e)!==-1&&this.processResultDelta("reset",[e],[])},e.prototype.addRenderer=function(e){var t=this;this.renderers.push(e),e.render({kind:"validate",render:this.results.map(function(e){return{result:e,elements:t.elements.get(e)}}),unrender:[]})},e.prototype.removeRenderer=function(e){var t=this;this.renderers.splice(this.renderers.indexOf(e),1),e.render({kind:"reset",render:[],unrender:this.results.map(function(e){return{result:e,elements:t.elements.get(e)}})})},e.prototype.registerBinding=function(e,t,n){this.bindings.set(e,{target:t,rules:n,propertyInfo:null})},e.prototype.unregisterBinding=function(e){this.resetBinding(e),this.bindings.delete(e)},e.prototype.getInstructionPredicate=function(e){var t=this;if(e){var n,i=e.object,r=e.propertyName,o=e.rules;return n=e.propertyName?function(e){return e.object===i&&e.propertyName===r}:function(e){return e.object===i},o?function(e){return n(e)&&t.validator.ruleExists(o,e.rule)}:n}return function(){return!0}},e.prototype.validate=function(e){var t,n=this;if(e){var i=e.object,o=e.propertyName,a=e.rules;a=a||this.objects.get(i),t=void 0===e.propertyName?function(){return n.validator.validateObject(i,a)}:function(){return n.validator.validateProperty(i,o,a)}}else t=function(){for(var e=[],t=0,i=Array.from(n.objects);t<i.length;t++){var o=i[t],a=o[0],s=o[1];e.push(n.validator.validateObject(a,s))}for(var u=0,l=Array.from(n.bindings);u<l.length;u++){var c=l[u],d=c[0],s=c[1].rules,p=r.getPropertyInfo(d.sourceExpression,d.source);p&&!n.objects.has(p.object)&&e.push(n.validator.validateProperty(p.object,p.propertyName,s))}return Promise.all(e).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])})};this.validating=!0;var s=this.finishValidating.then(t).then(function(t){var i=n.getInstructionPredicate(e),r=n.results.filter(i);n.processResultDelta("validate",r,t),s===n.finishValidating&&(n.validating=!1);var o={instruction:e,valid:void 0===t.find(function(e){return!e.valid}),results:t};return o}).catch(function(e){return n.validating=!1,n.finishValidating=Promise.resolve(),Promise.reject(e)});return this.finishValidating=s,s},e.prototype.reset=function(e){var t=this.getInstructionPredicate(e),n=this.results.filter(t);this.processResultDelta("reset",n,[])},e.prototype.getAssociatedElements=function(e){for(var t=e.object,n=e.propertyName,i=[],o=0,a=Array.from(this.bindings);o<a.length;o++){var s=a[o],u=s[0],l=s[1].target,c=r.getPropertyInfo(u.sourceExpression,u.source);c&&c.object===t&&c.propertyName===n&&i.push(l)}return i},e.prototype.processResultDelta=function(e,t,n){var i={kind:e,render:[],unrender:[]};n=n.slice(0);for(var r=function(e){var t=o.elements.get(e);o.elements.delete(e),i.unrender.push({result:e,elements:t});var r=n.findIndex(function(t){return t.rule===e.rule&&t.object===e.object&&t.propertyName===e.propertyName});if(r===-1)o.results.splice(o.results.indexOf(e),1),e.valid||o.errors.splice(o.errors.indexOf(e),1);else{var a=n.splice(r,1)[0],s=o.getAssociatedElements(a);o.elements.set(a,s),i.render.push({result:a,elements:s}),o.results.splice(o.results.indexOf(e),1,a),!e.valid&&a.valid?o.errors.splice(o.errors.indexOf(e),1):e.valid||a.valid?a.valid||o.errors.push(a):o.errors.splice(o.errors.indexOf(e),1,a)}},o=this,a=0,s=t;a<s.length;a++){var u=s[a];r(u)}for(var l=0,c=n;l<c.length;l++){var d=c[l],p=this.getAssociatedElements(d);i.render.push({result:d,elements:p}),this.elements.set(d,p),this.results.push(d),d.valid||this.errors.push(d)}for(var h=0,f=this.renderers;h<f.length;h++){var g=f[h];g.render(i)}},e.prototype.validateBinding=function(e){if(e.isBound){var t=r.getPropertyInfo(e.sourceExpression,e.source),n=void 0,i=this.bindings.get(e);if(i&&(n=i.rules,i.propertyInfo=t),t){var o=t.object,a=t.propertyName;this.validate({object:o,propertyName:a,rules:n})}}},e.prototype.resetBinding=function(e){var t=this.bindings.get(e),n=r.getPropertyInfo(e.sourceExpression,e.source);if(!n&&t&&(n=t.propertyInfo),t&&(t.propertyInfo=null),n){var i=n.object,o=n.propertyName;this.reset({object:i,propertyName:o})}},e}();a.inject=[n.Validator],t.ValidationController=a}),define("aurelia-validation/validator",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.Validator=n}),define("aurelia-validation/validate-result",["require","exports"],function(e,t){"use strict";var n=function(){function e(t,n,i,r,o){void 0===o&&(o=null),this.rule=t,this.object=n,this.propertyName=i,this.valid=r,this.message=o,this.id=e.nextId++}return e.prototype.toString=function(){return this.valid?"Valid.":this.message},e}();n.nextId=0,t.ValidateResult=n}),define("aurelia-validation/validation-controller-factory",["require","exports","./validation-controller","./validator"],function(e,t,n,i){"use strict";var r=function(){function e(e){this.container=e}return e.get=function(t){return new e(t)},e.prototype.create=function(e){return e||(e=this.container.get(i.Validator)),new n.ValidationController(e)},e.prototype.createForCurrentScope=function(e){var t=this.create(e);return this.container.registerInstance(n.ValidationController,t),t},e}();t.ValidationControllerFactory=r,r["protocol:aurelia:resolver"]=!0});var __decorate=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};define("aurelia-validation/validation-errors-custom-attribute",["require","exports","aurelia-binding","aurelia-dependency-injection","aurelia-templating","./validation-controller"],function(e,t,n,i,r,o){"use strict";var a=function(){function e(e,t){this.boundaryElement=e,this.controllerAccessor=t,this.errors=[]}return e.prototype.sort=function(){this.errors.sort(function(e,t){return e.targets[0]===t.targets[0]?0:2&e.targets[0].compareDocumentPosition(t.targets[0])?1:-1})},e.prototype.interestingElements=function(e){var t=this;return e.filter(function(e){return t.boundaryElement.contains(e)})},e.prototype.render=function(e){for(var t=function(e){var t=n.errors.findIndex(function(t){return t.error===e});t!==-1&&n.errors.splice(t,1)},n=this,i=0,r=e.unrender;i<r.length;i++){var o=r[i].result;t(o)}for(var a=0,s=e.render;a<s.length;a++){var u=s[a],o=u.result,l=u.elements;if(!o.valid){var c=this.interestingElements(l);c.length&&this.errors.push({error:o,targets:c})}}this.sort(),this.value=this.errors},e.prototype.bind=function(){this.controllerAccessor().addRenderer(this),this.value=this.errors},e.prototype.unbind=function(){this.controllerAccessor().removeRenderer(this)},e}();a.inject=[Element,i.Lazy.of(o.ValidationController)],a=__decorate([r.customAttribute("validation-errors",n.bindingMode.twoWay)],a),t.ValidationErrorsCustomAttribute=a}),define("aurelia-validation/validation-renderer-custom-attribute",["require","exports","./validation-controller"],function(e,t,n){"use strict";var i=function(){function e(){}return e.prototype.created=function(e){this.container=e.container},e.prototype.bind=function(){this.controller=this.container.get(n.ValidationController),this.renderer=this.container.get(this.value),this.controller.addRenderer(this.renderer)},e.prototype.unbind=function(){this.controller.removeRenderer(this.renderer),this.controller=null,this.renderer=null},e}();t.ValidationRendererCustomAttribute=i}),define("aurelia-validation/implementation/rules",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.set=function(t,n){t instanceof Function&&(t=t.prototype),Object.defineProperty(t,e.key,{enumerable:!1,configurable:!1,writable:!0,value:n})},e.unset=function(t){t instanceof Function&&(t=t.prototype),t[e.key]=null},e.get=function(t){return t[e.key]||null},e}();n.key="__rules__",t.Rules=n});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("aurelia-validation/implementation/standard-validator",["require","exports","aurelia-templating","../validator","../validate-result","./rules","./validation-messages"],function(e,t,n,i,r,o,a){"use strict";var s=function(e){function t(t,n){var i=e.call(this)||this;return i.messageProvider=t,i.lookupFunctions=n.lookupFunctions,i.getDisplayName=t.getDisplayName.bind(t),i}return __extends(t,e),t.prototype.validateProperty=function(e,t,n){return this.validate(e,t,n||null)},t.prototype.validateObject=function(e,t){return this.validate(e,null,t||null)},t.prototype.ruleExists=function(e,t){for(var n=e.length;n--;)if(e[n].indexOf(t)!==-1)return!0;return!1},t.prototype.getMessage=function(e,t,n){var i=e.message||this.messageProvider.getMessage(e.messageKey),r=e.property,o=r.name,a=r.displayName;null!==o&&(a=this.messageProvider.getDisplayName(o,a));var s={$displayName:a,$propertyName:o,$value:n,$object:t,$config:e.config,$getDisplayName:this.getDisplayName};return i.evaluate({bindingContext:t,overrideContext:s},this.lookupFunctions)},t.prototype.validateRuleSequence=function(e,t,n,i,o){for(var a=this,s=null===t||void 0===t,u=n[i],l=!0,c=[],d=function(n){var i=u[n];if(!s&&i.property.name!==t)return"continue";if(i.when&&!i.when(e))return"continue";var d=null===i.property.name?e:e[i.property.name],p=i.condition(d,e);p instanceof Promise||(p=Promise.resolve(p)),c.push(p.then(function(t){var n=t?null:a.getMessage(i,e,d);return o.push(new r.ValidateResult(i,e,i.property.name,t,n)),l=l&&t,t}))},p=0;p<u.length;p++)d(p);return Promise.all(c).then(function(){return i++,l&&i<n.length?a.validateRuleSequence(e,t,n,i,o):o})},t.prototype.validate=function(e,t,n){return n||(n=o.Rules.get(e)),n?this.validateRuleSequence(e,t,n,0,[]):Promise.resolve([])},t}(i.Validator);s.inject=[a.ValidationMessageProvider,n.ViewResources],t.StandardValidator=s}),define("aurelia-validation/implementation/validation-messages",["require","exports","./validation-parser"],function(e,t,n){"use strict";t.validationMessages={default:"${$displayName} is invalid.",required:"${$displayName} is required.",matches:"${$displayName} is not correctly formatted.",email:"${$displayName} is not a valid email.",minLength:"${$displayName} must be at least ${$config.length} character${$config.length === 1 ? '' : 's'}.",maxLength:"${$displayName} cannot be longer than ${$config.length} character${$config.length === 1 ? '' : 's'}.",minItems:"${$displayName} must contain at least ${$config.count} item${$config.count === 1 ? '' : 's'}.",maxItems:"${$displayName} cannot contain more than ${$config.count} item${$config.count === 1 ? '' : 's'}.",equals:"${$displayName} must be ${$config.expectedValue}."};var i=function(){function e(e){this.parser=e}return e.prototype.getMessage=function(e){var n;return n=e in t.validationMessages?t.validationMessages[e]:t.validationMessages.default,this.parser.parseMessage(n)},e.prototype.getDisplayName=function(e,t){if(null!==t&&void 0!==t)return t;var n=e.split(/(?=[A-Z])/).join(" ");return n.charAt(0).toUpperCase()+n.slice(1)},e}();i.inject=[n.ValidationParser],t.ValidationMessageProvider=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("aurelia-validation/implementation/validation-parser",["require","exports","aurelia-binding","aurelia-templating","./util","aurelia-logging"],function(e,t,n,i,r,o){"use strict";var a=function(){function e(e,t){this.parser=e,this.bindinqLanguage=t,this.emptyStringExpression=new n.LiteralString(""),this.nullExpression=new n.LiteralPrimitive(null),this.undefinedExpression=new n.LiteralPrimitive(void 0),this.cache={}}return e.prototype.parseMessage=function(e){if(void 0!==this.cache[e])return this.cache[e];var t=this.bindinqLanguage.parseInterpolation(null,e);if(null===t)return new n.LiteralString(e);for(var i=new n.LiteralString(t[0]),r=1;r<t.length;r+=2)i=new n.Binary("+",i,new n.Binary("+",this.coalesce(t[r]),new n.LiteralString(t[r+1])));return s.validate(i,e),this.cache[e]=i,i},e.prototype.parseProperty=function(e){if(r.isString(e))return{name:e,displayName:null};var t=this.getAccessorExpression(e.toString());if(t instanceof n.AccessScope||t instanceof n.AccessMember&&t.object instanceof n.AccessScope)return{name:t.name,displayName:null};throw new Error('Invalid subject: "'+t+'"')},e.prototype.coalesce=function(e){return new n.Conditional(new n.Binary("||",new n.Binary("===",e,this.nullExpression),new n.Binary("===",e,this.undefinedExpression)),this.emptyStringExpression,new n.CallMember(e,"toString",[]))},e.prototype.getAccessorExpression=function(e){var t=/^function\s*\([$_\w\d]+\)\s*\{\s*(?:"use strict";)?\s*return\s+[$_\w\d]+\.([$_\w\d]+)\s*;?\s*\}$/,n=/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+\.([$_\w\d]+)$/,i=t.exec(e)||n.exec(e);if(null===i)throw new Error("Unable to parse accessor function:\n"+e);return this.parser.parse(i[1])},e}();a.inject=[n.Parser,i.BindingLanguage],t.ValidationParser=a;var s=function(e){function t(t){var n=e.call(this,[])||this;return n.originalMessage=t,n}return __extends(t,e),t.validate=function(e,n){var i=new t(n);e.accept(i)},t.prototype.visitAccessScope=function(e){if(0!==e.ancestor)throw new Error("$parent is not permitted in validation message expressions.");["displayName","propertyName","value","object","config","getDisplayName"].indexOf(e.name)!==-1&&o.getLogger("aurelia-validation").warn('Did you mean to use "$'+e.name+'" instead of "'+e.name+'" in this validation message template: "'+this.originalMessage+'"?')},t}(n.Unparser);t.MessageExpressionValidator=s}),define("aurelia-validation/implementation/util",["require","exports"],function(e,t){"use strict";function n(e){return"[object String]"===Object.prototype.toString.call(e)}t.isString=n}),define("aurelia-validation/implementation/validation-rules",["require","exports","./util","./rules","./validation-messages"],function(e,t,n,i,r){"use strict";var o=function(){function e(e,t,n,i,r,o){void 0===n&&(n={}),this.fluentEnsure=i,this.fluentRules=r,this.parser=o,this.rule={property:e,condition:t,config:n,when:null,messageKey:"default",message:null,sequence:r.sequence},this.fluentEnsure._addRule(this.rule)}return e.prototype.then=function(){return this.fluentRules.sequence++,this},e.prototype.withMessageKey=function(e){return this.rule.messageKey=e,this.rule.message=null,this},e.prototype.withMessage=function(e){return this.rule.messageKey="custom",this.rule.message=this.parser.parseMessage(e),this},e.prototype.when=function(e){return this.rule.when=e,this},e.prototype.tag=function(e){return this.rule.tag=e,this},e.prototype.ensure=function(e){return this.fluentEnsure.ensure(e)},e.prototype.ensureObject=function(){return this.fluentEnsure.ensureObject()},Object.defineProperty(e.prototype,"rules",{get:function(){return this.fluentEnsure.rules},enumerable:!0,configurable:!0}),e.prototype.on=function(e){return this.fluentEnsure.on(e)},e.prototype.satisfies=function(e,t){return this.fluentRules.satisfies(e,t)},e.prototype.satisfiesRule=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return(i=this.fluentRules).satisfiesRule.apply(i,[e].concat(t));var i},e.prototype.required=function(){return this.fluentRules.required()},e.prototype.matches=function(e){return this.fluentRules.matches(e)},e.prototype.email=function(){return this.fluentRules.email()},e.prototype.minLength=function(e){return this.fluentRules.minLength(e)},e.prototype.maxLength=function(e){return this.fluentRules.maxLength(e)},e.prototype.minItems=function(e){return this.fluentRules.minItems(e)},e.prototype.maxItems=function(e){return this.fluentRules.maxItems(e)},e.prototype.equals=function(e){return this.fluentRules.equals(e)},e}();t.FluentRuleCustomizer=o;var a=function(){function e(e,t,n){this.fluentEnsure=e,this.parser=t,this.property=n,this.sequence=0}return e.prototype.displayName=function(e){return this.property.displayName=e,this},e.prototype.satisfies=function(e,t){return new o(this.property,e,t,this.fluentEnsure,this,this.parser)},e.prototype.satisfiesRule=function(t){for(var n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var o=e.customRules[t];if(!o){if(o=this[t],o instanceof Function)return o.call.apply(o,[this].concat(i));throw new Error('Rule with name "'+t+'" does not exist.')}var a=o.argsToConfig?o.argsToConfig.apply(o,i):void 0;return this.satisfies(function(e,t){return(r=o.condition).call.apply(r,[n,e,t].concat(i));var r},a).withMessageKey(t)},e.prototype.required=function(){return this.satisfies(function(e){return null!==e&&void 0!==e&&!(n.isString(e)&&!/\S/.test(e))}).withMessageKey("required")},e.prototype.matches=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||e.test(t)}).withMessageKey("matches")},e.prototype.email=function(){return this.matches(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/).withMessageKey("email")},e.prototype.minLength=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||t.length>=e},{length:e}).withMessageKey("minLength")},e.prototype.maxLength=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||t.length<=e},{length:e}).withMessageKey("maxLength")},e.prototype.minItems=function(e){return this.satisfies(function(t){return null===t||void 0===t||t.length>=e},{count:e}).withMessageKey("minItems")},e.prototype.maxItems=function(e){return this.satisfies(function(t){return null===t||void 0===t||t.length<=e},{count:e}).withMessageKey("maxItems")},e.prototype.equals=function(e){return this.satisfies(function(t){return null===t||void 0===t||""===t||t===e},{expectedValue:e}).withMessageKey("equals")},e}();a.customRules={},t.FluentRules=a;var s=function(){function e(e){this.parser=e,this.rules=[]}return e.prototype.ensure=function(e){return this.assertInitialized(),new a(this,this.parser,this.parser.parseProperty(e))},e.prototype.ensureObject=function(){return this.assertInitialized(),new a(this,this.parser,{name:null,displayName:null})},e.prototype.on=function(e){return i.Rules.set(e,this.rules),this},e.prototype._addRule=function(e){for(;this.rules.length<e.sequence+1;)this.rules.push([]);this.rules[e.sequence].push(e)},e.prototype.assertInitialized=function(){if(!this.parser)throw new Error('Did you forget to add ".plugin(\'aurelia-validation)" to your main.js?')},e}();t.FluentEnsure=s;var u=function(){function e(){}return e.initialize=function(t){e.parser=t},e.ensure=function(t){return new s(e.parser).ensure(t)},e.ensureObject=function(){return new s(e.parser).ensureObject()},e.customRule=function(e,t,n,i){r.validationMessages[e]=n,a.customRules[e]={condition:t,argsToConfig:i}},e.taggedRules=function(e,t){return e.map(function(e){return e.filter(function(e){return e.tag===t})})},e.off=function(e){i.Rules.unset(e)},e}();t.ValidationRules=u}),define("aurelia-dialog/ai-dialog",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialog=void 0;var n,i,r;e.AiDialog=(n=(0,t.customElement)("ai-dialog"),i=(0,t.inlineView)("\n  <template>\n    <slot></slot>\n  </template>\n"),n(r=i(r=function(){})||r)||r)}),define("aurelia-dialog/ai-dialog-header",["exports","aurelia-templating","./dialog-controller"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogHeader=void 0;var i,r,o,a,s;e.AiDialogHeader=(i=(0,t.customElement)("ai-dialog-header"),r=(0,t.inlineView)('\n  <template>\n    <button type="button" class="dialog-close" aria-label="Close" if.bind="!controller.settings.lock" click.trigger="controller.cancel()">\n      <span aria-hidden="true">&times;</span>\n    </button>\n\n    <div class="dialog-header-content">\n      <slot></slot>\n    </div>\n  </template>\n'),i(o=r((s=a=function(e){this.controller=e},a.inject=[n.DialogController],o=s))||o)||o)}),define("aurelia-dialog/dialog-controller",["exports","./lifecycle","./dialog-result"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DialogController=void 0;e.DialogController=function(){function e(e,t,n,i){this.renderer=e,this.settings=t,this._resolve=n,this._reject=i}return e.prototype.ok=function(e){return this.close(!0,e)},e.prototype.cancel=function(e){return this.close(!1,e)},e.prototype.error=function(e){var n=this;return(0,t.invokeLifecycle)(this.viewModel,"deactivate").then(function(){return n.renderer.hideDialog(n)}).then(function(){n.controller.unbind(),n._reject(e)})},e.prototype.close=function(e,i){var r=this;return this._closePromise?this._closePromise:(this._closePromise=(0,t.invokeLifecycle)(this.viewModel,"canDeactivate").then(function(o){return o?(0,t.invokeLifecycle)(r.viewModel,"deactivate").then(function(){return r.renderer.hideDialog(r)}).then(function(){var t=new n.DialogResult(!e,i);return r.controller.unbind(),r._resolve(t),t}):void(r._closePromise=void 0)},function(e){return r._closePromise=void 0,Promise.reject(e)}),this._closePromise)},e}()}),define("aurelia-dialog/lifecycle",["exports"],function(e){"use strict";function t(e,t,n){if("function"==typeof e[t]){var i=e[t](n);return i instanceof Promise?i:null!==i&&void 0!==i?Promise.resolve(i):Promise.resolve(!0)}return Promise.resolve(!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.invokeLifecycle=t}),define("aurelia-dialog/dialog-result",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DialogResult=function(e,t){this.wasCancelled=!1,this.wasCancelled=e,this.output=t}}),define("aurelia-dialog/ai-dialog-body",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogBody=void 0;var n,i,r;e.AiDialogBody=(n=(0,t.customElement)("ai-dialog-body"),i=(0,t.inlineView)("\n  <template>\n    <slot></slot>\n  </template>\n"),n(r=i(r=function(){})||r)||r)}),define("aurelia-dialog/ai-dialog-footer",["exports","aurelia-templating","./dialog-controller"],function(e,t,n){"use strict";function i(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogFooter=void 0;var o,a,s,u,l,c,d,p;e.AiDialogFooter=(o=(0,t.customElement)("ai-dialog-footer"),a=(0,t.inlineView)('\n  <template>\n    <slot></slot>\n\n    <template if.bind="buttons.length > 0">\n      <button type="button" class="btn btn-default" repeat.for="button of buttons" click.trigger="close(button)">${button}</button>\n    </template>\n  </template>\n'),o(s=a((p=d=function(){function e(e){i(this,"buttons",l,this),i(this,"useDefaultButtons",c,this),this.controller=e}return e.prototype.close=function(t){e.isCancelButton(t)?this.controller.cancel(t):this.controller.ok(t)},e.prototype.useDefaultButtonsChanged=function(e){e&&(this.buttons=["Cancel","Ok"])},e.isCancelButton=function(e){return"Cancel"===e},e}(),d.inject=[n.DialogController],u=p,l=r(u.prototype,"buttons",[t.bindable],{enumerable:!0,initializer:function(){return[]}}),c=r(u.prototype,"useDefaultButtons",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),s=u))||s)||s)}),define("aurelia-dialog/attach-focus",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttachFocus=void 0;var n,i,r,o;e.AttachFocus=(n=(0,t.customAttribute)("attach-focus"),n((o=r=function(){function e(e){this.value=!0,this.element=e}return e.prototype.attached=function(){this.value&&"false"!==this.value&&this.element.focus()},e.prototype.valueChanged=function(e){this.value=e},e}(),r.inject=[Element],i=o))||i)}),define("aurelia-dialog/dialog-configuration",["exports","./renderer","./dialog-renderer","./dialog-options","aurelia-pal"],function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DialogConfiguration=void 0;var o=n.DialogRenderer,a={"ai-dialog":"./ai-dialog","ai-dialog-header":"./ai-dialog-header","ai-dialog-body":"./ai-dialog-body","ai-dialog-footer":"./ai-dialog-footer","attach-focus":"./attach-focus"},s="ai-dialog-container,ai-dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0}ai-dialog-overlay{opacity:0}ai-dialog-overlay.active{opacity:1}ai-dialog-container{display:block;transition:opacity .2s linear;opacity:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}ai-dialog-container.active{opacity:1}ai-dialog-container>div{padding:30px}ai-dialog-container>div>div{display:block;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto}ai-dialog-container,ai-dialog-container>div,ai-dialog-container>div>div{outline:0}ai-dialog{display:table;box-shadow:0 5px 15px rgba(0,0,0,.5);border:1px solid rgba(0,0,0,.2);border-radius:5px;padding:3;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;background:#fff}ai-dialog>ai-dialog-header{display:block;padding:16px;border-bottom:1px solid #e5e5e5}ai-dialog>ai-dialog-header>button{float:right;border:none;display:block;width:32px;height:32px;background:0 0;font-size:22px;line-height:16px;margin:-14px -16px 0 0;padding:0;cursor:pointer}ai-dialog>ai-dialog-body{display:block;padding:16px}ai-dialog>ai-dialog-footer{display:block;padding:6px;border-top:1px solid #e5e5e5;text-align:right}ai-dialog>ai-dialog-footer button{color:#333;background-color:#fff;padding:6px 12px;font-size:14px;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid #ccc;border-radius:4px;margin:5px 0 5px 5px}ai-dialog>ai-dialog-footer button:disabled{cursor:default;opacity:.45}ai-dialog>ai-dialog-footer button:hover:enabled{color:#333;background-color:#e6e6e6;border-color:#adadad}.ai-dialog-open{overflow:hidden}";
e.DialogConfiguration=function(){function e(e){this.aurelia=e,this.settings=i.dialogOptions,this.resources=[],this.cssText=s,this.renderer=o}return e.prototype.useDefaults=function(){return this.useRenderer(o).useCSS(s).useStandardResources()},e.prototype.useStandardResources=function(){return this.useResource("ai-dialog").useResource("ai-dialog-header").useResource("ai-dialog-body").useResource("ai-dialog-footer").useResource("attach-focus")},e.prototype.useResource=function(e){return this.resources.push(e),this},e.prototype.useRenderer=function(e,t){return this.renderer=e,this.settings=Object.assign(this.settings,t||{}),this},e.prototype.useCSS=function(e){return this.cssText=e,this},e.prototype._apply=function(){var e=this;this.aurelia.transient(t.Renderer,this.renderer),this.resources.forEach(function(t){return e.aurelia.globalResources(a[t])}),this.cssText&&r.DOM.injectStyles(this.cssText)},e}()}),define("aurelia-dialog/renderer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Renderer=function(){function e(){}return e.prototype.getDialogContainer=function(){throw new Error("DialogRenderer must implement getDialogContainer().")},e.prototype.showDialog=function(e){throw new Error("DialogRenderer must implement showDialog().")},e.prototype.hideDialog=function(e){throw new Error("DialogRenderer must implement hideDialog().")},e}()}),define("aurelia-dialog/dialog-renderer",["exports","aurelia-pal","aurelia-dependency-injection"],function(e,t,n){"use strict";function i(e){var n=e.children[0],i=Math.max(t.DOM.querySelectorAll("html")[0].clientHeight,window.innerHeight||0);n.style.marginTop=Math.max((i-n.offsetHeight)/2,30)+"px",n.style.marginBottom=Math.max((i-n.offsetHeight)/2,30)+"px"}Object.defineProperty(e,"__esModule",{value:!0}),e.DialogRenderer=void 0;var r,o,a="ai-dialog-container",s="ai-dialog-overlay",u=function(){var e=null;return function(){if(e)return e;var n=void 0,i=t.DOM.createElement("fakeelement"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in r)if(void 0!==i.style[n])return e=r[n]}}(),l=e.DialogRenderer=(r=(0,n.transient)(),r(o=function(){function e(){var e=this;this._escapeKeyEventHandler=function(t){if(27===t.keyCode){var n=e._dialogControllers[e._dialogControllers.length-1];n&&n.settings.lock!==!0&&n.cancel()}}}return e.prototype.getDialogContainer=function(){return t.DOM.createElement("div")},e.prototype.showDialog=function(e){var n=this,r=e.settings,o=t.DOM.querySelectorAll("body")[0],l=document.createElement("div");this.modalOverlay=t.DOM.createElement(s),this.modalContainer=t.DOM.createElement(a),this.anchor=e.slot.anchor,l.appendChild(this.anchor),this.modalContainer.appendChild(l),this.stopPropagation=function(e){e._aureliaDialogHostClicked=!0},this.closeModalClick=function(t){return!r.lock&&!t._aureliaDialogHostClicked&&void e.cancel()},e.centerDialog=function(){r.centerHorizontalOnly||i(n.modalContainer)},this.modalOverlay.style.zIndex=r.startingZIndex,this.modalContainer.style.zIndex=r.startingZIndex;var c=Array.from(o.querySelectorAll(a)).pop();return c?(c.parentNode.insertBefore(this.modalContainer,c.nextSibling),c.parentNode.insertBefore(this.modalOverlay,c.nextSibling)):(o.insertBefore(this.modalContainer,o.firstChild),o.insertBefore(this.modalOverlay,o.firstChild)),this._dialogControllers.length||t.DOM.addEventListener("keyup",this._escapeKeyEventHandler),this._dialogControllers.push(e),e.slot.attached(),"function"==typeof r.position?r.position(this.modalContainer,this.modalOverlay):e.centerDialog(),this.modalContainer.addEventListener("click",this.closeModalClick),this.anchor.addEventListener("click",this.stopPropagation),new Promise(function(e){function t(n){n.target===i.modalContainer&&(i.modalContainer.removeEventListener(u(),t),e())}var i=n;r.ignoreTransitions?e():n.modalContainer.addEventListener(u(),t),n.modalOverlay.classList.add("active"),n.modalContainer.classList.add("active"),o.classList.add("ai-dialog-open")})},e.prototype.hideDialog=function(e){var n=this,i=e.settings,r=t.DOM.querySelectorAll("body")[0];this.modalContainer.removeEventListener("click",this.closeModalClick),this.anchor.removeEventListener("click",this.stopPropagation);var o=this._dialogControllers.indexOf(e);return o!==-1&&this._dialogControllers.splice(o,1),this._dialogControllers.length||t.DOM.removeEventListener("keyup",this._escapeKeyEventHandler),new Promise(function(e){function t(){r.modalContainer.removeEventListener(u(),t),e()}var r=n;i.ignoreTransitions?e():n.modalContainer.addEventListener(u(),t),n.modalOverlay.classList.remove("active"),n.modalContainer.classList.remove("active")}).then(function(){return r.removeChild(n.modalOverlay),r.removeChild(n.modalContainer),e.slot.detached(),n._dialogControllers.length||r.classList.remove("ai-dialog-open"),Promise.resolve()})},e}())||o);l.prototype._dialogControllers=[]}),define("aurelia-dialog/dialog-options",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.dialogOptions={lock:!0,centerHorizontalOnly:!1,startingZIndex:1e3,ignoreTransitions:!1}}),define("aurelia-dialog/dialog-service",["exports","aurelia-metadata","aurelia-dependency-injection","aurelia-templating","./dialog-controller","./renderer","./lifecycle","./dialog-result","./dialog-options"],function(e,t,n,i,r,o,a,s,u){"use strict";function l(e){return e=Object.assign({},u.dialogOptions,e),e.startingZIndex=u.dialogOptions.startingZIndex,e}function c(e,t,n){var r=n.renderer.getDialogContainer(),o={container:e.container,childContainer:t,model:n.settings.model,view:n.settings.view,viewModel:n.settings.viewModel,viewSlot:new i.ViewSlot(r,!0),host:r};return d(o,e.compositionEngine).then(function(t){return n.viewModel=t.viewModel,n.slot=t.viewSlot,(0,a.invokeLifecycle)(n.viewModel,"canActivate",n.settings.model).then(function(i){if(i)return e.compositionEngine.compose(t).then(function(t){return e.controllers.push(n),e.hasActiveDialog=!!e.controllers.length,n.controller=t,n.view=t.view,n.renderer.showDialog(n)})})})}function d(e,n){return"function"==typeof e.viewModel&&(e.viewModel=t.Origin.get(e.viewModel).moduleId),"string"==typeof e.viewModel?n.ensureViewModel(e):Promise.resolve(e)}function p(e,t){var n=e.controllers.indexOf(t);n!==-1&&(e.controllers.splice(n,1),e.hasActiveDialog=!!e.controllers.length)}Object.defineProperty(e,"__esModule",{value:!0}),e.DialogService=void 0;var h,f;e.DialogService=(f=h=function(){function e(e,t){this.container=e,this.compositionEngine=t,this.controllers=[],this.hasActiveDialog=!1}return e.prototype.open=function(e){return this.openAndYieldController(e).then(function(e){return e.result})},e.prototype.openAndYieldController=function(e){var t=this,n=this.container.createChild(),i=void 0,a=new Promise(function(t,a){i=new r.DialogController(n.get(o.Renderer),l(e),t,a)});return n.registerInstance(r.DialogController,i),i.result=a,i.result.then(function(){p(t,i)},function(){p(t,i)}),c(this,n,i).then(function(){return i})},e}(),h.inject=[n.Container,i.CompositionEngine],f)}),define("text!app.html",["module"],function(e){e.exports='<template>\n  <require from="semantic/semantic.css"></require>\n  <require from="./styles/styles.css"></require>\n\n  <router-view></router-view>\n\n</template>\n\n'}),define("text!styles/styles.css",["module"],function(e){e.exports='body {\n  margin: 0;\n}\n\n.splash {\n  text-align: center;\n  margin: 10% 0 0 0;\n  box-sizing: border-box;\n}\n\n.splash .message {\n  font-size: 72px;\n  line-height: 72px;\n  text-shadow: rgba(0, 0, 0, 0.5) 0 0 15px;\n  text-transform: uppercase;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n}\n\n.splash .fa-spinner {\n  text-align: center;\n  display: inline-block;\n  font-size: 72px;\n  margin-top: 50px;\n}\n\nai-dialog-container.active .ui.modal {\n  display: block;\n}\n\n.page-host {\n}\n\n@media print {\n  .page-host {\n    position: absolute;\n    left: 10px;\n    right: 0;\n    top: 50px;\n    bottom: 0;\n    overflow-y: inherit;\n    overflow-x: inherit;\n  }\n}\n\nsection {\n  margin: 0 20px;\n}\n\n/* Navbar */\n.ui.menu.navbar {\n  margin-top: 0;\n}\n\n.navbar-nav li.loader {\n  margin: 12px 24px 0 6px;\n}\n\n.pictureDetail {\n  max-width: 425px;\n}\n\n/* animate page transitions */\nsection.au-enter-active {\n  -webkit-animation: fadeInRight 1s;\n  animation: fadeInRight 1s;\n}\n\ndiv.au-stagger {\n  /* 50ms will be applied between each successive enter operation */\n  -webkit-animation-delay: 50ms;\n  animation-delay: 50ms;\n}\n\n/* Login aligned in middle */\ndiv.ui.login.grid {\n  height: 100%;\n}\n\n/* New and Edit Entry Form */\ntimesheet-entry {\n  width: 90%;\n}\n\n.timesheet-entry .ui.calendar {\n  margin-left: 0.5em;\n}\n\n.timesheet-entry + .ui.button {\n  margin-top: 20px;\n}\n\n/** List of previous timesheet entries **/\n.timesheet .ui.fluid.entries {\n  width: 90%;\n}\n\n.timesheet .ui.fluid.entries .title {\n  text-align: left;\n  background-color: #F8F8F9;\n}\n\n/** Admin allocation panel **/\n\n.user.timesheet,\n.user.report {\n  margin-bottom: 20px;\n}\n\n.user.timesheet .button {\n  vertical-align: middle;\n  margin: auto;\n  margin-left: 0;\n}\n\n/* Cards */\n\n.card-container.au-enter {\n  opacity: 0;\n}\n\n.card-container.au-enter-active {\n  -webkit-animation: fadeIn 2s;\n  animation: fadeIn 2s;\n}\n\n.card {\n  overflow: hidden;\n  position: relative;\n  border: 1px solid #CCC;\n  border-radius: 8px;\n  text-align: center;\n  padding: 0;\n  background-color: #337ab7;\n  color: rgb(136, 172, 217);\n  margin-bottom: 32px;\n  box-shadow: 0 0 5px rgba(0, 0, 0, .5);\n}\n\n.card .content {\n  margin-top: 10px;\n}\n\n.card .content .name {\n  color: white;\n  text-shadow: 0 0 6px rgba(0, 0, 0, .5);\n  font-size: 18px;\n}\n\n.card .header-bg {\n  /* This stretches the canvas across the entire hero unit */\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 70px;\n  border-bottom: 1px #FFF solid;\n  border-radius: 6px 6px 0 0;\n}\n\n.card .avatar {\n  position: relative;\n  margin-top: 15px;\n  z-index: 100;\n}\n\n.card .avatar img {\n  width: 100px;\n  height: 100px;\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n  border: 2px #FFF solid;\n}\n\n/** Flash Messages **/\n.flash {\n    margin-bottom: 20px;\n}\n\n.flash .message {\n    display: none;\n}\n\n.flash .message.background-animation-add,\n.flash .message.background-animation-remove {\n    display: block;\n}\n\n.background-animation-add.positive {\n    display: block;\n    -webkit-animation: flashSuccess 4s;\n    animation: flashSuccess 4s;\n}\n\n.background-animation-add.negative {\n    display: block;\n    -webkit-animation: flashError 8s;\n    animation: flashError 8s;\n    color: white;\n}\n\n@-webkit-keyframes flashSuccess {\n    0% { background-color: white; }\n    25% { background-color: #a3c293; }\n    50% { background-color: white; }\n    75% { background-color: #a3c293; }\n    100% { background-color: white; }\n}\n\n@keyframes flashSuccess {\n    0% { background-color: white; }\n    25% { background-color: #a3c293; }\n    50% { background-color: white; }\n    75% { background-color: #a3c293; }\n    100% { background-color: white; }\n}\n\n@-webkit-keyframes flashError {\n    0% { background-color: #FFF6F6; }\n    5% { background-color: #9f3a38; }\n    15% { background-color: #FFF6F6; }\n}\n\n@keyframes flashError {\n    0% { background-color: #FFF6F6; }\n    5% { background-color: #9f3a38; }\n    15% { background-color: #FFF6F6; }\n}\n\n@media only screen and (max-device-width: 767px) {\n\n  .timesheet-entry .ui.calendar {\n    margin-left: 0;\n  }\n\n  .timesheet-entry.ui.form .two.hours.fields > .field {\n    width: 50% !important;\n  }\n\n  .timesheet-entry.ui.form .two.hours.fields > .field input {\n    width: 60px;\n  }\n\n  .ui.monthly.timesheet.table thead {\n    display: none;\n  }\n}'}),define("text!components/top-bar.html",["module"],function(e){e.exports='<template bindable="router">\n\n    <confirmation approve-callback></confirmation>\n\n    <div class="top-bar ui menu navbar">\n        <div class="left menu">\n            <div class="item">\n                <i if.bind="isSynced" class="green feed icon"></i>\n                <i if.bind="!isSynced" class="red feed icon"></i>\n                <a \n                    route-href="route: error-report"\n                    if.bind="error"\n                >\n                    <i class="red alarm icon"></i>\n                </a>\n            </div>\n        </div>\n        ${ environment.testing }\n        <div class="right menu">\n\n            <a \n                href="#"\n                class="item"\n                id="WipeAll"\n                if.bind="isTest"\n                click.delegate="wipeAll()"\n            >\n                <i class="trash icon"></i>\n            </a>\n\n            <a \n                route-href="route: admin-planning"\n                class="item"\n                if.bind="isAdmin"\n            >\n                <i class="calculator icon"></i>\n            </a>\n\n            <a \n                route-href="route: timesheets"\n                class="item"\n            >\n                <i class="add to calendar icon"></i>\n            </a>\n\n            <a \n                route-href="route: planning"\n                class="item"\n            >\n                <i class="calendar icon"></i>\n            </a>\n\n            <a \n                route-href="route: user"\n                class="item"\n            >\n                <i class="user icon"></i>\n            </a>\n\n            <a href="#" class="item" id="Logout" click.delegate="logout()">\n                 <i class="sign out icon"></i>\n            </a>\n            \n        </div>\n    </div>\n</template>'}),define("text!components/user-app-router.html",["module"],function(e){e.exports='<template>\n\n    <require from="./top-bar"></require>\n\n    <top-bar router.bind="router"></top-bar>\n\n    <div class="divider"></div>\n\n    <nav-bar router.bind="router"></nav-bar>\n\n    <div class="full height ui grid">\n        <div class="row">\n            <compose class="sixteen wide column" view-model="resources/flash/flash"></compose>\n        </div>\n\n        <div class="row">\n\n            <div class="page-host centered fourteen wide column pusher">\n                <div class="main-panel-container">\n                    <router-view></router-view>\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n</template>\n'}),define("text!pages/admin/admin-panel.html",["module"],function(e){e.exports='<template>\n\n    <require from="./users-timesheets"></require>\n    <require from="./admin-reports"></require>\n\n    <div class="ui two item stackable tabs pointing huge admin panel menu">        \n          <a class="active item" data-tab="definition"><i class="checkmark icon"></i></a>\n          <a class="item" data-tab="reports"><i class="pie chart icon"></i></a>\n    </div>\n\n    <div data-tab="definition" class="ui tab segment active">\n        <users-timesheets\n            month.bind="month"\n        >\n        </users-timesheets>\n    </div>\n    <div data-tab="reports" class="ui tab segment">\n        <admin-reports\n            month.bind="month"\n        >\n        </admin-reports>\n    </div>\n\n</template>'}),define("text!pages/admin/admin-report.html",["module"],function(e){e.exports='<template>\n\n    <table class="ui celled table">\n        <thead>\n            <tr>\n                <th t="allocation">Allocation</th>\n                <th t="ratio">Ratio</th>\n                <th t="duration">Duration</th>\n                <th t="salary">Salary (641)</th>\n                <th t="charges">Charges (645)</th>\n                <th t="provisionCPbrut">Prov. (641200)</th>\n                <th t="provisionCPcharges">Prov. Charges (645000)</th>\n                <th t="precaritebrut">Precarite Brut</th>\n                <th t="precaritecharges">Precarite Charges</th>                \n            </tr>\n        </thead>\n        <tbody>\n            <tr repeat.for="report of entries">\n                <td>${report.allocationName}</td>\n                <td>${report.ratio.toFixed(2)}%</td>\n                <td>${report.duration.toFixed(2)}h</td>\n                <td>${report.salary.toFixed(2)}$</td>\n                <td>${report.accounts.charges.toFixed(2)}$</td>\n                <td>${report.accounts.provisionCPBrut.toFixed(2)}${ \'$\' | t }</td>\n                <td>${report.accounts.provisionCPCharges.toFixed(2)}${ \'$\' | t }</td>\n                <td>${report.accounts.primePrecariteBrut.toFixed(2)}${ \'$\' | t }</td>\n                <td>${report.accounts.primePrecariteCharges.toFixed(2)}${ \'$\' | t }</td>\n            </tr>\n        </tbody>\n        <tfoot>\n            <tr>\n                <th t="total"></th>\n                <th>${ totals.ratio.toFixed(2) }%</th>\n                <th>${ totals.duration.toFixed(2) }h</th>\n                <th>${ totals.salary.toFixed(2) }${ \'$\' | t }</th>\n                <th>${ totals.accounts.charges.toFixed(2) }${ \'$\' | t }</th>\n                <th>${ totals.accounts.provisionCPBrut.toFixed(2) }${ \'$\' | t }</th>\n                <th>${ totals.accounts.provisionCPCharges.toFixed(2) }${ \'$\' | t }</th>\n                <th>${ totals.accounts.primePrecariteBrut.toFixed(2) }${ \'$\' | t }</th>\n                <th>${ totals.accounts.primePrecariteCharges.toFixed(2) }${ \'$\' | t }</th>\n            </tr>\n            <tr>\n                <th t="netpayable"></th>\n                <th>${ totals.accounts.netPayable.toFixed(2) }${ \'$\' | t }</th>\n            </tr>\n            <tr>\n                <th t="urssaf"></th>\n                <th>${ totals.accounts.urssaf.toFixed(2) }${ \'$\' | t }</th>\n            </tr>\n            <tr>\n                <th t="provisionCPbrut"></th>\n                <th>${ totals.accounts.provisionCP.toFixed(2) }${ \'$\' | t }</th>\n            </tr>\n            <tr>\n                <th t="provisionprecarite"></th>\n                <th>${ totals.accounts.provisionPrecarite.toFixed(2) }${ \'$\' | t }</th>\n            </tr>\n        </tfoot>\n    </table>\n\n</template>'}),define("text!pages/admin/admin-reports.html",["module"],function(e){e.exports='<template>\n    <require from="../../resources/dropdown/dropdown"></require>\n    <require from="./admin-report"></require>\n    \n    <div class="admin reports ui container fluid">\n\n        <h2>${month}</h2>\n        <div class="ui horizontal segments">       \n            <div class="left aligned ui segment">\n                <dropdown \n                    selected-entry.two-way="accountingRuleEndKey"\n                    route="accounting"\n                    name="accountingrules"\n                    required.bind=true\n                    allow-add.bind=false\n                >\n                </dropdown>\n            </div>\n            <div class="right aligned ui segment">\n                <a id="csv-export-link" t="download">Download</a>\n            </div>\n        </div>\n\n        <div class="ui grid basic segment">\n            <div \n                class="ui toggle checkbox"\n                id="showMonthAggregate"\n            >\n                <input\n                    type="checkbox"\n                    name="monthaggregate"\n                >\n                <label t="showmonthaggregate">Show month aggregate</label>\n            </div>\n        </div>\n\n        <div \n            class="user report"\n            if.bind="!showMonthAggregate"\n            repeat.for="[userName, userReport] of allocationUserReports"\n        >\n            <h3>${ userName }</h3>\n            <div class="right aligned ui segment">\n                <a \n                    id="${userName}-csv-export-link"\n                    t="download"\n                    data-user="${userName}"\n                >\n                    Download\n                </a>\n            </div>\n\n            <admin-report entries.bind="userReport.entries" totals.bind="userReport.totals"></admin-report>\n            \n        </div>\n\n        <admin-report\n            if.bind="showMonthAggregate"\n            entries.bind="allocationReports.entries"\n            totals.bind="allocationReports.totals"\n        >\n        </admin-report>        \n\n    </div>\n\n</template>'}),define("text!pages/admin/admin-router.html",["module"],function(e){e.exports="<template>\n    <router-view></router-view>\n</template>"}),define("text!pages/admin/planning.html",["module"],function(e){e.exports='<template>\n\n    <div \n        class="ui calendar"\n        data-property="date"\n    >\n        <div class="ui input left icon">\n            <input\n                class=""\n                type="hidden"\n            />\n        </div>\n    </div>      \n\n</template>'}),define("text!pages/admin/user-timesheet.html",["module"],function(e){e.exports='<template>\n    <require from="../../resources/formats/date-format"></require>\n    <require from="../../resources/formats/truncate"></require>\n\n    <require from="../../resources/dropdown/dropdown"></require>\n\n    <div class="username"><h2>${ userName }</h2></div>\n    \n    <div class="${ userName } ui middle aligned segment">\n        <form\n            class="ui form"\n            validation-renderer="semantic-form"\n            validation-errors.bind="errors"\n        >\n            <div class="three fields">\n                <div class="salary inline four wide field">\n                    <label>${ \'salary\' | t}:</label>\n                    <input type="text" value.bind="timesheet.salary & validate"/>\n                </div>\n                <div class="precarite ui checkbox inline four wide field">\n                    <label>${ \'precarite\' | t}?</label>\n                    <input type="checkbox" value.bind="timesheet.precarite & validate"/>\n                </div>\n                <div class="inline middle aligned four wide field">\n                    <button\n                        class="ui small primary button"\n                        tabindex="0"\n                        t="save"\n                        click.delegate="saveTimesheet(userName)"\n                    >\n                        Save\n                    </button>    \n                </div>\n            </div>\n        </form>\n    </div>\n    \n    <form\n        class="ui user timesheet form"\n        validation-renderer="semantic-form"\n        validation-errors.bind="errors"\n    >\n\n        <table class="ui striped fixed monthly timesheet table">\n            <thead>\n                <tr>\n                    <th t="date">Date</th>\n                    <th t="purpose">Purpose</th>\n                    <th t="duration">Duration</th>\n                    <th t="observation">Observation</th>\n                    <th t="allocation">Allocation</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr\n                    repeat.for="entity of timesheet.entries"\n                    click.delegate="openEntry(entity.id)"\n                    if.bind="entity.allocation === undefined || entity.allocation === null || !unallocatedOnly"\n                >\n                    <td>${ entity.date | dateFormat }</td>\n                    <td>${ purposes.get(entity.purpose) }</td>\n                    <td>${ entity.duration }${ \'h\' | t }</td>\n                    <td>${ entity.observation | truncate: 40 }</td>\n                    <td onclick="event.stopPropagation();" style="overflow:visible;">\n                        <dropdown \n                            selected-entry.two-way="entity.allocation"\n                            route="allocation"\n                            name="allocation"\n                            required.bind=false\n                            allow-add.bind=true\n                            select-action.call="allocationSelected(dropdown)"\n                            add-action.call="allocationAdded(dropdown)"\n                            data-username="${username}"\n                            data-entryid="${entity.id}"\n                        >\n                        </dropdown>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n    </form>\n\n</template>'}),define("text!pages/admin/users-timesheets.html",["module"],function(e){e.exports='<template>\n    <require from="./user-timesheet"></require>\n\n    <div class="ui grid basic segment">\n        <div \n            class="ui toggle checkbox"\n            id="showAll"\n        >\n            <input\n                type="checkbox"\n                name="allentries"\n            >\n            <label t="showallentries">Show all entries</label>\n        </div>\n    </div>\n\n\n    <div \n        repeat.for="[username, timesheet] of timesheets"\n        class="user timesheet"\n    >\n        <user-timesheet\n            class=""\n            save-action.call="saveEntry(entity)"\n            timesheet.bind="timesheet"\n            user-name.bind="username"\n            purposes.bind="purposes"\n            unallocated-only.bind="unallocatedOnly"\n            accounting-rules.bind="accountingRules"\n        >\n        </user-timesheet>\n\n    </div>\n\n</template>'}),define("text!pages/timesheets/monthly-timesheet.html",["module"],function(e){e.exports='<template>\n    <require from="../../resources/formats/date-format"></require>\n    <require from="../../resources/formats/truncate"></require>\n\n    <table class="ui striped fixed monthly timesheet table">\n        <thead>\n            <tr>\n                <th t="date">Date</th>\n                <th t="purpose">Purpose</th>\n                <th t="duration">Duration</th>\n                <th t="interpret">Interpret</th>\n                <th t="interpret-time">Time</th>\n                <th t="observation">Observation</th>\n                <th t="travel">Travel</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr repeat.for="entity of entity.entries" click.delegate="openEntry(entity.id)">\n                <td>${ entity.date | dateFormat }</td>\n                <td>${ purposes.get(entity.purpose) }</td>\n                <td>${ entity.duration }${ \'h\' | t }</td>\n                <td>${ interprets.get(entity.interpret) }</td>\n                <td>${ entity.interpret_duration }${ \'h\' }</td>\n                <td>${ entity.observation | truncate: 40 }</td>\n                <td>${ entity.travel | truncate: 40 }</td>\n            </tr>\n        </tbody>\n    </table>\n\n</template>'}),define("text!pages/timesheets/planning-router.html",["module"],function(e){e.exports="<template>\n    <router-view></router-view>\n</template>"}),define("text!pages/timesheets/planning.html",["module"],function(e){e.exports='<template>\n\n    <div \n        class="ui calendar"\n        data-property="date"\n    >\n        <div class="ui input left icon">\n            <input\n                class=""\n                type="hidden"\n            />\n        </div>\n    </div>      \n\n</template>'}),define("text!pages/timesheets/timesheet-entry.html",["module"],function(e){e.exports='<template>\n    <require from="../../resources/dropdown/dropdown"></require>\n\n    <form\n        class="ui timesheet-entry form"\n        validation-renderer="semantic-form"\n        validation-errors.bind="errors"\n    >\n        \n        <div class="two fields">\n\n            <div class="two fields">\n\n                <div class="field">\n                    <label t="date">Date</label>\n                    <div \n                        class="date ui calendar"\n                        data-property="date"\n                    >\n                        <div class="ui input left icon">\n                            <i class="calendar icon"></i>\n                            <input\n                                class=""\n                                type="text"\n                                t="[placeholder]date"\n                                value.bind="dateInput & validate"\n                            />\n                        </div>\n                    </div>      \n                </div>\n\n                <div class="purpose field">\n                    <label t="purpose">Purpose</label>\n                    <dropdown \n                        selected-entry.two-way="entity.purpose & validate"\n                        route="purpose"\n                        name="purpose"\n                        required.bind=true\n                        allow-add.bind=true\n                    >\n                    </dropdown>                \n                </div>\n\n            </div>\n\n            <div class="field">\n                <label t="time">Time Spent</label>\n                <div class="two hours fields">\n                    <div class="inline field">\n                        <input\n                            class="short integer input"\n                            id="HoursInput"\n                            type="text"\n                            t="[placeholder]hours"\n                            value.bind="entity.hours & validate"\n                        />\n                        <label class="ui right floated" t="hours">hours</label>\n                    </div>\n                    <div class="inline field">\n                        <input\n                            class="short integer input"\n                            type="text"\n                            t="[placeholder]minutes"\n                            value.bind="entity.minutes & validate"\n                        />\n                        <label class="ui right floated" t="minutes">minutes</label>\n                    </div>\n                </div>\n            </div>\n        \n        </div>\n\n        <div class="two fields">\n\n            <div class="field">\n                <label t="interpret">Interpret</label>\n                <dropdown \n                    selected-entry.two-way="entity.interpret & validate"\n                    route="interpret"\n                    name="interpret"\n                    required.bind=false\n                    allow-add.bind=true\n                >\n                </dropdown>\n            </div>\n\n            <div class="field">\n                <label t="interpret-time">Time for interpret</label>\n                <div class="two hours fields">\n                    <div class="inline field">\n                        <input\n                            class=""\n                            type="text"\n                            t="[placeholder]hours"\n                            value.bind="entity.interpret_hours & validate"\n                        />\n                        <label class="ui right floated" t="hours">hours</label>\n                    </div>\n                    <div class="inline field">\n                        <input\n                            class=""\n                            type="text"\n                            t="[placeholder]minutes"\n                            value.bind="entity.interpret_minutes & validate"\n                        />\n                        <label class="ui right floated" t="minutes">minutes</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="field">\n            <label t="observation">Observation</label>\n            <textarea\n                class=""\n                rows="2"\n                t="[placeholder]observation"\n                value.bind="entity.observation & validate"\n            >\n            </textarea>\n        </div>\n\n        <div class="field">\n            <label t="travel">Travel</label>\n            <textarea\n                class=""\n                rows="2"\n                t="[placeholder]travel"\n                value.bind="entity.travel & validate"\n            >\n            </textarea>\n        </div>        \n\n    </form>\n\n    <button\n        class="ui primary fluid button"\n        tabindex="0"\n        t="save"\n        if.bind="isEditable"\n        click.trigger="doSave($event)"\n    >\n        Save\n    </button>\n    \n</template>';
}),define("text!pages/timesheets/timesheets-router.html",["module"],function(e){e.exports="<template>\n    <router-view></router-view>\n</template>"}),define("text!pages/timesheets/timesheets.html",["module"],function(e){e.exports='<template>\n\n    <require from="./timesheet-entry"></require>\n    <require from="../../resources/formats/date-format"></require>\n    <require from="../../resources/formats/limit-to-value"></require>\n\n    <confirmation approve-callback></confirmation>\n\n    <div class="ui timesheets">\n\n        <div class="ui centered fluid new timesheet">\n            <div class="content">\n                <div class="ui sixteen wide column grid">\n                    <div class="centered row">\n                        <timesheet-entry\n                            class=""\n                            create.bind="true"\n                            save-action.call="saveEntry(entity)"\n                        >\n                        </timesheet-entry>\n                    </div>\n\n                    <div class="centered row">\n                        <div class="ui styled fluid accordion entries">\n                            <template repeat.for="entity of lastTimesheet.doc.entries | limitTo: 5">\n                                <div class="title">\n                                    <i class="dropdown icon"></i>\n                                    ${ entity.date  | dateFormat } - \n                                    ${ entity.hours }${ \'h\' | t }${ entity.minutes }${ \'mn\' | t } -\n                                    ${ purposes.get(entity.purpose) }\n                                </div>\n                                <div class="content">\n                                    <timesheet-entry\n                                        class=""\n                                        create.bind="false"\n                                        save-action.call="saveEntry(entity)"\n                                        entity.bind="entity"\n                                    >\n                                    </timesheet-entry>\n                                </div>\n                            </template>\n                        </div>\n                            \n                    </div>                    \n                </div>\n            </div>\n        </div>\n\n    </div>\n\n</template>'}),define("text!pages/user/logged-redirect.html",["module"],function(e){e.exports="<template>\n</template>"}),define("text!pages/user/login.html",["module"],function(e){e.exports='<template>\n    <require from="semantic/semantic.css"></require>\n    <div class="ui login middle aligned center aligned grid">\n        <div class="column">\n            <h2 class="ui teal image header">\n            <div class="content" t="loginmessage">\n                Log-in to your account\n            </div>\n            </h2>\n            <form class="ui large form">\n            <div class="ui stacked segment">\n                <div class="field">\n                <div class="ui left icon input">\n                    <i class="user icon"></i>\n                    <input type="text" name="username" placeholder="${ \'username\' | t }" value.bind="username">\n                </div>\n                </div>\n                <div class="field">\n                <div class="ui left icon input">\n                    <i class="lock icon"></i>\n                    <input type="password" name="password" placeholder="${ \'password\' | t }" value.bind="password">\n                </div>\n                </div>\n                <button \n                    class="ui fluid large teal submit button"\n                    t="login"\n                    click.delegate="login()"\n                >\n                Login\n                </button>\n            </div>\n\n            <div class="ui login error message">\n                ${ loginError }\n            </div>\n\n            </form>\n\n        </div>\n    </div>\n</template>\n'}),define("text!pages/user/password.html",["module"],function(e){e.exports='<template>\n\n    <require from="../../resources/dropdown/dropdown"></require>\n    \n    <form\n        class="ui form"\n        validation-renderer="semantic-form"\n        validation-errors.bind="errors"\n    >\n\n        <div class="ui grid">\n            <div class="thirteen wide column">\n                <div class="field">\n                    <label t="user:currentpassword">Current Password</label>\n                    <input\n                        type="password"\n                        value.bind="form.current_password & validate:rules"\n                        t="[placeholder]user:currentpassword"\n                    />\n                </div>            \n                <div class="field">\n                    <label t="user:newpassword">New Password</label>\n                    <input\n                        type="password"\n                        value.bind="form.plain_password.first & validate:newrules"\n                        t="[placeholder]user:newpassword"\n                    />\n                </div>            \n                <div class="field">\n                    <label t="user:repeatpassword">Repeat Password</label>\n                    <input\n                        type="password"\n                        value.bind="form.plain_password.second & validate:newrules"\n                        t="[placeholder]user:repeatpassword"\n                    />\n                </div>            \n\n                <button\n                    class="ui primary large submit button"\n                    tabindex="0"\n                    t="save"\n                    click.trigger="save($event)"\n                >\n                    Save\n                </button>              \n\n            </div>\n        </div>\n\n    </form>\n    \n</template>'}),define("text!pages/user/user-router.html",["module"],function(e){e.exports='<template>\n\n    <div class="ui grid user router">\n\n        <div class="four wide column">\n\n            <nav class="ui visible sticky vertical labeled icon menu" role="navigation">\n            <a \n                repeat.for="row of router.navigation" \n                class="\n                ${row.isActive ? \'active\' : \'\'} teal item menu\n                "\n                href.bind="row.href"\n            >\n                <desktop t="${row.title}">\n                </desktop>\n                <i \n                class="\n                    ${row.settings.icon} icon\n                "\n                >\n                </i>\n            </a>\n            </nav>\n        </div>\n    \n        <div class="twelve wide column">\n            <router-view></router-view>\n        </div>\n\n    </div>\n\n</template>'}),define("text!resources/confirmation/confirmation.html",["module"],function(e){e.exports='<template>\n\n    <div tabindex="-1" role="dialog" class="ui small modal confirmation modal-dialog">\n        <div class="header" t="confirmation">Confirmation</div>\n        <div class="content">\n            <p>${message | t}</p>\n        </div>\n        <div class="actions">\n            <div \n                class="ui cancel negative button"\n                click.trigger="dialogController.cancel()"\n                t="no"\n            >\n                No\n            </div>\n            <div \n                class="ui positive approve right labeled icon button"\n                click.trigger="dialogController.ok()"\n            >\n                ${ \'yes\' | t}\n                <i class="checkmark icon"></i>\n            </div>\n        </div>\n    </div>\n    \n</template>'}),define("text!resources/confirmation/delete-button.html",["module"],function(e){e.exports='<template>\n    <a \n        class="negative ui"\n        click.trigger="do($event)"\n    >\n        <i class="trash icon"></i>\n    </a>\n</template>'}),define("text!resources/dropdown/dropdown.html",["module"],function(e){e.exports='<template>\n\n    <div\n        class="ui fluid dropdown search selection ${multiple === true?\'multiple\':\'\'}"\n        tabindex="0"\n    >\n        <input\n            if.bind="!multiple"\n            type="hidden"\n            name.bind="name"\n            value.bind="selectedEntry"\n        />\n\n        <select\n            if.bind="multiple === true"\n            name.bind="name"\n            multiple=""\n        >        \n            <option if.bind="!required && !multiple" t="All" data-value="" value="">All</option>\n            <option\n                repeat.for="entry of entries"\n                value="${entry.id}"\n            >\n                ${entry.doc.name}\n            </option>\n        </select>\n        \n        <i class="dropdown icon"></i>\n        <div \n            class="\n                ${selectedEntry?\'\':\'default\'}\n                text\n            "\n            t="${name}"\n            data-default="${name|t}"\n            innerHTML.bind="selectedEntryName"\n        >\n            Entry\n        </div>\n        <div class="menu transition" tabindex="-1">\n            <div if.bind="!required && !multiple" class="item" t="All" data-value="">All</div>\n            <div\n                repeat.for="entry of entries"\n                data-value="${entry.id}"\n                class="\n                    item\n                    ${selectedEntry == entry.id ? \'active selected\':\'\'}\n                "\n            >\n                ${entry.doc.name}\n            </div>\n        </div>        \n    </div>\n\n</template>'}),define("text!resources/flash/flash.html",["module"],function(e){e.exports='<template>\n    <div class="one flash item">\n        <div \n            class="ui message"\n        >\n            ${ message }\n        </div>\n    </div>\n</template>'});